function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}define("core/util/santaVersion.json",[],function(){return{version:"1.2759.0"}}),define("core/core/createReactElement",["santaComponents"],function(e){"use strict";return e.utils.createReactElement}),define("core/siteRender/styleCollector",["lodash","utils","skins"],function(e,t,i){"use strict";function s(e,t,i){t&&!e[t]&&(e[t]=i)}function n(e,t){return e[t]&&p.get(e[t].skin)}function o(e,i,o){e.styleId?n(i,e.styleId)?s(o,e.styleId,i[e.styleId].skin):s(o,e.styleId,e.skin):e.skin&&p.get(e.skin)&&s(o,t.santaTypes.shortenStyleId(e.skin),e.skin)}function r(e,t,i,s,n){if(e.componentType&&l[e.componentType]){var o=function(e,t,i){var s=i.styleId&&e.getDataByQuery(i.styleId,t,e.dataTypes.THEME);return{dataItem:i.dataQuery&&e.getDataByQuery(i.dataQuery,t),propertiesItem:i.propertyQuery&&e.getDataByQuery(i.propertyQuery,t,e.dataTypes.PROPERTIES),styleItem:s,structure:i}}(i,n,e);l[e.componentType](o,t,i,s,n)}}function a(i,c,p,l,d,u){o(i,c,l),function(t,i,o){t.modes&&t.modes.overrides&&e.forEach(t.modes.overrides,function(e){e.styleId&&n(i,e.styleId)&&s(o,e.styleId)})}(i,c,l),r(i,c,p,l,d);var h=t.dataUtils.getChildrenData(i,!!u);e(h).compact().forEach(function(e){a(e,c,p,l,d)})}function c(i,s,n,a,p,l){o(i,s,a),r(i,s,n,a,p);var d=t.dataUtils.getChildrenData(i,!!l);e(d).compact().forEach(function(e){c(e,s,n,a,p)})}var p=i.skinsMap,l={};return t.sessionFreezer.freeze(l),{buildLoadedStyles:function(t,i){var s=i.getAllTheme();return e.reduce(t,function(e,t){var n=i.pagesData[t.id]?t.id:i.MASTER_PAGE_ID,o={};return c(t,s,i,o,n,i.isMobileView()),e[t.id||n]=o,e},{})},collectStyleIdsFromFullStructure:a,registerClassBasedStyleCollector:function(e,t){l[e]=t}}}),define("core/fonts/collectFontsFromLoadedCompStyles",["lodash","skins","utils"],function(e,t,i){"use strict";function s(t,i,r){var a=[];if(i.exports&&(a=e(i.exports).pickBy(function(e){return e.skin&&n.get(e.skin)}).flatMap(function(e){return s(t,n.get(e.skin),r)}).value()),i.params){var c=e.keys(e.omitBy(i.params,function(e){return"FONT"!==e}));e.has(r,"style.properties")&&e.forEach(c,function(e){var s="",n=r.style.properties[e]||i.paramsDefaults[e],c=function(e){return/^(font|color)_[0-9]+$/.test(e)?"theme":"value"}(n);"value"===c?s=o.parseFontStr(n).family.toLowerCase():"theme"===c&&(s=o.getFontFamilyByStyleId(t,n)),s&&a.push(s.replace(/\u0000$/,""))})}return a}var n=t.skinsMap,o=i.fonts.fontUtils;return function(t,i){var o=t.getAllTheme(),r=o.THEME_DATA;return e(o).pick(i).reduce(function(e,t,i){var o=n.get(t?t.skin:i);return o?e.concat(s(r,o,t)):e},[])}}),define("core/util/styleNodeUtils",["santaComponents","lodash"],function(e,t){"use strict";return{generateStyleNode:function(i,s,n){return n&&(s=t.map(s.trim().split("\n"),function(e){var i=e.split("{"),s=i[0].split(",");return i[0]=t.map(s,function(e){return n+" "+e}),i.join("{")}).join("\n")),e.utils.createReactElement("style",{type:"text/css","data-styleid":i,dangerouslySetInnerHTML:{__html:s||""}})}}}),define("core/siteRender/WixSkinStyleNode",["lodash","prop-types","create-react-class","mobx-react","skins","santaComponents","core/util/styleNodeUtils"],function(e,t,i,s,n,o,r){"use strict";var a=n.skinsMap,c=i({displayName:"WixStyleNode",propTypes:{siteData:t.object.isRequired,styleName:t.string.isRequired,skinName:t.string.isRequired,styleRoot:t.string},render:function(){var t=this.props.siteData.getDataByQuery(this.props.styleName,this.props.siteData.MASTER_PAGE_ID,this.props.siteData.dataTypes.THEME),i=a.get(t?t.skin:this.props.skinName);return i?function(t,i,s,n,c,p,l){var d=e.get(n,"style.properties")||{},u=o.utils.skinsRenderer.createSkinCss(i,d,t,s,c,l,function(e){return a.get(e)});return r.generateStyleNode(s,u,p)}(this.props.siteData.getGeneralTheme(),i,this.props.styleName,t,this.props.siteData.mobile,this.props.styleRoot,this.props.siteData.serviceTopology):null}});return s.observer(c)}),define("core/siteRender/WixFontsStyleNode",["lodash","prop-types","create-react-class","mobx-react","utils","core/util/styleNodeUtils"],function(e,t,i,s,n,o){"use strict";var r=n.fonts.fontCss,a=i({displayName:"WixFontsStyleNode",propTypes:{siteData:t.object.isRequired,styleRoot:t.string},render:function(){var e=this.props.siteData.getFontsMap(),t=this.props.siteData.getColorsMap(),i=r.getThemeFontsCss(e,t);return o.generateStyleNode("theme_fonts",i,this.props.styleRoot)}});return s.observer(a)}),define("core/siteRender/WixColorsStyleNode",["lodash","prop-types","create-react-class","mobx-react","utils","core/util/styleNodeUtils"],function(e,t,i,s,n,o){"use strict";var r=n.cssUtils,a=i({displayName:"WixColorsStyleNode",propTypes:{siteData:t.object.isRequired,styleRoot:t.string},render:function(){var e=this.props.siteData.getColorsMap(),t=r.getColorsCssString(e);return o.generateStyleNode("theme_colors",t,this.props.styleRoot)}});return s.observer(a)}),define("core/siteRender/WixThemeReact",["santaComponents","core/core/createReactElement","zepto","lodash","create-react-class","mobx","mobx-react","utils","core/fonts/collectFontsFromLoadedCompStyles","core/util/styleNodeUtils","core/siteRender/WixSkinStyleNode","core/siteRender/WixFontsStyleNode","core/siteRender/WixColorsStyleNode","reactDOM"],function(e,t,i,s,n,o,r,a,c,p,l,d,u,h){"use strict";function g(e,i,s,n){return t(l,{key:i,siteData:e,styleName:i,skinName:s,styleRoot:n})}function f(e,t){var i=window.document.getElementById("font_"+t);return!i||(i.removeAttribute("media"),!1)}function m(e,t){return e.getDataByQuery(t,e.MASTER_PAGE_ID,e.dataTypes.THEME)}function y(){if(this._isMounted){this.waitingForStylesReady||(this.waitingForStylesReady=!0,this.waitingStartTime=s.now());var e=i(h.findDOMNode(this.testStyleComp));if(s.isFunction(this.afterStylesReadyCallback)&&e.css("z-index")==this.testNodeIndex){var t=s.now()-this.waitingStartTime>S;if(t||"visible"!==e.css("overflow-y"))return t&&a.log.error("waitForStylesReady waiting for testStyles",e.css("overflow-y")),this.waitingForStylesReady=!1,void this.afterStylesReadyCallback()}a.animationFrame.request(this.waitForStylesReady)}}function v(){var e=this,t=this.props.siteData,i=m(t,"THEME_DATA"),n=o.computed(function(){return function(e,t){return s.map(e,function(e){return D.getPageUsedFontsList(t,e)})}(e.props.siteAPI.getRootIdsWhichShouldBeRendered(),t)});i&&i.font&&function(e){var t=this,i=this.props.siteAPI.getSiteAspect("fontsLoaderAspect");if(i){var n=o.computed(function(){var n=t.props.siteData,o=s.reduce(t.props.loadedStyles.get(),function(e,t){return s.assign(e,t)},{}),r=c(n,s.keys(o)),a=e.get();s.isEmpty(t.skinsFonts)||(a=a.concat([t.skinsFonts]));var p=s(a).concat(r).flattenDeep().uniq().value(),l=i.filterHandledFonts(p);return!s.isEmpty(l)&&l}),r=function(){var e=n.get();s.isEmpty(e)||i.loadFonts(e,t.waitForStylesReady)};this.disposeLoadFonts=o.observe(n,r),r()}}.call(this,n)}var A="testStyles",S=1e3,P=30,I=10*P,D=a.fonts.fontUtils,_=n({displayName:"WixThemeReact",setTestStyleRef:function(e){this.testStyleComp=e},getInitialState:function(){return this.testNodeIndex=0,this.waitingForStylesReady=!1,this.waitingStartTime=0,this.skinsFonts=[],{}},render:function(){var i=this.props.loadedStyles.get();this.testNodeIndex=(this.testNodeIndex+1)%100;var n=[{key:"theme"}],o=this.props.siteData,r=s.reduce(i,function(e,t){return s.assign(e,t)},{}),p=m(o,"THEME_DATA");if(p&&p.font){var l=c(o,s.keys(r));this.skinsFonts=s.union(this.skinsFonts,l),o.getBrowser().ie&&!o.isMobileView()&&n.push(function(t){var i=t.santaBase+"/static/css/mobileIEFix.css";return e.utils.createReactElement("link",{rel:"stylesheet",type:"text/css",href:i})}(o)),n=n.concat(function(e,i){return[t(d,{siteData:e,styleRoot:i,key:"fontsStyleNode"}),t(u,{siteData:e,styleRoot:i,key:"colorsStyleNode"})]}(o,this.props.styleRoot),function(e,t,i){var n=[];s.forEach(t,function(t,s){n.push(g(e,a.santaTypes.shortenStyleId(s),t,i))}),n.push(g(e,"siteBackground","wysiwyg.viewer.skins.siteBackgroundSkin",i)),n.push(g(e,"loginDialog","wysiwyg.viewer.skins.PasswordLoginSkin",i));var o=a.constants.POPUP.POPUP_OVERLAY_CONTAINER;return t[o.STYLE_ID]||n.push(g(e,o.STYLE_ID,o.SKIN,i)),n}(o,r,this.props.styleRoot),function(t,i,s){var n=(i?i+" ":"")+"."+A+" {position:absolute; display: none; z-index: "+t+"}";return[e.utils.createReactElement("style",{type:"text/css",key:"testStyle"},n),e.utils.createReactElement("div",{key:A+"_div",ref:s,className:A})]}(this.testNodeIndex,this.props.styleRoot,this.setTestStyleRef)),this.props.shouldRenderPage&&(n=n.concat(this.getFontsCssLinks()))}return e.utils.createReactElement.bind(void 0,"div").apply(void 0,n)},componentWillMount:function(){(function(){var e=this.props.siteData;this.waitForStylesReady=s.debounce(y.bind(this),e.browser.firefox||e.browser.safari||e.os.ios?I:P)}).call(this),v.call(this)},componentWillUnmount:function(){this._isMounted=!1,this.afterStylesReadyCallback=null,this.waitingForStylesReady=!1,this.disposeLoadFonts&&this.disposeLoadFonts()},registerStylesReadyCallback:function(e){this.afterStylesReadyCallback=e},initWaitForStylesReady:function(){this.waitingForStylesReady||y.call(this)},componentDidMount:function(){this._isMounted=!0},getFontsCssLinks:function(){var t=this.props.siteData,i=t.rendererModel.siteInfo.documentType,n=D.getCssUrls(i,t.serviceTopology);return t.isInSSR()||t.isClientAfterSSR()?s.map(t.externalStyles,function(e,t){return p.generateStyleNode(t,e)}):(n=s.pickBy(n,f),s.map(n,function(t,i){return e.utils.createReactElement("link",{rel:"stylesheet",type:"text/css",href:t,key:i})}))}});return r.observer(_)}),define("core/siteRender/WixPageReact",["core/core/createReactElement","lodash","prop-types","create-react-class","reactDOM","mobx","santaProps","utils","compUtils","santaComponents"],function(e,t,i,s,n,o,r,a,c,p){"use strict";function l(i){var s={createPage:function(s,n){return function(i,s,n){if(!n.viewerPrivateServices.pointers.page.isExists(i))return null;var o=u.getRootProps(h,i,n.siteAPI,n.viewerPrivateServices,n.measureMap);return o.rootNavigationInfo&&o.rootNavigationInfo.routerDefinition&&(o.key=o.rootId+o.rootNavigationInfo.routersRendererIndex),o.firstPage=s,o.mobxObserverWrapperProps=n.mobxObserverWrapperProps,o.onRendered=t.once(function(){n.siteAPI.getSiteAspect("WidgetAspect").getWidgetHandler().handleEvent(o.rootId,"onRendered")}),e(h,o)}(s,n,i)},skin:"skins.core.InlineSkin"};return s.measureMap=i.measureMap,s}function d(){var e=this.props.compBehaviors;if(e){var t=this.props.rootId,i=this.props.siteAPI.getSiteAspect("actionsAspect"),s=this.props.siteAPI.getSiteAspect("behaviorsAspect");i.registerBehaviors(t,t,e),s.setBehaviorsForActions(s.convertBehaviors(e,t),t,t)}}var u=r.componentPropsBuilder,h=s({displayName:"WixPageReact",propTypes:{mobxObserverWrapperProps:i.object,structure:i.object,rootId:i.string,onRendered:i.func},getDefaultProps:function(){return{onRendered:t.noop}},mixins:[p.mixins.baseCompMixin,p.mixins.animationsMixin],getInitialState:function(){return{allContextsReady:this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()}},componentWillMount:function(){this.childrenAnimations={},this.transitioningChildrenPrevLayout={},this.compRefs={},this.mobxObserverWrapperProps=t.assign({},this.props.mobxObserverWrapperProps,{propsForSitePages:l(this.props),addComponentRef:this.addComponentRef}),this.disposeReaction=o.reaction(function(){return this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()},function(e){this.state.allContextsReady!==e&&this.setState({allContextsReady:e})},{context:this}),d.call(this);var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillUnmount:function(){this.disposeReaction()},componentWillUpdate:function(){(function(e,t){var i=e.getRootIdsWhichShouldBeRendered();return!a.componentUtils.shouldBeRendered(i,t)})(this.props.siteAPI,this.props.rootId)&&this.props.siteAPI.resetRuntimeOverrides(this.props.rootId),d.call(this);var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},componentDidUpdate:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},componentDidMount:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},render:function(){if(!this.state.allContextsReady)return this.renderedPage||e("div");var t={id:this.props.rootId,key:this.props.rootId,"data-ref":this.props.rootId,rootId:this.props.rootId,mobxObserverWrapperProps:this.mobxObserverWrapperProps},i=function(e){return e&&c.compFactory.getCompClass(e)||p.utils.createReactElement.bind(null,"div")}(this.props.componentType);return this.renderedPage=i(t),this.renderedPage},updateVisibility:function(){this.props.siteAPI.getSiteAspect("WidgetAspect").isContextReady(this.props.rootId)&&(n.findDOMNode(this).style.visibility="",this.props.onRendered())},componentDidLayout:function(){this.updateVisibility()}});return h}),define("core/siteRender/wixBackgroundInstantiator",["lodash","compUtils","siteUtils"],function(e,t,i){"use strict";var s=i.structuresDescription.getSiteBackgroundStructure();return Object.freeze(s),{getWixBgStructure:function(){return s},getWixBgComponent:function(e){var i={mobxObserverWrapperProps:e,structure:s,rootId:"masterPage",key:s.id,id:s.id};return t.compFactory.getCompClass("wysiwyg.viewer.components.SiteBackground")(i)}}}),define("core/siteRender/beatsGenerator",["lodash"],function(e){"use strict";var t=["No Site Type","WixSite","UGC","Template"];return{createPartiallyVisibleBeatScriptString:function(i){i.getServiceTopologyProperty("biServerUrl"),i.baseVersion,i.getMetaSiteId(),i.isPremiumDomain(),function(i){var s=i.rendererModel.siteInfo.documentType;e.indexOf(t,s)}(i)}}}),define("core/bi/errors.json",[],function(){return{NULL_SITE_ERROR:{errorName:"NULL_SITE_ERROR",errorCode:112e3,severity:"error",params:{p1:"errorMsg",p2:"modules"}},SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED:{errorCode:111020,severity:"warning",params:{p2:"pageId",p1:"hostname",p3:"url",p4:"responseStatusCode"}},ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED:{errorCode:111021,severity:"fatal",params:{p1:"pageId"}}}}),define("core/bi/errors",["core/bi/errors.json","lodash","loggingUtils"],function(e,t,i){"use strict";var s=i.logger;return t.forEach(e,function(e,t){e.errorName=t}),s.register("core","error",e),e}),define("core/siteRender/SiteAPI",["utils","zepto","lodash","core/bi/errors","siteUtils","coreUtils","thirdPartyAnalytics","experiment"],function(e,t,i,s,n,o,r,a){"use strict";function c(e,t){!e&&arguments.length&&"undefined"!=typeof window&&(t=t||"unknown",window.wixBiSession&&window.wixBiSession.sendError(s.NULL_SITE_ERROR,t)),this._site=e,i.bindAll(this,i.functionsIn(this));var n=this.getActionQueue();n&&(n.registerPreFlushOperation(this.setQueueFlushStart),n.registerPostFlushOperation(this.setQueueFlushEnd))}function p(e,t,i){var s=this.getPointers().platform.getControllerStageDataPointer(e,t,i);return this.getDisplayedDAL().get(s)}function l(t){var s=this.getRootIdsWhichShouldBeRendered(),n=this.getSiteDataAPI(),o=function(t){return t?e.constants.VIEW_MODES.MOBILE:e.constants.VIEW_MODES.DESKTOP}(t),r=this.getSiteData().anchorsMap;i.forEach(s,function(e){i.has(r,[e,o])||n.anchors.createPageAnchors(e,{forceMobileStructure:t})})}function d(t,s,n){var o=t.getPointers().components.getPage(n,t.getSiteData().getViewMode()),r=t.getDisplayedDAL().get(o),a=e.siteConstants.MASTER_PAGE_ID===n?"children":"components";return function(e,t){for(var s=i.cloneDeep(e),n=void 0,o=void 0;s.length>0;){if((n=s.pop()).id===t)return!0;if(n.components&&n.components.length)for(o=0;o<n.components.length;o+=1)s.push(n.components[o])}return!1}(i.get(r,a),s)}function u(e){return["siteApi",e,"globalData"]}function h(e){var t=this.getDisplayedDAL(),s=this.getPointers(),n=this.getSiteData(),o=n.getCurrentUrlPageId(),r=s.data.getDataItem(o,n.MASTER_PAGE_ID),a=i.pick(t.get(r),i.keys(e));i.isEqual(a,e)||t.merge(r,e)}var g=e.logger,f=["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAWidget","mobile.core.components.Page","wixapps.integration.components.AppPage","mobile.core.components.MasterPage"];return c.prototype={setSite:function(e){this._site=e},reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(e){this._site.registerReLayoutPending(e)},cancelReLayoutPending:function(e){this._site.cancelReLayoutPending(e)},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(e){return this._site&&(i.get(this._site.siteAspects,e)||i.get(this._site.props.aspects,e))},getSiteData:function(){return this._site.props.siteData},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(e,t){var i=this.getSiteData();i&&i.wixBiSession&&void 0===i.wixBiSession[e]&&(i.wixBiSession[e]=t)},addPrefetchPages:function(e){var t=this.getDisplayedDAL(),s=t.getByPath(["prefetchPages"]);t.setByPath(["prefetchPages"],i.union(s,e))},markVisitedPage:function(e){var t=this.getDisplayedDAL(),s=t.getByPath(["visitedPages"]);t.setByPath(["visitedPages"],i.union(s,[e]))},setNoEnforceAnchors:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getNoEnforceAnchorsPointer();t.set(i,e)},getNoEnforceAnchors:function(){var e=this.getDisplayedDAL(),t=this.getPointers().general.getNoEnforceAnchorsPointer();return e.get(t)},requestEnforceAnchors:function(){this.getSiteData().enforceAndPatchRequested=!0},setBiMarker:function(e){this.setBiParam(e,i.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){var e=this._site.props.siteData;return!(!e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId&&!e.getNonPageItemZoomData())},openPopup:function(e,t,i){window.open(e,t,i)},href:function(e){window.location.href=e},navigateToRenderedLink:function(t){return!function(t){var i=e.linkRenderer.isExternalLink(this.getSiteData(),t.href),s="mail"===t["data-type"],n="_self"===t.target;return!this.getRenderFlag("isExternalNavigationAllowed")&&(i&&n||s)}.call(this,t)&&(function(t){var s=e.linkRenderer.isExternalLink(this.getSiteData(),t.href);switch(t["data-type"]=s?"external":t["data-type"],t.target=t.target||"_self",t["data-type"]){case"external":window.open(t.href,t.target);break;case"mail":case"phone":window.open(t.href,"_self");break;case"document":t.docId=t.href;var o=n.linkUtils.getDocumentLink(t,this.getSiteData());window.open(o,"_blank");break;default:var r=t["data-no-physical-url"]?t["data-no-physical-url"]:t.href,a=e.wixUrlParser.parseUrl(this.getSiteData(),r);a&&(i.assign(a,{pageItemAdditionalData:t["data-page-item-context"],anchorData:t["data-anchor"]}),this.handleNavigation(a,t,!0))}}.call(this,t),!0)},isPageLandingPage:function(e){return this.getSiteData().isPageLandingPage(e)},getMasterPageLayoutSettings:function(){return this.getSiteData().getMasterPageLayoutSettings()},isPageAllowedAndLoaded:function(e){return this.isPageAllowed(e)&&o.siteDataUtils.isPageLoaded(this.getSiteData(),e.pageId)},isPageAllowed:function(e){return this.getSiteAspect("siteMembers").isPageAllowed(e)},scrollToAnchor:function(t,i){var s=e.scrollAnchors.calcAnchorScrollToPosition(t,this);return this._site.scrollToAnchor(s,i)},scrollToComponent:function(e,t){var s=this.getSiteData(),n=s.measureMap||{},o=function(e,t){var s=e.getAllRenderedRootIds(),n=void 0;if(i.includes(s,t))return t;var o=void 0,r=void 0;for(o=0,r=s.length;o<r;o++)if(n=s[o],d(e,t,n))return n;return!1}(this,e);if(o)if(function(e,t){return i.get(e,["shownInFixed",t],!1)}(n,e))t&&i.forEach(t,function(e){i.isFunction(e)&&e()});else{var r=i.get(n,["absoluteTop",e])||i.get(n,["top",e]),a=s.isPopupPage(o)?s.getPopupsContainer():this._site.props.getSiteContainer();this._site.scrollTo({y:r},t,a)}},getRenderRealtimeConfigItem:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderRealtimeConfigItem(e);return t.get(i)},getAllRenderedRootIds:function(){return this._site.getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return this._site.getRootIdsWhichShouldBeRendered()},navigateToPage:function(e,t,i){this._site.tryToNavigate(e,t,!1,i)},updateUrlIfNeeded:function(e){this._site.updateUrlIfNeeded(e)},handleNavigation:function(e,t,i){this._site.handleNavigation(e,t,i)},getDynamicPageRealPageAndReloadLoadApps:function(e){var t=this.getSiteData();this._site.props.getDynamicPageRealPage(t,e,function(){this.getSiteAspect("WidgetAspect").restartApps()}.bind(this))},updatePageNavInfo:function(e,t,i){var s=this.getSiteData();if(e.pageId!==s.getPrimaryPageId()&&e.pageId!==s.getCurrentPopupId())throw"you need to navigate to page if it's a different page";this._site.tryToNavigate(e,t,!0,i)},forceUpdate:function(e){this._site.forceUpdate(e)},getComponentsByPageId:function(e){return this._site.getComponentsByPageId(e)},getComponentsOnCurrentPage:function(){return this._site.getComponentsByPageId(this.getSiteData().getCurrentUrlPageId())},getPageUrl:function(e){var t=i.get(this.getSiteData().getRootNavigationInfo(),"routerDefinition.routerId");return this.getPageUrlFor(this.getSiteData().getCurrentUrlPageId(),e,t,"CURRENT_INNER_ROUTE")},getPageData:function(){return this.getSiteData().getDataByQuery(this.getSiteData().getCurrentUrlPageId())},setPageTitle:function(e,t,i){h.call(this,{title:e,descriptionSEO:t,pageTitleSEO:i})},setRunTimePageTitle:function(e,t,i){this.setPageTitle(e,t,i),this._site.updateTitleAndMetaTags(),this._site.notifyAspects(this._site.supportedEvents.siteMetadataChange,{title:this.getSiteData().getCurrentUrlPageTitle(),description:t})},setPageMetaKeywords:function(e){h.call(this,{metaKeywordsSEO:e})},setPageMetaOgTags:function(e){var t=this.getSiteData();t.setPageOgTags(t.getCurrentUrlPageId(),e)},setPageJsonld:function(e){var t=this.getSiteData();t.setJsonLd(t.getCurrentUrlPageId(),e)},setPageLinkTag:function(e){var t=this.getSiteData();t.setPageLinkTag(t.getCurrentUrlPageId(),e)},setPageTwitterMetaTags:function(e){var t=this.getSiteData();t.setPageTwitterTags(t.getCurrentUrlPageId(),e)},getPageUrlFor:function(t,i,s,n){var o=this.getSiteData().getDataByQuery(t);if(!o)return"";var r={pageId:t,title:o.pageUriSEO};return s&&(r.routerId=s,r.innerRoute=n),e.wixUrlParser.getUrl(this.getSiteData(),r,i)},initFacebookRemarketing:function(e){e?r.initFacebookRemarketingPixelId(this.getSiteData(),e):r.initFacebookRemarketingUserPixel(this.getSiteData())},fireFacebookRemarketingPixel:function(e,t){r.fireFacebookRemarketingPixel(this.getSiteData(),e,t)},initGoogleRemarketing:function(){r.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){r.fireGoogleRemarketingPixel()},reportGoogleAnalytics:function(){r.reportGoogleAnalytics.apply(r,[this.getSiteData()].concat(Array.prototype.slice.call(arguments)))},reportGoogleTagManager:function(e){r.reportGoogleTagManager(this.getSiteData(),e)},fireFacebookCustomEvent:function(e,t,i){r.fireFacebookCustomEvent(this.getSiteData(),e,t,i)},initYandexMetrika:function(){r.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(e){r.reportYandexPageHit(e)},reportBI:function(e,t){g.reportBI(this._site.props.siteData,e,t)},getBiVisitorId:function(){return i.get(this.getSiteData(),"wixBiSession.viewerSessionId")},reportCurrentPageEvent:function(e){var t=this._site.props.siteData;e||(e=i.isString(t.currentUrl)?t.currentUrl:t.currentUrl.full);var s=t.getExternalBaseUrl().replace(/\/$/,""),n=e.replace(s,"");r.reportPageEvent(t,n)},reportPageEvent:function(e){r.reportPageEvent(this._site.props.siteData,e)},reportBeatEvent:function(e,t){g.reportBeatEvent(this._site.props.siteData,e,t)},reportBeatStart:function(e){this.getSiteData().biData.switchPage(e),this.reportBeatEvent("start",e)},reportBeatFinish:function(e){this.reportBeatEvent("finish",e)},reportPageBI:function(){g.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},setUserSession:function(t){if(t!==this.getUserSession()){var i=this.getSiteData();i.pubSvSession(t),e.cookieUtils.deleteCookie("svSession",i.currentUrl.hostname,i.getMainPagePath()),e.cookieUtils.setCookie("svSession",t,null,i.currentUrl.hostname,i.getMainPagePath()),this._site.notifyAspects(this._site.supportedEvents.svSessionChange,t)}},triggerFakeModeChange:function(e,t){this._site.notifyAspects(this._site.supportedEvents.fakeModeChange,e,t)},isSiteBusy:function(){return this._site.isBusy},isSiteBusyIncludingTransition:function(){return this.isSiteBusy()||this._site.isDuringTransition},startingPageTransition:function(e){var t=this.getSiteData().getRootNavigationInfo(),s=!i.isEqual(t.routerDefinition,e.routerDefinition)||t.innerRoute!==e.innerRoute;(e.pageId&&this.getSiteData().getFocusedRootId()!==e.pageId||s)&&(this._site.isDuringTransition=!0)},endingPageTransition:function(){this._site.isDuringTransition=!1},setSiteScrollingEnabled:function(e){e?t("html").removeClass("disableSiteScroll"):t("html").addClass("disableSiteScroll")},enterFullScreenMode:function(i){"undefined"!=typeof window?(t("body").addClass("fullScreenMode"),i&&!i.scrollable||t("body").addClass("fullScreenMode-scrollable")):e.log.warn("SiteAPI.enterFullScreenMode should only be called from client specific code!")},exitFullScreenMode:function(){"undefined"!=typeof window?(t("body").removeClass("fullScreenMode"),t("body").removeClass("fullScreenMode-scrollable")):e.log.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!")},forceBackground:function(e){window.document.body.style.background=e},disableForcedBackground:function(){window.document.body.style.background=""},passClickEvent:function(e){this._site.clickHandler(e)},getRuntimeDal:function(){return this.getSiteDataAPI().runtime},hasPendingFonts:function(){return this.getSiteAspect("fontsLoaderAspect").hasPendingFonts()},getCurrentPopupId:function(){return this.getSiteData().getCurrentPopupId()},openPopupPage:function(e){this.getActionQueue().runImmediately(function(){this.navigateToPage({pageId:e},!0)}.bind(this))},closePopupPage:function(){this.getActionQueue().runImmediately(function(){this.navigateToPage(this.getSiteData().getRootNavigationInfo(),!0)}.bind(this))},isPopupOpened:function(){return this.getSiteData().isPopupOpened()},getSiteDataAPI:function(){return i.get(this,"_site.props.viewerPrivateServices.siteDataAPI")},getPointers:function(){return this._site.props.viewerPrivateServices.pointers},getDisplayedDAL:function(){return this._site.props.viewerPrivateServices.displayedDAL},getActiveModes:function(){return this.getSiteDataAPI().modes.getActiveModes()},updateActiveSOSPModes:function(e){return this.getSiteDataAPI().updateActiveSOSPModes(e)},getPrevRenderActiveModes:function(){return this._site.prevActiveModes},activateModeById:function(e,t,i){var s=this.getPointers(),n=s.components.getPage(t,this.getSiteData().getViewMode()),o=s.components.getComponent(e,n);this.activateMode(o,i)},activateMode:function(e,t){var s=this.getPointers(),n=s.components.getPageOfComponent(e);(function(e,t,s){for(;t;){if(i.get(s,[t.id,"isCurrentlyAnimating"]))return!0;t=e.components.getParent(t)}return!1})(s,e,this._site.getComponentsByPageId(n.id))||this.getSiteDataAPI().modes.activateMode(e,t)},deactivateModeById:function(e,t,i){this.getSiteDataAPI().modes.deactivateModeById(e,t,i)},deactivateMode:function(e,t){this.getSiteDataAPI().modes.deactivateMode(e,t)},resetRuntimeOverrides:function(e,t){this.getSiteDataAPI().resetRuntimeOverrides(e,t)},switchModesByIds:function(e,t,i,s){this.getSiteDataAPI().modes.switchModesByIds(e,t,i,s)},resetAllActiveModes:function(){this.getSiteDataAPI().modes.resetAllActiveModes()},setMobileView:function(e){var t=this.getSiteData();if(t.isMobileView()!==e){l.call(this,e),t.setMobileView(e),e||t.updateScreenSize();var i=t.getRootNavigationInfo();i.routerDefinition?this.getDynamicPageRealPageAndReloadLoadApps(i):this.getSiteAspect("WidgetAspect").restartApps()}},showSelectionSharer:function(e,t){this._site.refs.selectionSharer.show(e,t)},hideSelectionSharer:function(){this._site.refs.selectionSharer.isVisible()&&this._site.refs.selectionSharer.hide()},isSelectionSharerVisible:function(){return i.get(this._site,"refs.selectionSharer")&&this._site.refs.selectionSharer.isVisible()},getWixCodeAppApi:function(){return this._site.props.wixCodeAppApi},getControllerStageData:function(e,t,s){var n=p.call(this,e,t,s);if("default"===s)return n;var o=p.call(this,e,t,"default");return i.defaults({},n,o)},getControllerState:function(e){var t=this.getPointers().platform.getControllerStatePointer(e);return this.getDisplayedDAL().get(t)||"default"},getAppManifest:function(e){var t=this.getPointers().platform.getAppManifestPointer(e);return this.getDisplayedDAL().get(t)},getComponentByPageAndCompId:function(e,t){return this._site.getComponentByPageAndCompId(e,t)},getAspectGlobalData:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);return t.get(i)},getAspectComponentData:function(e,t){var i=this.getDisplayedDAL(),s=this.getPointers(),n=t?s.siteAspects.getAspectComponentData(e,t):s.siteAspects.getAspectAllComponentsData(e);return i.get(n)},getRenderFlag:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderFlag(e);return t.get(i)},isLoggedInToWix:function(){var t=this.getDisplayedDAL().getByPath(["requestModel","cookie"]);return e.wixUserApi.isSessionValid(t)},logoutFromWix:function(){var t=this.getSiteData();e.wixUserApi.logout(t),this.forceUpdate()},registerClientSpecMapUpdateCallback:function(e){if(i.isFunction(e)){var t=this.getDisplayedDAL(),s=u("ClientSpecMapUpdateCallbacks");if(t.isPathExist(s)){var n=t.getByPath(s);t.pushByPath(s,e,n.length)}else t.setByPath(s,[e])}},getSiteRootPosition:function(){return this._site.props.siteRootPosition},setClientSpecMap:function(e){var t=this.getDisplayedDAL(),s=this.getPointers().general.getClientSpecMap();t.set(s,e);var n=u("ClientSpecMapUpdateCallbacks");if(t.isPathExist(n)){var o=t.getByPath(n);o&&i.isArray(o)&&i.forEach(o,function(t){t(e)})}},getActionQueue:function(){var e=this.getSiteDataAPI();return e&&e.getActionQueue()},setQueueFlushStart:function(){this.getSiteData().relayoutBlockedByQueue=!0},setQueueFlushEnd:function(){this.getSiteData().relayoutBlockedByQueue=!1},setComponentRenderStart:function(e){this.getSiteData().renderingCompsMap.set(e,!1)},setComponentRenderEnd:function(e){this.getSiteData().renderingCompsMap.set(e,!0)},getMeshStyles:function(e,t){var i=this.getPointers(),s=this.getSiteData().getViewMode(),n=i.meshStyles.getMeshStylesPointer(e,s,t);return this.getDisplayedDAL().get(n)},clearMeshStyles:function(e,t){var i=this.getDisplayedDAL(),s=this.getPointers(),n=this.getSiteData().getViewMode(),o=s.meshStyles.getMeshStylesPointer(e,n,t);i.isExist(o)&&i.remove(o)},registerCompBehaviours:function(e,t,i){var s=this.getDisplayedDAL(),n=this.getPointers(),o=n.compBehaviours.getCompBehavioursMapPointer(),r=n.getInnerPointer(o,[e]),a=n.compBehaviours.getCompBehaviourPointer(e,t);s.isExist(r)||s.set(r,{}),s.set(a,i);var c=this.getSiteAspect("actionsAspect"),p=this.getSiteAspect("behaviorsAspect");c.registerBehaviors(t,e,i),p.setBehaviorsForActions(p.convertBehaviors(i,t),e,t)},unregisterCompBehaviours:function(e,t){var i=this.getDisplayedDAL(),s=this.getPointers().compBehaviours.getCompBehaviourPointer(e,t);i.isExist(s)&&i.remove(s);var n=this.getSiteAspect("actionsAspect"),o=this.getSiteAspect("behaviorsAspect");n.registerBehaviors(t,e,[]),o.setBehaviorsForActions([],e,t)},getCompBehaviours:function(){var e=this.getDisplayedDAL(),t=this.getPointers().compBehaviours.getCompBehavioursMapPointer();return e.get(t)},isDuringPostUpdatesOperations:function(e){return!!this.getSiteData().postUpdateOperationsRenders[e]},removePostUpdateOperationsRender:function(e){delete this.getSiteData().postUpdateOperationsRenders[e]},getLayoutMechanism:function(){return this.getSiteDataAPI().anchors.getLayoutMechanism()},didReact:function(){return this.getSiteData().reacted},resetSiteReacted:function(){this.getSiteData().reacted=!1},isExperimentOpen:function(e){return a.isOpen(e,this.getSiteData())},resetCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!1},getCustomClickOccurred:function(){return this.getSiteData().customClickOccurred},setCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!0},COMPONENTS_TO_KEEP_IN_STUB:f,getTPAComponentsOnPage:function(e){var t=this.getPointers(),s=t.components.getPage(e,this.getSiteData().getViewMode());if(s){var n=t.components.getChildrenRecursively(s);return i.reduce(n,function(e,s){var n=this.getDisplayedDAL().get(t.getInnerPointer(s,["componentType"]));return i.includes(f,n)&&e.push(s.id),e}.bind(this),[])}},hasControllersOnPage:function(){var t=this.getSiteData(),s=this.getPointers(),n=s.components.getPage(e.siteConstants.MASTER_PAGE_ID,this.getSiteData().getViewMode()),o=n?s.components.getChildrenRecursively(n):[],r=t.getPrimaryPageId(),a=s.components.getPage(r,this.getSiteData().getViewMode()),c=a?s.components.getChildrenRecursively(a):[];return i.some(c.concat(o),function(e){return"platform.components.AppController"===this.getDisplayedDAL().get(s.getInnerPointer(e,["componentType"]))}.bind(this))},reloadPage:function(){window.location.reload()},getCompsDataOnPage:function(e){var t=this,s=this.getPointers(),n=this.getDisplayedDAL(),o=s.components.getPage(e,this.getSiteData().getViewMode());if(o){var r=s.components.getChildrenRecursively(o);return i.map(r,function(o){var r=s.getInnerPointer(o,"dataQuery"),a=n.get(r),c=n.get(s.getInnerPointer(o,["componentType"])),p=t.getSiteData().getDataByQuery(a,e,t.getSiteData().dataTypes.DATA);return i.assign(p,{componentType:c,compId:o.id})})}},getComponentType:function(e){var t=this.getPageData().id,i=this.getPointers(),s=this.getDisplayedDAL(),n=i.components.getPage(t,this.getSiteData().getViewMode()),o=i.components.getComponent(e,n);return s.get(i.getInnerPointer(o,["componentType"]))},notifyOnRendered:function(){this._site.notifyAspects(this._site.supportedEvents.onRendered)}},c}),define("core/core/siteAspectsRegistry",["lodash","utils"],function(e,t){"use strict";var i={},s={};return t.sessionFreezer.freeze(i),t.sessionFreezer.freeze(s),{registerSiteAspect:function(e,t){i[e]=t},registerHostLibsAspect:function(e,t){s[e]=t},getAllAspectConstructors:function(){return i},getHostLibsAspectConstructor:function(e){return s[e]},getSiteAspectConstructor:function(e){return i[e]}}}),define("core/siteRender/SiteAspectsSiteAPI",["lodash","utils","core/siteRender/SiteAPI"],function(e,t,i){"use strict";function s(t){i.call(this,t,"Site Aspect"),e.bindAll(this,["getComponentById","getRootOfComponentId","getCurrentPage","getCurrentPopup","getAllRenderedRoots","getMasterPage","getPageById","getPageComponents","registerToMessage","registerToSiteReady","registerToScroll","registerToResize","registerToOrientationChange","registerToModeChange","registerToSlideChange","registerToComponentDidMount","registerToSiteWillMount","registerToSiteWillUpdate","registerToDidLayout","unRegisterFromDidLayout","registerToWillUnmount","registerToUrlPageChange","registerToOnRendered","registerToRenderedRootsChange","registerToAddedRenderedRootsDidLayout","registerToKeyDown","registerToWindowTouchEvent","registerToFocusEvents","registerToVisibilityChange","registerToDocumentClick","registerToSvSessionChange","registerToSiteMetadataChange","getSiteAPI","getSiteContainer","scrollSiteBy","scrollSiteTo","getWindowSize","getDocumentSize","getSiteScroll","getCurrentPopupScroll","getBrowserFlags","getVisibilityState","setSiteRootHiddenState","notifyAspects","registerToFakeModeChange"])}return s.prototype=e.create(i.prototype,{constructor:s}),s.prototype.getComponentById=function(e,t){var i=null,s=t||this.getRootOfComponentId(e);return s&&(i=this._site.getComponentByPageAndCompId(s,e)),i||(i=this._site.getAspectsContainer().refs[e]||this._site.getAspectsContainer().refs.aspectPortal.refs[e]),i||"SITE_BACKGROUND"!==e&&"WIX_ADS"!==e||(i=this._site.compRefs[e]),i||null},s.prototype.getRootOfComponentId=function(t){var i=this._site.getPageOfComp(t),s=i&&i.props.rootId;if(s)return s;var n=this._site.getMasterPage();return e.forEach(this._site.getPageRefs(n),function(e,i){if(this._site.getComponentByPageAndCompId(i,t))return s=i,!1}.bind(this)),s||null},s.prototype.getCurrentPage=function(){return this._site.getPrimaryPage()},s.prototype.getCurrentPopup=function(){return this._site.getCurrentPopup()},s.prototype.getAllRenderedRoots=function(){return e.map(this.getAllRenderedRootIds,this.getPageById.bind(this))},s.prototype.getMasterPage=function(){return this._site.getMasterPage()},s.prototype.getPageById=function(e){return this._site.getPageById(e)},s.prototype.getPageComponents=function(e){return this._site.getComponentsByPageId(e)},s.prototype.getComponentByPageAndCompId=function(e,t){return this._site.getComponentByPageAndCompId(e,t)},s.prototype.registerToMessage=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.message,e)},s.prototype.registerToSiteReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,e)},s.prototype.registerToScroll=function(e){var t=this.getSiteAPI().getSiteData();this._site.registerAspectToEvent(this._site.supportedEvents.scroll,function(){var i=window.document.body.scrollHeight>window.innerHeight,s={x:window.pageXOffset||(t.isMobileView()?window.document.scrollLeft:window.document.body.scrollLeft),y:window.pageYOffset||(t.isMobileView()?window.document.scrollTop:window.document.body.scrollTop),progressY:i?window.scrollY/(window.document.body.scrollHeight-window.innerHeight-1):0};e(s)})},s.prototype.registerToResize=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.resize,e)},s.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},s.prototype.registerToModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,e)},s.prototype.registerToSlideChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.slideChange,e)},s.prototype.registerToComponentDidMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.mount,e)},s.prototype.registerToSiteWillMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willMount,e)},s.prototype.registerToSiteWillUpdate=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willUpdate,e)},s.prototype.registerToDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,e)},s.prototype.unRegisterFromDidLayout=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,e)},s.prototype.registerToWillUnmount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,e)},s.prototype.registerToUrlPageChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.urlPageChange,e)},s.prototype.registerToOnRendered=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.onRendered,e)},s.prototype.registerToRenderedRootsChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.renderedRootsChanged,e)},s.prototype.registerToAddedRenderedRootsDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.addedRenderedRootsDidLayout,e)},s.prototype.registerToKeyDown=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,e)},s.prototype.registerToKeyUp=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keyup,e)},s.prototype.registerToWindowTouchEvent=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e.toLowerCase()],t)},s.prototype.registerToFocusEvents=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e],t)},s.prototype.registerToVisibilityChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,e)},s.prototype.registerToDocumentClick=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.click,e)},s.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},s.prototype.registerToFakeModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.fakeModeChange,e)},s.prototype.registerToSvSessionChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.svSessionChange,e)},s.prototype.registerToSiteMetadataChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteMetadataChange,e)},s.prototype.registerToAspectsReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.aspectsReady,e)},s.prototype.unregisterFromAspectsReady=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.aspectsReady,e)},s.prototype.getSiteAPI=function(){return this._site.siteAPI},s.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()},s.prototype.scrollSiteBy=function(i,s,n){this.getSiteContainer().scrollBy(i,s),e.isFunction(n)&&t.animationFrame.request(n)},s.prototype.scrollSiteTo=function(e,t){this.getSiteContainer().scrollTo(e,t)},s.prototype.getWindowSize=function(){var e=this.getSiteContainer();return{height:e.innerHeight,width:e.innerWidth}},s.prototype.getDocumentSize=function(){return{height:window.document.documentElement.clientHeight||window.document.body.clientHeight,width:window.document.documentElement.clientWidth||window.document.body.clientWidth}},s.prototype.getSiteScroll=function(){var e=this.getSiteContainer()||{};return{x:e.pageXOffset||e.scrollX||0,y:e.pageYOffset||e.scrollY||0}},s.prototype.getCurrentPopupScroll=function(){var t=window.document.getElementById("POPUPS_ROOT");return{x:e.get(t,"scrollLeft",0),y:e.get(t,"scrollTop",0)}},s.prototype.getBrowserFlags=function(){return this.getSiteAPI().getSiteData().browserFlags()},s.prototype.getVisibilityState=function(){return{hidden:"undefined"!=typeof document&&window.document.hidden}},s.prototype.setSiteRootHiddenState=function(e,t){this._site.setState({siteRootHidden:e},t)},s.prototype.notifyAspects=function(e){this._site.notifyAspects(e)},s.prototype.updateAspectGlobalData=function(t,i){var s=this.getDisplayedDAL(),n=this.getPointers().siteAspects.getAspectGlobalData(t),o=s.get(n)||{};s.set(n,e.assign(o,i))},s.prototype.setAspectGlobalData=function(e,t){var i=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectGlobalData(e);i.set(s,t)},s.prototype.removeAspectGlobalData=function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);t.isExist(i)&&t.remove(i)},s.prototype.updateAspectComponentData=function(t,i,s){var n=this.getDisplayedDAL(),o=this.getPointers().siteAspects.getAspectComponentData(t,i),r=n.get(o)||{},a=e.assign({},r,s);e.isEqual(r,a)||n.set(o,a)},s.prototype.setAspectComponentData=function(e,t,i){var s=this.getDisplayedDAL(),n=this.getPointers().siteAspects.getAspectComponentData(e,t);s.set(n,i)},s}),define("core/siteRender/siteAspectsMixin",["lodash","zepto","core/core/siteAspectsRegistry","core/siteRender/SiteAspectsSiteAPI","utils","coreUtils"],function(e,t,i,s,n,o){"use strict";function r(t,i,s){return o.renderUtils.mapInAlphabeticalOrder(t,function(t){var n=t[i];return e.isFunction(n)&&n.apply(t,s)||l})}function a(){var t=this.siteAPI.getRootIdsWhichShouldBeRendered();if(!e.isEqual(t,this._previoslyRenderedRoots)){var i=e.difference(this._previoslyRenderedRoots,t),s=e.difference(t,this._previoslyRenderedRoots);this._rootsAddedAndNotYetLayouted=e(this._rootsAddedAndNotYetLayouted).concat(s).difference(i).uniq().value(),this._previoslyRenderedRoots=e.clone(t),this.notifyAspects(d.renderedRootsChanged,s,i)}}function c(){var t=this.siteAPI.getSiteData().getRootNavigationInfo(),i=this._previoslyNavigationInfo;if(!e.isEqual(t,i)){if(o.dynamicPagesUtils.isSamePageNavigation(t,i)&&o.dynamicPagesUtils.isInnerRouteChanged(t,i)){this.siteAPI.getSiteAspect("actionsAspect").handlePagePageNavigationCanceled(),this.notifyAspects(g.urlPageChange)}this._previoslyNavigationInfo=t}}function p(){var t=this.siteAPI.getSiteData().isClientAfterSSR();if(e.forEach(i.getAllAspectConstructors(),function(i,s){this.siteAspects[s]||(this.props.viewerPrivateServices.displayedDAL.setByPath(["siteAspectsData",s],{globalData:void 0,dataByCompId:{}}),this.siteAspects[s]=new i(this._aspectsSiteAPI),t&&e.invoke(this.siteAspects[s],"applySsrChanges"))}.bind(this)),!this.siteAspects.WidgetAspect){var s=new(i.getHostLibsAspectConstructor("WidgetAspect"))(this.props.temporaryWidgetAspectStorage,this.props.eventsManager);s.init(this._aspectsSiteAPI),this.siteAspects.WidgetAspect=s}this.notifyAspects(this.supportedEvents.aspectsReady)}var l=[],d={mount:"mount",unmount:"unmount",urlPageChange:"urlPageChange",renderedRootsChanged:"renderedRootsChanged",addedRenderedRootsDidLayout:"addedRenderedRootsDidLayout",modeChange:"modeChange",fakeModeChange:"fakeModeChange",slideChange:"slideChange",didLayout:"didLayout",siteReady:"siteReady",willMount:"willMount",willUpdate:"willUpdate",aspectsReady:"aspectsReady",viewportChange:"viewportChange",svSessionChange:"svSessionChange",siteMetadataChange:"siteMetadataChange",onRendered:"onRendered"},u={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",keyup:"keyup",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"},h={visibilitychange:"visibilitychange",click:"click"},g=e.assign(e.clone(d),u,h);Object.freeze(g);var f={didLayout:function(){if(!e.isEmpty(this._rootsAddedAndNotYetLayouted)){var t=this._rootsAddedAndNotYetLayouted;this._rootsAddedAndNotYetLayouted=[],this.notifyAspects(d.addedRenderedRootsDidLayout,t)}}};return{supportedEvents:g,getAllSiteAspects:function(){return p.call(this),this.siteAspects},getInitialState:function(){return this._aspectsSiteAPI=new s(this),this.props.viewerPrivateServices.siteAspectsSiteAPI&&this.props.viewerPrivateServices.siteAspectsSiteAPI.setSite(this),this.siteAspects=this.props.viewerPrivateServices.siteAspects||{},this._listenersOnWindow=[],this._listenersOnDocument=[],this._previoslyRenderedRoots=[],this._previoslyNavigationInfo={},this._rootsAddedAndNotYetLayouted=[],{}},componentWillMount:function(){p.call(this);this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},componentWillUpdate:function(){p.call(this);this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectComponentDescriptions:function(){return e.flattenDeep(r(this.siteAspects,"getComponentsToRender",[this._aspectsSiteAPI]))},getAspectsComponentStructures:function(){var t=e.flattenDeep(r(this.siteAspects,"getComponentStructures")),i=e.map(this.getAspectComponentDescriptions(),"structure");return t.concat(i)},componentDidMount:function(){var i=t(window),s=t(window.document);e.forEach(u,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnWindow.push(t),i.on(e,t.listener)}.bind(this)),e.forEach(h,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnDocument.push(t),s.on(e,t.listener)}.bind(this));var n={eventName:u.orientationchange,listener:function(){this.notifyAspects("orientationchange"),this.timeout=window.setTimeout(this.notifyAspects.bind(this,u.resize),300)}.bind(this)};this._listenersOnWindow.push(n),i.on(n.eventName,n.listener),this.notifyAspects("mount"),a.call(this),c.call(this)},componentDidUpdate:function(){a.call(this),c.call(this)},componentWillUnmount:function(){var i=t(window),s=t(window.document);e.forEach(this._listenersOnWindow,function(e){i.off(e.eventName,e.listener)}),e.forEach(this._listenersOnDocument,function(e){s.off(e.eventName,e.listener)}),window.clearTimeout(this.timeout),this._aspectsSiteAPI.onSiteUnmount(),this.notifyAspects("unmount")},notifyAspects:function(t){for(var i,s=arguments.length,n=Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];e.has(f,t)&&f[t].apply(this,e.tail(arguments)),(i=this.props.eventsManager).emit.apply(i,[t].concat(_toConsumableArray(n)))},registerAspectToEvent:function(e,t){e===d.siteReady&&this.siteIsReady?t():g[e]?this.props.eventsManager.on(e,t):n.log.error("this event isn't supported by site "+e)},unregisterAspectFromEvent:function(e,t){this.props.eventsManager.off(e,t)}}}),define("core/siteRender/aspectComponentsPortal",["santaComponents","lodash","prop-types","create-react-class","mobx-react","santaProps","compUtils"],function(e,t,i,s,n,o,r){"use strict";return n.observer(s({propTypes:{siteAPI:i.object,loadedStyles:i.object,compDescriptions:i.arrayOf(i.shape({structure:i.object,props:i.object}))},displayName:"AspectSantaCompsPortal",render:function(){var i=t.map(this.props.compDescriptions,function(e){var i=r.compFactory.getCompReactClass(e.structure.componentType),s=r.compFactory.getCompClass(e.structure.componentType,!0),n=o.componentPropsBuilder.getCompProps(i,e.structure,this.props.siteAPI,e.pageId,null,e.props);return t.assign(n,e.props,{key:n.key||e.structure.id,ref:e.structure.id}),s(n)}.bind(this));return e.utils.createReactElement("div",{},i)}}))}),define("core/components/siteAspects/scriptClass",["santaComponents","create-react-class","reactDOM"],function(e,t,i){"use strict";return t({displayName:"scriptClass",loaded:!1,componentDidMount:function(){var e=this.props.scriptData,t=function(e){return window.loadedScripts&&window.loadedScripts[e.NAME]}(e.script),s=void 0,n=void 0,o=void 0;t&&!this.loaded?this.fireCallbacks(e,!0):(o=this,t=window.document.createElement("script"),s=function(){o.fireCallbacks(e,!1),o.loaded=!0,t.removeEventListener("load",s)},t.addEventListener("load",s),t.src=e.script.SRC,(n=i.findDOMNode(this)).replaceChild(t,n.children[0]))},fireCallbacks:function(e,t){e.callbacks.forEach(function(e){var i=e.context;i?e.callback.call(i,{fromCache:t}):e.callback({fromCache:t})}),e.callbacks.length=0},render:function(){var t=this.props.scriptData.script,i="script-"+t.NAME;return e.utils.createReactElement("div",null,e.utils.createReactElement("script",{id:i,src:t.SRC}),e.utils.createReactElement("script",{dangerouslySetInnerHTML:{__html:function(e){return'window.loadedScripts = window.loadedScripts || {}; window.loadedScripts["'+e.NAME+'"] = true;'}(t)}}))}})}),define("core/components/siteAspects/externalScriptLoaderAspect/externalScriptContainer",["santaComponents","core/core/createReactElement","lodash","create-react-class","mobx-react","core/components/siteAspects/scriptClass"],function(e,t,i,s,n,o){"use strict";return n.observer(s({displayName:"externalScriptContainer",getScriptComponents:function(){var e=this.props.siteAPI.getAspectGlobalData("externalScriptLoader");return i.map(e,function(e,i){return t(o,{key:i,ref:i,scriptData:e})})},render:function(){return e.utils.createReactElement("div",null,this.getScriptComponents())}}))}),define("core/components/siteAspects/externalScriptLoaderAspect/getIframeReactComponent",["santaComponents"],function(e){"use strict";return function(t){var i=e.utils.createReactElement("iframe",{src:t,id:"checkoutPageIFrame",style:{width:"900px",height:"600px",top:"50%",left:"50%",marginLeft:"-450px",marginTop:"-300px",position:"absolute"}});return e.utils.createReactElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}},i)}}),define("core/components/siteAspects/externalScriptLoaderAspect/ecomCheckoutAspectContainer",["lodash","prop-types","create-react-class","mobx-react","core/components/siteAspects/externalScriptLoaderAspect/getIframeReactComponent"],function(e,t,i,s,n){"use strict";return s.observer(i({displayName:"ecomCheckoutAspectContrainer",propTypes:{siteAPI:t.shape({getAspectGlobalData:t.func.isRequired})},render:function(){var t=this.props.siteAPI.getAspectGlobalData("ecomCheckout");if(e.get(t,["modalOpened"])){var i=e.get(t,["src"]);return n(i)}return null}}))}),define("core/siteRender/siteAspectsDomContainer",["santaComponents","core/core/createReactElement","lodash","react","prop-types","create-react-class","mobx","mobx-react","core/siteRender/aspectComponentsPortal","core/components/siteAspects/externalScriptLoaderAspect/externalScriptContainer","core/components/siteAspects/externalScriptLoaderAspect/ecomCheckoutAspectContainer"],function(e,t,i,s,n,o,r,a,c,p,l){"use strict";var d=s.createFactory(c),u=a.observer(o({propTypes:{siteAPI:n.shape({getSiteAspect:n.func.isRequired}).isRequired},render:function(){var e=this.props.siteAPI.getSiteAspect("fontsLoaderAspect"),s=i.invoke(e,"getReactComponents");return t("div",null,s)}}));return a.observer(o({displayName:"siteAspectsDomContainer",propTypes:{loadedStyles:n.object,siteAPI:n.object,getAspectComponentDescriptions:n.func},componentWillMount:function(){this.computedAspectComponentsDesc=r.computed(function(){return this.props.getAspectComponentDescriptions()},{name:"computedAspectComponentsDesc",context:this}),this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentWillUpdate:function(){this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentDidMount:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentDidUpdate:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentWillUnmount:function(){this.props.siteAPI.cancelReLayoutPending(this.constructor.displayName)},render:function(){var s={};this.props.isMobileView&&i.assign(s,{width:this.props.siteWidth});var n=[d({key:"aspectPortal",ref:"aspectPortal",siteAPI:this.props.siteAPI,loadedStyles:this.props.loadedStyles,compDescriptions:this.computedAspectComponentsDesc.get()}),t(p,{siteAPI:this.props.siteAPI,key:"externalScriptContainer"}),t(l,{siteAPI:this.props.siteAPI,key:"ecomCheckoutAspectContrainer"}),t(u,{key:"aspectContainer",siteAPI:this.props.siteAPI})];return e.utils.createReactElement("div",{className:"siteAspectsContainer",style:s},n)}}))}),define("core/siteRender/extraSiteHeight",["santaComponents","prop-types","create-react-class","mobx-react"],function(e,t,i,s){"use strict";return s.observer(i({displayName:"extraSiteHeight",propTypes:{siteAPI:t.object.isRequired},render:function(){var t=this.props.siteAPI.getSiteData();return 0===this.props.siteAPI.getRenderFlag("extraSiteHeight")||t.isMobileView()?null:e.utils.createReactElement("div",{style:{height:this.props.siteAPI.getRenderFlag("extraSiteHeight"),position:"relative"}})}}))}),define("core/siteRender/blockingLayer",["santaComponents","lodash","prop-types","create-react-class","mobx-react"],function(e,t,i,s,n){"use strict";var o=Math.pow(2,31)-2;return n.observer(s({displayName:"blockingLayer",propTypes:{siteAPI:i.object.isRequired,layerName:i.string.isRequired},getStyle:function(){var e=this.props.siteAPI.getRenderFlag(this.props.layerName);return t.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:o},e)},render:function(){return this.props.siteAPI.getRenderFlag(this.props.layerName)?e.utils.createReactElement("div",{style:this.getStyle()}):null}}))}),define("core/siteRender/wixAdsRenderer",["prop-types","create-react-class","mobx","mobx-react","coreUtils","experiment"],function(e,t,i,s,n,o){"use strict";var r=void 0;return s.observer(t({displayName:"wixAdsRenderer",propTypes:{siteAPI:e.object.isRequired},componentWillMount:function(){var e=this.props.siteAPI.getSiteData(),t=this.props.siteAPI;this.disposeReaction=i.reaction(function(){return{isHeaderFixedPosition:n.siteDataUtils.isHeaderFixedPosition(e),isPortrait:e.isPortrait,isWixAdsAllowed:n.siteDataUtils.isWixAdsAllowed(e),screenSize:e.getScreenSize()}},function(){t.registerReLayoutPending(n.constants.COMP_IDS.WIX_ADS),t.reLayoutIfPending()},{context:this,name:"WixADS_measure_change"})},componentWillUnmount:function(){this._isMounted=!1,this.disposeReaction()},componentDidMount:function(){var e=this;this._isMounted=!0;var t=this;this.shouldShowWixAds()&&requirejs(["wixFreemiumBanner"],function(i){r=i,t._isMounted&&e.forceUpdate()})},shouldShowWixAds:function(){return this.props.siteAPI.getSiteData().shouldShowWixAds()},render:function(){var e=this.props.siteAPI.getSiteData(),t=e.isMobileView(),i="preview"===e.viewMode,s=n.constants.COMP_IDS.WIX_ADS,a=n.siteDataUtils.isWixAdsAllowed(e),c=n.siteDataUtils.isHeaderFixedPosition(e),p=e.getUserLanguage(),l=e.getMetaSiteId();return this.shouldShowWixAds()&&r?o.isOpen("displayWixAdsNewVersion",e)?r.banner2(s,t,i,a,p,l):r.banner(s,t,i,a,p,l,c):null}}))}),define("core/bi/events.json",[],function(){return{SITE_MEMBER_LOGIN_SUCCESS:{eventId:520,adapter:"hed",params:{c1:"userName"}},PAGE_PERFORMANCE_DATA:{eventId:350,adapter:"ugc-viewer",params:{c1:"preClient",c2:"client",c3:"santaVersion",i1:"timeoutSeconds",is_premium:"isPremium",is_wixsite:"isWixSite",dns_time:"dnsTime",response_time:"responseTime",experiment:"experiment",page_id:"pageId"},sampleRatio:1},LOAD_IMAGES_DATA:{eventId:341,adapter:"mlt",params:{c1:"imagePerf"}},LP_BUTTON_CLICK:{eventId:352,adapter:"ugc-viewer",params:{postSignUp:"postSignUp",postLogin:"postLogin",target_url:"targetUrl",button_name:"buttonName",active_fold:"activeFold",total_folds:"totalFolds",text:"text",component_id:"componentId",loginCompName:"loginCompName"},wixSiteSampleRatio:0},IMAGES_DOWNLOAD:{eventId:353,adapter:"ugc-viewer",params:{imagePerf:"imagePerf",kbps:"kbps",ttfb:"ttfb"}},MONOTYPE_FONTS_USED_ON_SITE:{eventId:355,adapter:"ugc-viewer",params:{}},USER_INTERACTION:{eventId:368,adapter:"ugc-viewer",params:{type:"type",time:"time"}},UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}},CLICK_TO_ACTION:{eventId:372,adapter:"ugc-viewer",params:{data:"data",field_type:"field_type",input_type:"input_type"}},SITE_MEMBER_OPEN_LOGIN_OR_SIGNUP_DIALOGS:{eventId:601,adapter:"site-members",src:5,params:{action:"action",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_EXIT_DIALOG:{eventId:602,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_SUBMIT_BUTTON:{eventId:603,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_CLICKED_FORGOT_PASSWORD:{eventId:604,adapter:"site-members",src:5,params:{visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_AUTH_DIALOG_OPENED:{eventId:607,adapter:"site-members",src:5,params:{context:"context",app_id:"app_id",initator:"initator",visitor_id:"visitor_id",has_social:"has_social"}},SITE_MEMBER_NOTIFICATION_OPEN:{eventId:608,adapter:"site-members",src:5,params:{notification_name:"notification_name",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_CLICK_LINK:{eventId:609,adapter:"site-members",src:5,params:{context:"context",name:"name",visitor_id:"visitor_id"},sampleRatio:1},CDN_PERFORMANCE:{eventId:379,adapter:"ugc-viewer",params:{small_name:"smallName",small_dns_time:"smallDnsTime",small_connect_time:"smallConnectTime",small_ttfb:"smallTtfb",small_response_time:"smallResponseTime",small_kbps:"smallKbps",large_name:"largeName",large_dns_time:"largeDnsTime",large_connect_time:"largeConnectTime",large_ttfb:"largeTtfb",large_response_time:"largeResponseTime",large_kbps:"largeKbps"}},VECTOR_ART_VIEWER_FIXER:{eventId:322,adapter:"ugc-viewer",params:{}},PAGE_COMP_TYPES_LIST:{eventId:390,adapter:"ugc-viewer",params:{first_page:"firstPage",comp_list:"compList"}}}}),define("core/bi/events",["core/bi/events.json","lodash","loggingUtils"],function(e,t,i){"use strict";return i.logger.register("core","event",e),e}),define("core/core/siteBI",["lodash","zepto","utils","core/bi/events"],function(e,t,i,s){"use strict";function n(t,i){function n(e,t){return"number"!=typeof t?t:t?t-e:void 0}if(!(P<i)){"lastTimeStamp"in t.wixBiSession&&(P=i);var o=t.isPremiumDomain(),r="WixSite"===t.rendererModel.siteInfo.documentType,p=e.assign({},S,{initialTimestamp:t.wixBiSession.initialTimestamp});p=e.mapValues(p,n.bind(null,p.navigationStart||p.initialTimestamp));var l=e.omitBy(t.wixBiSession,function(e,t){return"number"!=typeof e||"et"===t});if(A.getEntries){var d=A.getEntries().filter(function(e){return-1!==e.name.search(/.min.js$/)});if(d.length){var u=S.navigationStart||0,h=e.find(d,function(t){return e.includes(t.name,"skins")});h&&(l.skinsStart=Math.round(u+h.startTime),l.skinsEnd=Math.round(l.skinsStart+h.duration)),l.packagesEnd=0,d.forEach(function(e){l.packagesEnd=Math.max(l.packagesEnd,e.startTime+e.duration)}),l.packagesEnd=Math.round(u+l.packagesEnd)}}l=e.mapValues(l,n.bind(null,l.initialTimestamp||0));var g=t.santaBase.match(/([\d\.]+)\/?$/);g=g&&g[1]||"unknown";var f={isPremium:o?1:0,isWixSite:r?1:0,preClient:JSON.stringify(p),client:JSON.stringify(l),santaVersion:g,timeoutSeconds:i,experiment:function(t){var i=t.rendererModel||t.editorModel||{};return e.reduce(i.runningExperiments,function(e,t,i){var s=c.indexOf(i);return-1===s?e:e+Math.pow(2,s)},0)}(t),pageId:t.getCurrentUrlPageId()},m=p.domainLookupEnd-p.domainLookupStart;isNaN(m)||(f.dnsTime=m);var y=p.responseEnd-p.connectStart;isNaN(y)||(f.responseTime=y),t.wixBiSession.viewerSessionId&&a.reportBI(t,s.PAGE_PERFORMANCE_DATA,f)}}function o(t){function i(e){return"_"+e+"k"}function n(t){var s=o.map(i).concat([r]);return e.zipObject(s,e.times(s.length,t))}var o=[100,200,300,400,500,1e3,2e3,3e3],r="_over"+e.last(o)+"k",c=e(window.document.getElementsByTagName("img")).filter(function(t){return e.startsWith(t.src,window.serviceTopology.staticMediaUrl)}).reduce(function(t,s){if(s.complete){var n=function(t,i){var s={url:t.src,hadError:!1,width:t.width,height:t.height,size:t.width*t.height},n=i?i.startTime:0,o=i?i.duration:0;return e.defaults(s,{hadError:!i,start:Math.round(n),end:Math.round(n+o),speed:Math.round(s.size/(o+.01)*100)/100}),s}(s,A.getEntriesByName(s.src)[0]);if(n.hadError)t.errors++;else{var a=function(t){var s=e.findLastIndex(o,function(e){return 1e3*e<t.size})+1;return s<o.length?i(o[s]):r}(n);t.imagesBySize[a]++,t.imagesSamples[a].length<y&&t.imagesSamples[a].push(n)}}else t.loading++;return t},{loading:0,imagesBySize:n(e.constant(0)),imagesSamples:n(function(){return[]}),errors:0});a.reportBI(t,s.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(c)})}function r(t){function n(t){var i=function(e){var t=e.name.replace(o,""),i=t.match(/\.([^/]+).+w_(\d+),h_(\d+),/);if(i){var s=Number(i[2]),n=Number(i[3]);return{url:t,format:i[1],width:s,height:n,size:s*n}}return{}}(t),s={start:Math.round(t.startTime),end:Math.round(t.startTime+t.duration),ttfb:Math.round(t.responseStart-t.requestStart),dns:Math.round(t.domainLookupEnd-t.domainLookupStart),ssl:t.secureConnectionStart?Math.round(t.connectEnd-t.secureConnectionStart):0,speed:t.duration>0?Math.round(i.size/t.duration):0,fileSize:t.fileSize,kbps:t.duration>0?Math.round(1e3*t.fileSize/t.duration):0};return e.assign({},i,s)}var o=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing",r=e(A.getEntriesByType("resource")).toArray().filter(function(t){return t.duration>p&&e.startsWith(t.name,o)}).value().map(function(t){return new Promise(function(s){function n(i){s(e.assign(t,{fileSize:Math.round(i/1024)}))}var o=t.transferSize||t.encodedBodySize;o?n(o):i.ajaxLibrary.ajax({type:"HEAD",url:t.name,success:function(e,t,i){n(i.getResponseHeader("Content-Length")||0)},error:function(){n(0)}})})});Promise.all(r).then(function(i){var o=e(i).filter(function(e){return e.fileSize>d}).sortBy("fileSize").takeRight(v).map(n).filter(function(e){return e.kbps<=l}).value();if(o.length){var r=e.reduce(o,function(e,t){return{size:e.size+t.fileSize,duration:e.duration+t.end-t.start,ttfb:e.ttfb+t.ttfb}},{size:0,duration:0,ttfb:0});a.reportBI(t,s.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(o),kbps:Math.round(1e3*r.size/r.duration),ttfb:Math.round(r.ttfb/o.length)})}},e.noop)}var a=i.logger,c=["useHttps"],p=25,l=9216,d=5,u=2,h=44,g=11;if("undefined"==typeof window)return{init:e.noop,send:e.noop};var f=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited"),m=[5,15,30],y=3,v=10,A=window.performance||{},S=A.timing;S=e.pick(S,["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"]);var P=void 0,I=e.now();return{init:function(i){f||(a.shouldSendReport(i,s.USER_INTERACTION)&&setTimeout(function(){!function(i){if(t){var n=function(o){t(window).off(".bi"),n=e.noop,a.reportBI(i,s.USER_INTERACTION,{type:o})},o=0,r=0,c=0;t(window).on({"keydown.bi":function(){++o>u&&n("key")},"mousemove.bi":function(){++r>h&&n("mouse")},"scroll.bi":function(){++c>g&&n("scroll")}})}}(i)},300),a.shouldSendReport(i)&&(P=1/0,I=e.now(),e.forEach(m,function(e){setTimeout(n.bind(null,i,e),1e3*e)}),A.getEntriesByName&&setTimeout(function(){o(i),r(i)},10500)))},send:function(t){f||a.shouldSendReport(t,s.PAGE_PERFORMANCE_DATA)&&setTimeout(function(){n(t,Math.round((e.now()-I)/1e3))},300)}}}),define("core/siteRender/WixPopupRoot",["santaComponents","lodash","react","create-react-class","reactDOM","santaProps","core/siteRender/WixPageReact","core/siteRender/blockingLayer"],function(e,t,i,s,n,o,r,a){"use strict";var c=i.createFactory(r),p=i.createFactory(a);return s({displayName:"WixPopupRoot",getInitialState:function(){return{activePopupId:this.props.currentPopupId,activePopupKey:1,animating:!1}},shouldComponentUpdate:function(e,i){if(!e.currentPopupId&&this.state.activePopupId&&!this.state.animating){var s=this.props.siteAPI.getSiteAspect("actionsAspect"),n=t.keys(this.refs[this.state.activePopupId].refs);this.setState({animating:!0});var o=!1;return s.registerComponentsExit(n,function(){e.currentPopupId||this.setState({activePopupId:null,animating:!1}),s.handleNavigationComplete(),o=!0}.bind(this)),o}return!(i.animating&&!e.currentPopupId)},componentWillReceiveProps:function(e){e.currentPopupId!==this.state.activePopupId&&this.setState({activePopupId:e.currentPopupId,activePopupKey:(this.state.activePopupKey||0)+1,animating:!1})},componentDidUpdate:function(){var e=this.state.activePopupId;e&&function(e){return"preview"===e.getRenderFlag("componentViewMode")}(this.props.siteAPI)&&this.props.siteAPI.getRuntimeDal().markPopupAsBeenOpened(e)},render:function(){var t=this.props.siteData,i=this.state.activePopupId,s=t.isMobileView();if(i){var n=o.componentPropsBuilder.getRootProps(r,this.props.currentPopupId,this.props.siteAPI,this.props.viewerPrivateServices,this.props.measureMap);n.mobxObserverWrapperProps=this.props.mobxObserverWrapperProps,n.key=this.state.activePopupKey+(s?"_mobile":"_desktop");var a=[c(n),p({siteAPI:this.props.siteAPI,layerName:"blockingPopupLayer"})],l=t.getSiteWidth(),d=e.utils.createReactElement("div",{id:"POPUPS_WRAPPER",className:"POPUPS_WRAPPER",key:"POPUPS_WRAPPER",style:{minWidth:l,minHeight:t.getScreenHeight(),margin:"0 auto",width:s?l:"auto"},children:a});return e.utils.createReactElement("div",{id:"POPUPS_ROOT",className:s?"POPUPS_ROOT mobile":"POPUPS_ROOT",key:"POPUPS_ROOT",style:{overflow:this.props.siteAPI.getRenderFlag("allowSiteOverflow")?null:"hidden"},children:[d]})}return null},componentDidMount:function(){var e=n.findDOMNode(this);e&&e.focus()}})}),define("core/siteRender/siteClickHandler",["lodash","zepto","coreUtils","core/bi/events.json"],function(e,t,i,s){"use strict";function n(t,s){var n=function(e,t,s){var n=e.attr("data-no-physical-url")||t;return i.wixUrlParser.parseUrl(s,n)}(t,s,this.props.siteData);if(!n||"_blank"===t.attr("target"))return!1;!function(t,i){e.assign(t,{pageItemAdditionalData:i.attr("data-page-item-context"),anchorData:i.attr("data-anchor")})}(n,t);var o=function(e){return!e.attr("data-no-physical-url")}(t),r=function(e){return!!e.attr("data-keep-roots")}(t),a=this.siteAPI.getSiteData().getPrimaryPageId();return!!(this.siteAPI.getCustomClickOccurred()&&n&&n.pageId&&n.pageId!==a)||(this.handleNavigation(n,s,o,r),!0)}function o(e){var o="a"===e.target.tagName.toLowerCase()?t(e.target):t(e.target).parents("a"),r=o[0],a=o.attr("href")||r&&r.href;!function(e,t){t.attr("data-type")&&e.reportBI(s.CLICK_TO_ACTION,{field_type:t.attr("data-type"),data:t.attr("data-content"),input_type:t.attr("data-auto-recognition")?"auto_recognized":"user_input"})}(this.siteAPI,o),function(e,t){if(e.attr("data-mobile")){var s=i.stringUtils.isTrue(e.attr("data-mobile"));t.setMobileView(s),i.mobileViewportFixer.fixViewportTag(t.getSiteData())}}(o,this.siteAPI);var c=function(e,t,s){var n=this.props.siteData,o=i.linkRenderer.isExternalLink(n,s),r=i.linkRenderer.isEmailLink(s),a="_self"===t.attr("target"),c=this.siteAPI.getRenderRealtimeConfigItem("previewTooltipCallback");if(!this.siteAPI.getRenderFlag("isExternalNavigationAllowed")&&c&&(o&&a||r))return c(e.target.getBoundingClientRect(),"text_editor_inactive_link_on_preview"),!0;return!!(this.siteAPI.getCustomClickOccurred()&&o&&a)}.call(this,e,o,a);return c||(c=n.call(this,o,a)),this.siteAPI.isSelectionSharerVisible()&&this.siteAPI.hideSelectionSharer(),this.siteAPI.resetCustomClickOccurred(),!c||function(e){return e.stopPropagation(),e.preventDefault(),!1}(e)}return{clickHandler:o}}),define("core/siteRender/siteTraversalMixin",["lodash"],function(e){"use strict";function t(t){if(t){var i=t.props.id;return e.get(t,["compRefs",i,"props","pageStub"])}}function i(e,i){return!t(e[i])}function s(i){return e(i).omit("").pickBy(function(e){return!t(e)}).keys().value()}function n(){var t=this.getMasterPage();if(!t)return[];var n=this.props.siteData,r=o(t);if(!r)return[];var a=function(t){return e.get(t,["refs","popupRoot","refs"],{})}(this),c=n.getPrimaryPageId(),p=n.getCurrentPopupId();return!i(r,c)||p&&!i(a,p)?e.flatten(["masterPage",s(r),s(a)]):e.compact(["masterPage",c,p])}function o(t){return e.get(t,["compRefs","SITE_PAGES","refs"])}return{getAllRenderedRootIds:n,getRootIdsWhichShouldBeRendered:function(){var t=this.props.siteData;if(!this.getMasterPage()){var i=t.getExistingRootNavigationInfo(t.getCurrentUrlPageId());if(!this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(i))return[]}return e.compact(["masterPage",t.getPrimaryPageId(),t.getCurrentPopupId()])},getComponentsByPageId:function(e){var t=this.getPageById(e);return t&&t.compRefs},getComponentByPageAndCompId:function(e,t){var i=this.getComponentsByPageId(e);return i&&i[t]},getPageRefs:o}}),define("core/components/selectionSharer/selectionSharer",["core/core/createReactElement","lodash","create-react-class","utils"],function(e,t,i,s){"use strict";var n=s.wixappsClassicsLogger,o=s.socialShareHandler;return i({displayName:"selectionSharer",getInitialState:function(){return{visible:!1,position:null,shareInfo:null}},sharePostWrapper:function(e){var t=this.state.shareInfo;t.url=e,o.handleShareRequest(this.props.siteAPI,{url:e,service:t.service,title:t.title,storeId:t.storeId,postId:t.postId,hashTags:t.hashTags||"",imageUrl:t.imgSrc,addDeepLinkParam:!1,description:t.description})},show:function(e,t){n.reportEvent(this.props.siteAPI.getSiteData(),n.events.SELECTION_SHARER_OPENED,{post_id:t.postId,site_id:t.siteId}),this.setState({visible:!0,position:e,shareInfo:t})},hide:function(){this.setState({visible:!1,position:null,shareInfo:null})},isVisible:function(){return this.state.visible},twitterClickHandler:function(){n.reportEvent(this.props.siteAPI.getSiteData(),n.events.SELECTION_SHARER_CLICKED,{type:"twitter",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="twitter",e.title=e.description,o.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},facebookClickHandler:function(){n.reportEvent(this.props.siteAPI.getSiteData(),n.events.SELECTION_SHARER_CLICKED,{type:"facebook",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="facebook",o.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},mailClickHandler:function(){n.reportEvent(this.props.siteAPI.getSiteData(),n.events.SELECTION_SHARER_CLICKED,{type:"mail",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="email",e.description=e.description+"\r\n( "+e.url+" )",o.handleShareRequest(this.props.siteAPI,e)},render:function(){if(this.state.visible){var t={position:"absolute",left:this.state.position.x+"px",top:this.state.position.y+"px"},i=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/facebook.svg"),n=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/twitter.svg"),o=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/mail.svg");return e("div",{className:"selectionSharerContainer",style:t},[e("img",{key:"selection-sharer-facebook-img",className:"selectionSharerOption",src:i,onClick:this.facebookClickHandler}),e("div",{key:"selection-sharer-first-separator",className:"selectionSharerVerticalSeparator"}),e("img",{key:"selection-sharer-twitter-img",className:"selectionSharerOption",src:n,onClick:this.twitterClickHandler}),e("div",{key:"selection-sharer-second-separator",className:"selectionSharerVerticalSeparator"}),e("img",{key:"selection-sharer-mail-img",className:"selectionSharerOption",src:o,onClick:this.mailClickHandler})])}return null}})}),define("core/core/requireCompCode",["lodash","coreUtils"],function(e,t){"use strict";function i(){this._comps={},this._loaded={}}function s(e,s){if(e.selectiveCompDownload){var n=function(e){var t=o.get(e);return t||(t=new i,o.set(e,t)),t}(e);n.remember(s);var r=e.currentUrl.query.listComponents;"all"===r&&t.log.info("Using component",s);var a=t.compToPackages(s,e);if(0!==(a=n.needed(a)).length)return"requested"!==r&&"true"!==r||t.log.info("Requesing component",s,a),{customDownload:function(){requirejs(a,function(){n.loaded(a),this.done()}.bind(this))}}}}var n={Image:"wysiwyg.components.imageZoom",PermaLink:"wixapps.integration.components.AppPartZoom"},o=new t.SiteDataPrivates;return i.prototype={remember:function(e){this._comps[e]=!0},getAndClear:function(){var t=e.keys(this._comps);return this._comps={},t},needed:function(t){var i=this._loaded;return e.filter(t,function(e){return e&&!i[e]})},loaded:function(t){var i=this._loaded;e.forEach(t,function(e){i[e]=!0})}},{get:s,forDataItem:function(e,t){var i=n[t];if(i)return s(e,i)},requested:function(e){var t=o.get(e);return t?t.getAndClear():[]},all:t.allPackages}}),define("core/siteRender/WixSiteReact",["santaComponents","core/core/createReactElement","zepto","lodash","react","prop-types","create-react-class","reactDOM","mobx","santaProps","coreUtilsLib","coreUtils","core/siteRender/styleCollector","core/siteRender/WixThemeReact","core/siteRender/WixPageReact","core/siteRender/wixBackgroundInstantiator","core/siteRender/beatsGenerator","layout","utils","siteUtils","core/siteRender/SiteAPI","core/siteRender/siteAspectsMixin","core/siteRender/siteAspectsDomContainer","core/siteRender/extraSiteHeight","core/siteRender/blockingLayer","core/siteRender/wixAdsRenderer","core/core/siteBI","core/siteRender/WixPopupRoot","core/siteRender/siteClickHandler","core/siteRender/siteTraversalMixin","core/util/santaVersion.json","core/components/selectionSharer/selectionSharer","core/core/requireCompCode","core/bi/events","experiment","loggingUtils"],function(e,t,i,s,n,o,r,a,c,p,l,d,u,h,g,f,m,y,v,A,S,P,I,D,_,C,b,E,T,w,R,M,k,O,x,L){"use strict";function N(e,t){var i=s.get(e,["compRefs",t]),n=s.get(e,["refs",t]);return i||n}function B(e,t){setTimeout(function(){requirejs(["mousetrap"],function(i){i.bind(e,t)},s.noop)},X)}function U(e){e.componentDidLayout&&e.componentDidLayout.call(e),e.componentDidLayoutAnimations&&e.componentDidLayoutAnimations.call(e),s.forOwn(e.refs,U),s.forOwn(e.compRefs,U)}function F(e){return function(){var t=s.toArray(arguments);return re.apply(null,[e].concat(t))||re.apply(null,[e.refs.aspectPortal].concat(t))}}function V(){var e=this.props.siteData,t=e.getCurrentUrlPageId(),i=re.bind(null,this.getPageById(t)),n=re.bind(null,this.getMasterPage()),o=re.bind(null,this),r={inner:A.structuresDescription.getInner(e,i),outer:A.structuresDescription.getOuter(e,n),siteBackground:A.structuresDescription.getSiteBackground(e,o)},a=e.getCurrentPopupId();return a&&(r[a]={structure:function(e,t){return s.get(e,["pagesDataRaw","pagesData",t,"structure"])}(this.props.siteData,a),getDomNodeFunc:re.bind(null,this.getPageById(a)),pageId:a}),r}function q(e){var t=e.getSiteData(),i=k.requested(t);i.length&&e.reportBI(O.PAGE_COMP_TYPES_LIST,{firstPage:1===t.biData.getPageNumber(),compList:JSON.stringify(s.take(i,$))})}function W(e,t){return ee({siteData:t,loadedStyles:this.loadedStyles,styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,ref:"theme",key:"wixThemeReactFactory",shouldRenderPage:e,siteAPI:this.siteAPI})}function G(){return f.getWixBgComponent(this.mobxObserverWrapperProps)}function H(){return t(C,{siteAPI:this.siteAPI,key:"wixAdsRenderer"})}function K(){return e.utils.createReactElement("div",{className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:this.getRootStyle()},te(function(e,t){var i=this.deletedMeasureMap||this.props.siteData.measureMap,n=Z.getRootProps(g,this.props.rootId,e,this.props.viewerPrivateServices,i);return n.structure=s.merge({},n.structure,{id:"masterPage",layout:{position:this.props.siteRootPosition},componentType:"mobile.core.components.MasterPage"}),n.ref=this.props.rootId,n.refInParent=n.ref,n.className="SITE_ROOT",n.firstPage=!0,n.style={width:this.props.siteData.getSiteWidth()},n.key=(e.getSiteData().isMobileView()?"mobile_":"desktop_")+"siteRoot",n.mobxObserverWrapperProps=t,n}.call(this,this.siteAPI,this.mobxObserverWrapperProps)))}function z(e){return ie({currentPopupId:this.props.siteData.getCurrentPopupId(),viewerPrivateServices:this.props.viewerPrivateServices,siteAPI:this.siteAPI,siteData:e,loadedStyles:this.loadedStyles,ref:"popupRoot",key:"popupRoot",siteRootStyle:this.getRootStyle(),blockingPopupLayer:this.siteAPI.getRenderFlag("blockingPopupLayer"),measureMap:this.deletedMeasureMap,mobxObserverWrapperProps:this.mobxObserverWrapperProps})}function j(){return se({ref:"siteAspectsContainer",key:"siteAspectsContainer",siteWidth:this.props.siteData.getSiteWidth(),isMobileView:this.props.siteData.isMobileView(),getAspectComponentDescriptions:this.getAspectComponentDescriptions,loadedStyles:this.loadedStyles,siteAPI:this.siteAPI})}function Q(e){return t(M,{ref:"selectionSharer",key:"selectionSharer",siteBasePath:e.santaBase,siteAPI:this.siteAPI})}function Y(){return ne({key:"extraSiteHeight",siteAPI:this.siteAPI})}function J(){return oe({siteAPI:this.siteAPI,key:"blockingLayer",layerName:"blockingLayer"})}var Z=p.componentPropsBuilder,X=500,$=32,ee=n.createFactory(h),te=n.createFactory(g),ie=n.createFactory(E),se=n.createFactory(I),ne=n.createFactory(D),oe=n.createFactory(_),re=function(e,t,i,s,n,o,r){return e=e&&t?N(e,t):e,e=e&&i?N(e,i):e,e=e&&s?N(e,s):e,e=e&&n?N(e,n):e,e=e&&o?N(e,o):e,(e=e&&r?N(e,r):e)&&a.findDOMNode(e)},ae=c.action(function(e,t){var i=e.getSiteData(),s=!t.routerDefinition,n=i.getFocusedRootId()===e.getCurrentPopupId(),o=n&&t.pageId===i.getPrimaryPageId(),r=i.getFocusedRootId()!==t.pageId;if(s&&r&&!o)e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);else if(t.routerDefinition){var a=!r,c=t.innerRoute!==i.getRootNavigationInfo().innerRoute;if(a&&c)return e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(r&&!n)return void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(n){t.pageId===i.getPrimaryPageId()?c&&(e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])):e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])}}});return r({displayName:"WixSite",mixins:[P,v.renderDoneMixin,T,w],propTypes:{viewerPrivateServices:o.shape({pointers:o.object.isRequired,displayedDAL:o.object.isRequired,siteDataAPI:o.object.isRequired}).isRequired,siteData:o.object.isRequired,siteRootPosition:o.oneOf(["static","relative"]),scopedRoot:o.string,rootId:o.string,wixCodeAppApi:o.shape({init:o.func.isRequired,sendMessage:o.func.isRequired,registerMessageHandler:o.func.isRequired,registerMessageModifier:o.func.isRequired}),DOMAccessorOverride:o.func},getDefaultProps:function(){return{siteRootPosition:"static",scopedRoot:null,rootId:"masterPage",wixCodeAppApi:{init:s.noop,sendMessage:s.noop,registerMessageHandler:s.noop,registerMessageModifier:s.noop}}},getPrimaryPage:function(){var e=this.getMasterPage();if("masterPage"===this.props.rootId&&e){var t=this.props.siteData.getPrimaryPageId();e=this.getPageComponent(e,t)}return e},getCurrentPopup:function(){var e=this.props.siteData.getCurrentPopupId();return e?v.reactComponentUtils.getRef(this,"popupRoot",e):null},getMasterPage:function(){return this.refs[this.props.rootId]},getPageById:function(e){var t=this.getMasterPage();return e===this.props.rootId?t:t&&this.getPageComponent(t,e)?this.getPageComponent(t,e):v.reactComponentUtils.getRef(this,"popupRoot",e)},getPageComponent:function(e,t){return s.get(this.getPageRefs(e),t)},getPageOfComp:function(e){var t=this,i=s.find(this.siteAPI.getAllRenderedRootIds(),function(i){var s=t.getComponentsByPageId(i);return!!s&&!!s[e]});return this.getPageById(i)},scrollTo:function(e,t,i){i=i||this.props.getSiteContainer();var s=this.props.siteData.isMobileView(),n=l.scrollUtils.calcScrollDuration(function(e){return{x:e.pageXOffset||e.scrollX||0,y:e.pageYOffset||e.scrollY||0}}(i).y,e.y,s),o=s?"Quint.easeOut":"Sine.easeInOut";this.props.siteData.animations.animate("BaseScroll",i,n,0,{y:e.y,ease:o,callbacks:t})},scrollToAnchor:function(e,t){this.scrollTo(e,{onUpdate:t})},scrollToTop:function(){this.scrollTo({y:0})},getInitialState:function(){return this.reLayoutPending=!1,this.pendingReLayoutCompsMap={},this.siteAPI=new S(this),this.isBusy=!0,this.isChangingUrlPage=!1,this.siteAPI.reportBeatEvent(7,this.props.siteData.getPrimaryPageId()),this.compRefs={},{}},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillMount:function(){var e=this.props.siteData,t=e.getCurrentUrlPageId(),i=e.getExistingRootNavigationInfo(t);this.mobxObserverWrapperProps=function(e,t,i){return{viewerPrivateServices:e,siteAPI:t,addComponentRef:i}}(this.props.viewerPrivateServices,this.siteAPI,this.addComponentRef),function(){var e=this.siteAPI.getSiteData(),t=c.computed(function(){var t=e.getExistingRootNavigationInfo(e.getCurrentUrlPageId()),i=this.siteAPI.isPageAllowedAndLoaded(t),n=this.getAspectsComponentStructures();if(i){var o=e.getAllPossiblyRenderedRoots();n=s.reduce(o,function(t,i){return t.push(e.pagesData[i].structure),t},n)}else n.push(e.getMasterPageData(["structure"]));return u.buildLoadedStyles(n,e)},{context:this,name:"loadedStylesByStructureId"}),i={},n={};this.loadedStyles=c.computed(function(){var e=t.get();return s.isEqual(s.keys(i),s.keys(e))||(n=i,i=e),n=s.reduce(e,function(e,t,i){return s.set(e,[i],s.defaults({},t,n[i]))},n),s.clone(n)},{name:"loadedStyles"})}.call(this),function(e){var t=this;this.pendingRenderCounter=c.computed(function(){return s(this.props.siteData.renderingCompsMap.values()).reject().size()+(this.props.siteData.relayoutBlockedByQueue?1:0)},{context:this,name:"pendingRenderCounter"}),c.observe(this.pendingRenderCounter,c.action(function(i){if(0===i.newValue&&t.props.siteData.renderingCompsMap.size>0){var n=t.props.siteData.renderingCompsMap.toJS();t.pendingReLayoutCompsMap=s.assign(t.pendingReLayoutCompsMap||{},n),t.reLayoutPending=!0,t.props.siteData.renderingCompsMap.clear(),e()}}),!0)}.call(this,this.reLayoutIfPending);var n=this.siteAPI.isPageAllowed(i)?t:null;this.siteAPI.setComponentRenderStart("WixSiteReact_"+this.props.rootId),this.setState({currentUrlPageId:n,currentPopupId:null})},componentWillUpdate:function(){L.performance.start(L.performanceMetrics.RE_RENDER),this.isBusy=!0,this.siteAPI.setComponentRenderStart("WixSiteReact_"+this.props.rootId)},getSiteChildren:function(e){var i=this.props.siteData,n=function(e){return!e.getSiteData().isMobileView()}(this.siteAPI)?function(e,t){var i=[W.call(this,e,t),e?G.call(this):null,e?K.call(this):null,H.call(this),e?z.call(this,t):null,j.call(this),Q.call(this,t),Y.call(this),J.call(this)];return s.compact(i)}.call(this,e,i):function(e,t){var i=[W.call(this,e,t),H.call(this),e?G.call(this):null,e?K.call(this):null,e?z.call(this,t):null,j.call(this),Q.call(this,t),Y.call(this),J.call(this)];return s.compact(i)}.call(this,e,i);if(this.siteAPI.getLayoutMechanism()===v.constants.LAYOUT_MECHANISMS.MESH){var o=m.createPartiallyVisibleBeatScriptString(i);n.push(t("script",{id:"partiallyVisibleBeat",key:"partiallyVisibleBeat",dangerouslySetInnerHTML:{__html:o}}))}return n},render:function(){var t=this.props.siteData,i=t.getExistingRootNavigationInfo(t.getCurrentUrlPageId()),n=this.siteAPI.isPageAllowed(i);if(!n){this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(i);var o=F(this.refs.siteAspectsContainer);t.notRenderedStructures=s.transform(this.getAspectsComponentStructures(),function(e,t){e[t.id]={structure:t,getDomNodeFunc:o}},{})}var r=this.props.className;return t.isVisualFocusEnabled()&&(r+=" visual-focus-on"),e.utils.createReactElement("div",s.assign({className:r,"data-santa-version":R.version,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:this.getSiteChildren(n)},this.props.extraEventsHandlers))},getRootStyle:function(){var e={};return e.width=this.props.siteData.getSiteWidth(),x.isOpen("displayWixAdsNewVersion",this.props.siteData)?e.marginTop=this.props.siteData.getPageTopMargin():e.paddingBottom=this.props.siteData.getPageBottomMargin(),this.state.siteRootHidden&&(e.height=0,e.overflowY="hidden"),e},onPopState:function(){var e=window.location.href,t=v.wixUrlParser.parseUrl(this.props.siteData,e);x.isOpen("sv_multilingual",this.props.siteData)&&t.queryParams.language&&d.multilingual.setCurrentLanguage(t.queryParams.language),t&&this.tryToNavigate(t,!0)},onHashChange:function(){var e=v.wixUrlParser.parseUrl(this.props.siteData,window.location.href);e&&this.props.siteData.isUsingUrlFormat("slash")&&this.tryToNavigate(e)},isPageExists:function(e){return s.includes(this.props.siteData.getAllPageIds(),e)||v.errorPages.isErrorPage(e)},updateUrlIfNeeded:function(e){var t=this.siteAPI.getSiteData();this.props.updateUrlIfNeededMethod(t,e)},navigateIfPossible:function(e,t,i,n){var o=s.get(this.props,"viewerPrivateServices.siteDataAPI"),r=this.siteAPI.getSiteData();if(this.isPageExists(e.pageId))if(this.siteAPI.isPageAllowed(e)){var a=r.getDataByQuery(e.pageId);if(!a)return;a.isPopup||this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var c=s.clone(e);c.title=e.title||a.pageUriSEO;var p=function(e,t){var i=[];return t.hasAppSectionParams||i.push("appSectionParams"),v.wixUrlParser.getUrl(e,t,!1,!1,void 0,void 0,i)}(r,c),l=r.isPopupPage(e.pageId)||t;this.siteAPI.startingPageTransition(c),this.props.navigateMethod(this,o,p,c,!l,i,n)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(e),this.forceUpdate()},tryToNavigate:function(e,t,i,n){var o=this,r=this.siteAPI.getSiteData(),a=this.siteAPI.getSiteAspect("actionsAspect");if(this.currNav=e,function(e,t){if(t.routerDefinition){var i=e.getSiteAspect("tpaComponentsDomAspect"),n=e.getTPAComponentsOnPage(t.pageId);s.forEach(n,function(e){i.clearComponentIsAlive(e)})}}(this.siteAPI,r.getRootNavigationInfo()),e.routerDefinition&&(!e.pageId||e.isRefetchingPageAfterLogin))return this.siteAPI.startingPageTransition(e),void this.props.getDynamicPageRealPage(r,e,function(s){v.errorPages.isErrorPage(s.pageId)?(v.errorPages.setIsFixingDisplayedMasterPage(),v.errorPages.updateErrorPageMasterData("masterPage",r.pagesData.masterPage),o.props.viewerPrivateServices.siteDataAPI.loadPage(s,function(){o.dynamicPageTryToNavigate(e,a,s,r,o.siteAPI,t,i,n)})):o.dynamicPageTryToNavigate(e,a,s,r,o.siteAPI,t,i,n)});ae(this.siteAPI,e),this.navigateIfPossible(e,t,i,n)},dynamicPageTryToNavigate:function(e,t,i,n,o,r,a,c){if(i.errorInfo){var p=o.getRenderRealtimeConfigItem("errorPagesPopUp");p&&p(i.errorInfo)}if(s.isEqual(this.currNav,e)){if(i.isStaticPageRedirect?e=i:s.assign(e,i),ae(this.siteAPI,e),function(e,t){return e.getFocusedRootId()===t.pageId&&!t.isRefetchingPageAfterLogin}(n,e)){var l=e.innerRoute!==n.getRootNavigationInfo().innerRoute;if(this.handleSamePageAnchorNavigation(e),!l&&e.imageZoom===n.getRootNavigationInfo().imageZoom)return void t.handlePagePageNavigationCanceled()}delete e.isRefetchingPageAfterLogin,this.navigateIfPossible(e,r,a,c)}else t.handlePagePageNavigationCanceled()},handleSamePageAnchorNavigation:function(e){var t=this.siteAPI,i=this.props.siteData;if(e.anchorData){t.scrollToAnchor(e.anchorData,function(s){1===s.ratio&&t.getSiteAspect("anchorChangeEvent").setSelectedAnchorAsync(i,e.anchorData,e.pageId,v.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)})}else i.isImageZoom(e)||e.routerDefinition||this.scrollToTop()},handleNavigation:function(e,t,i,n){var o=this.props.siteData;if(e.pageId===o.getPrimaryPageId()){if("#"!==t){var r=s.get(this.props,"viewerPrivateServices.siteDataAPI");this.props.navigateMethod(this,r,t,e,i,n)}this.handleSamePageAnchorNavigation(e)}else this.tryToNavigate(e,!i)},enforceAndPatchLayout:c.action("enforceAndPatchLayout",function(){var e=V.call(this),t=y.enforceAndPatch(e,this.siteAPI);return s.assign(this.props.siteData.reLayoutedCompsMap,t),!s.isEmpty(t)}),reLayout:c.action("reLayout",function(){var e=this;if(this.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()){var t=this.lockedCompIds&&v.arrayUtils.toTrueObj(this.lockedCompIds),i=this.props.siteData,n=i.getCurrentUrlPageId(),o=i.getExistingRootNavigationInfo(n),r=this.getPrimaryPage(),a=!(!r||!re(r,n))&&this.siteAPI.isPageAllowedAndLoaded(o);i.isAddPanelView||y.updateBodyNodeStyle(i),this.props.siteData.updateScreenSize();var p=function(e){var t=this.getAspectsComponentStructures(),i=this.props.siteData,n=F(this.refs.siteAspectsContainer),o=s.transform(t,function(e,t){e[t.id]={structure:t,getDomNodeFunc:n}},{});return e?(s.assign(o,V.call(this)),i.shouldShowWixAds()&&(o.wixAds=A.structuresDescription.getWixAds(i)),o):o}.call(this,a),l=this.forceFullReLayout?null:function(e,t,i,n){if(!e.measureMap||s.isEmpty(i)&&s.isEmpty(n))return null;var o=s.transform(t,function(e,t,i){s.includes(["inner","outer","siteBackground","wixAds"],i)||(e[i]=!0)},{});return s.assign({},n,i,o)}(i,p,t,this.pendingReLayoutCompsMap);this.forceFullReLayout=!1;var d=this.siteAPI,u=c.untracked(function(){return y.reLayout(p,d,d.getNoEnforceAnchors(),t,l,e.props.DOMAccessorOverride)});if(i.measureMap=u.measureMap,s.assign(i.reLayoutedCompsMap,u.reLayoutedCompsMap),delete this.tempMeasureMap,delete this.lockedCompIds,function(e){var t=e.getSiteAspect("actionsAspect"),i=e.getSiteAspect("behaviorsAspect"),n=e.getCompBehaviours();s.forOwn(n,function(e,n){s.forOwn(e,function(e,s){t.registerBehaviors(s,n,e),i.setBehaviorsForActions(i.convertBehaviors(e,s),n,s)})})}(this.siteAPI),a){this.pendingReLayoutCompsMap={},this.reLayoutPending=!1,this.isBusy=!1;var h=[this.getMasterPage(),r,this.refs.siteAspectsContainer],g=this.getCurrentPopup();g&&h.push(g);var f=this._aspectsSiteAPI.getComponentById("SITE_BACKGROUND");h.push(f),function(e){s.forEach(e,U)}(h,u.reLayoutedCompsMap)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(o);this.isBusy=!1,this.notifyAspects("didLayout",[]),this.siteIsReady||(this.siteIsReady=!0,this.siteAPI&&this.siteAPI.setBiMarker&&this.siteAPI.setBiMarker("lastTimeStamp"),this.notifyAspects("siteReady"))}}),registerReLayoutPending:function(e){this.pendingReLayoutCompsMap[e]=!0,this.reLayoutPending=!0},cancelReLayoutPending:function(e){delete this.pendingReLayoutCompsMap[e],s.isEmpty(this.pendingReLayoutCompsMap)&&(this.reLayoutPending=!1),!1===this.props.siteData.renderingCompsMap.get(e)&&this.props.siteData.renderingCompsMap.delete(e)},reLayoutIfPending:c.action(function(){this.reLayoutPending&&0===this.pendingRenderCounter.get()&&(this.reLayoutPending=!1,this.refs.theme.initWaitForStylesReady())}),componentDidMount:function(){var e=this;s.invoke(this.props,"onBeforeLayout"),this.props.siteData._isFirstRenderAfterSSR=!1,this.props.siteData.isUsingUrlFormat(v.siteConstants.URL_FORMATS.SLASH)?this.siteAPI.reportCurrentPageEvent():this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.initFacebookRemarketing(),this.siteAPI.initGoogleRemarketing(),this.siteAPI.initYandexMetrika(),this.siteAPI.setBiMarker("renderEnd"),v.dataCapsule.init(this._aspectsSiteAPI),c.reaction(function(){var e=this.props.siteData.getFocusedRootId(),t=this.props.siteData.getExistingRootNavigationInfo(e);return{mobileView:this.props.siteData.isMobileView(),siteWidth:this.props.siteData.getSiteWidth(),screenWidth:this.props.siteData.getScreenWidth(),pageAllowedAndLoaded:this.siteAPI.isPageAllowedAndLoaded(t),pageMargins:this.props.siteData.getPageMargins(),viewMode:this.siteAPI.getRenderFlag("componentViewMode")}},function(){this.forceUpdate()},{context:this,compareStructural:!0}),c.reaction(function(){return this.props.siteData.isMobileView()},function(){this.forceFullReLayout=!0},{context:this}),c.reaction(function(){return this.props.siteData.getScreenWidth()},function(){this.props.viewerPrivateServices.siteDataAPI.updateDisplayedNodesLayoutAndUpdateAnchors()},{context:this,name:"screenWidthChangeAction"});var t=c.computed(function(){var e=this.props.siteData.getPrimaryPageId(),t=this.props.siteData.getExistingRootNavigationInfo(e);return{primaryRootId:e,popupId:this.props.siteData.getCurrentPopupId(),routersRendererIndex:t.routersRendererIndex}},{context:this,compareStructural:!0});c.observe(t,function(t){var i=t.oldValue.primaryRootId!==t.newValue.primaryRootId,s=t.oldValue.routersRendererIndex!==t.newValue.routersRendererIndex;(i||s)&&(e.isChangingUrlPage=!0),e.forceUpdate()}),this.registerAspectToEvent("siteReady",function(){e.siteAPI.reportBeatFinish(e.props.siteData.getCurrentUrlPageId()),b.send(e.siteAPI.getSiteData()),function(e){var t=i(".hiddenTillReady");e.isMobileDevice()?(i(".wix-menu-enabled").removeClass("wix-menu-enabled"),t.css({display:"none"})):t.removeClass("hiddenTillReady")}(e.props.siteData),function(){var e=this.props.siteData,t=e.baseVersion||"could not retrieve version!";e.isMobileDevice()||e.isTabletDevice()?s.find(e.currentUrl.query,function(e,t){return"alertversion"===t.toLowerCase()})&&window.alert("You are running React!\nVersion: "+t):e.isViewerMode()&&!e.isAddPanelView&&B("ctrl+alt+shift+v",function(){window.alert("You are running React!\nVersion: "+t)})}.call(e),function(){if(window.rendererModel){var e=this.props.siteData;!e.isViewerMode()||e.isAddPanelView||e.isMobileDevice()||e.isTabletDevice()||B("ctrl+alt+shift+e",function(){var e=s(window.rendererModel.runningExperiments).pickBy(function(e){return"new"===e}).keys().value();window.alert("Active Experiments:\n"+e.join("\n"))})}}.call(e)}),this.registerAspectToEvent("resize",function(){var e=this;return s.throttle(function(){!e.dead&&e.getMasterPage()&&(e.siteAPI.resetSiteReacted(),e.siteAPI.getActionQueue().runImmediately(e.props.siteData.updateScreenSize),e.siteAPI.didReact()||(e.registerReLayoutPending("WixSiteReact"),e.reLayout()))},500,{leading:!1,trailing:!0})}.call(this)),this.updateTitleAndMetaTags(),this.refs.theme.registerStylesReadyCallback(this.reLayout),this.siteAPI.reportBeatEvent(8,this.props.siteData.getPrimaryPageId()),this.siteAPI.setComponentRenderEnd("WixSiteReact_"+this.props.rootId),q(this.siteAPI)},componentDidUpdate:function(){if(this.tempMeasureMap&&!this.props.siteData.measureMap&&(this.props.siteData.measureMap=this.tempMeasureMap,delete this.deletedMeasureMap,delete this.tempMeasureMap),this.isChangingUrlPage){this.siteAPI.setBiMarker("renderEnd");var e=this.props.siteData.getCurrentUrlPageId();this.siteAPI.reportBeatFinish(e),this.props.siteData.isUsingUrlFormat(v.siteConstants.URL_FORMATS.SLASH)||this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.fireGoogleRemarketing(),this.siteAPI.reportYandexPageHit(this.props.siteData.currentUrl.full),this.isChangingUrlPage=!1,this.notifyAspects("urlPageChange"),q(this.siteAPI)}this.siteAPI.setComponentRenderEnd("WixSiteReact_"+this.props.rootId),L.performance.finish(L.performanceMetrics.RE_RENDER)},updateTitleAndMetaTags:function(){this.props.updateHeadMethod&&this.props.updateHeadMethod(this.props.siteData,this.props.rootId)},componentWillUnmount:function(){this.dead=!0,this.siteAPI.onSiteUnmount()}})}),define("core/siteRender/WixSiteHeadRenderer",["lodash","experiment"],function(e,t){"use strict";function i(){this.blankFavicons=null}function s(t,i){return function(t){var i=[];return e.forEach(t,function(t,s){e.startsWith(s,"og:")?i.push('<meta property="'+s+'" content="'+t+'">'):i.push('<meta name="'+s+'" content="'+t+'">')}),i}(t.getDynamicPageSEOMetaData(i))}function n(e,t){return(t=e.getCurrentUrlPageId()||t)&&"masterPage"!==t||(t=e.getMainPageId()),t}return i.prototype={getFavicons:function(t){return t.isPremiumUser&&t.isPremiumUser()&&function(t){return e.includes(t.rendererModel.premiumFeatures,"AdsFree")}(t)?this._getPremiumUserFavicon(t):this._getDefaultWixFavicon()},createBlankFavicons:function(){return null===this.blankFavicons&&(this.blankFavicons=this._createEmptyFaviconElements()),this.blankFavicons},getPageMetaTags:function(e,t){var i=n(e,t);return e.isDynamicPage(i)?s(e,i):this._getMetaTagsForPage(e,i)},getPageJsonldTag:function(t,i){var s=n(t,i),o=t.getPageJsonld(s);return 0===e.size(o)?"":['<script type="application/ld+json">',JSON.stringify(o),"<\/script>"].join("")},getPageLinkTag:function(t,i){var s=n(t,i),o=t.getPageLinkTag(s);return 0===e.size(o)?"":'<link rel="amphtml" href="'+o+'">'},_getPremiumUserFavicon:function(e){var t=e.getFavicon();if(t){var i=this._getFaviconMimeType(t);return t=e.getMediaFullStaticUrl(t),this._createFaviconLinkElements(t,i)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var e="http://www.wix.com/favicon.ico",t=this._getFaviconMimeType(e);return this._createFaviconLinkElements(e,t)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(e,t){var i=[];return e&&t&&(i.push({rel:"shortcut icon",href:e,type:t}),i.push({rel:"apple-touch-icon",href:e,type:t})),i},_getStaticMediaUrl:function(e){return e.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(e){var t=null;return e&&(this._isExtension(e,"png")?t="image/png":this._isExtension(e,"gif")?t="image/gif":this._isExtension(e,"ico")||this._isExtension(e,"icon")?t="image/x-icon":this._isExtension(e,"jpg")&&(t="image/jpg")),t},_isExtension:function(e,t){return this._getExtension(e).toLowerCase()===t},_getExtension:function(e){if(e){var t=e.lastIndexOf(".");if(t>=0)return e.substr(t+1)}return""},_getMetaTagsForPage:function(i,s){var n=i.getPageSEOMetaData(s),o=[this._getDescriptionSEOMetaTag,this._getKeywordsSEOMetaTag,this._getOgMetaTag];return e.get(i,"publicModel.indexable")&&o.push(this._getRobotsIndexMetaTag),t.isOpen("sv_twitterMetaTags",i)&&o.push(this._getTwitterMetaTags),e.flatMap(o,function(e){return e(n)})},_getRobotsIndexMetaTag:function(e){if(e&&e.robotIndex)return'<meta name="robots" content="'+e.robotIndex+'">'},_getDescriptionSEOMetaTag:function(e){if(e&&e.description)return['<meta name="description" content="'+e.description+'">']},getGoogleTagManagerScript:function(){return"<script async>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');<\/script>"},_getKeywordsSEOMetaTag:function(e){if(e&&e.keywords)return['<meta name="keywords" content="'+e.keywords+'">']},_getOgMetaTag:function(t){return e.map(e.get(t,"ogTags"),function(e){return'<meta property="'+e.property+'" content="'+e.content+'">'})},_getTwitterMetaTags:function(t){return e.map(e.get(t,"twitterTags"),function(e){return'<meta name="'+e.name+'" content="'+e.content+'">'})}},new i}),define("core/core/pageRequests",["lodash","coreUtils","loggingUtils","dataFixer","siteUtils","core/bi/errors"],function(e,t,i,s,n,o){"use strict";function r(t,i){return e.some(t.failedRequests,function(t){var s=t.destination;return 2===e.size(s)&&"pagesData"===s[0]&&s[1]===i})}function a(e,t){i.logger.reportBI(e,o.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:t})}function c(i,n){return function(o){var r=t.siteDataUtils.getRequestModel(i),a=t.siteDataUtils.getRendererModel(i);return s.fix(o,e.map(n.pages,"pageId"),r,i.currentUrl,i.urlFormatModel,i.isViewerMode(),a)}}function p(s,n,r,a){"undefined"!=typeof document&&"https:"===window.document.location.protocol&&(n[0]=n[0].replace(u,h));return{name:"page request",urls:n,destination:["pagesData",r],isValidResponse:function(t){return e.isObject(t)},transformFunc:c(s,a),error:function(e,t){s.isInSSR()&&s.onPageRequestFailed&&s.onPageRequestFailed(n[0],t,e),s.failedRequests.push(this)},onUrlRequestFailure:function(e,n){s.onPageRequestFailed&&s.onPageRequestFailed(e,n);var a=t.urlUtils.parseUrl(e);i.logger.reportBI(s,o.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:r,hostname:a.hostname,url:e,responseStatusCode:n})}}}function l(i,s,o){if(!i.publicModel)return[];var l=[],u=i.publicModel.pageList;r(i,d)?a(i,d):s.pagesData[d]||l.push(function(e,t){return p(e,n.pagesUrlUtils.getMasterPageURLs(t),d,t)}(i,u));var h=e.isArray(o)?o:[o];return e.forEach(h,function(o){o.pageId&&(t.errorPages.isErrorPage(o.pageId)?l.push(p(i,t.errorPages.getJSONS(i,o.pageId),o.pageId,u)):r(i,o.pageId)?a(i,o.pageId):!function(t,i){var s=e.find(t.publicModel.pageList.pages,{pageId:i.pageId});return!e.isEmpty(i.jsonUrls)&&e.isEmpty(e.get(s,"urls"))}(i,o)?function(t,i){var s=e.get(t,"rendererModel.passwordProtectedPages",[]);return e.includes(s,i.pageId)}(i,o)||s.pagesData[o.pageId]||l.push(function(e,t,i){if(e.currentUrl&&e.currentUrl.query.fakePage){var s=e.currentUrl.query.fakePage;return{urls:[e.santaBase+"/static/fakePages/"+s+".json"],destination:["pagesData",i],transformFunc:c(e,t)}}var o=n.pagesUrlUtils.getPageURLs(t,i);return o||(i=t.mainPageId,o=n.pagesUrlUtils.getPageURLs(t,t.mainPageId)),p(e,o,i,t)}(i,u,o.pageId)):l.push(p(i,o.jsonUrls,o.pageId,u)))}),l}var d="masterPage",u=/http:\/\/[a-z]+\.[a-z]+\.com\//,h="//static.wixstatic.com/";return l}),define("core/core/externalStyles",["lodash","utils"],function(e,t){"use strict";function i(e){var t=e.rendererModel.siteInfo.documentType;return s.fontUtils.getCssUrls(t,e.serviceTopology)}var s=t.fonts;return{getRequests:function(t){var s=[],n=i(t);return e.forEach(n,function(i,n){e.startsWith(i,"//")&&(i="https:"+i),s.push({urls:[i],destination:["externalStyles",n],dataType:"text",onUrlRequestFailure:t.isInSSR()?function(e){throw new Error("Failed fetching external style: "+e)}:void 0,isValidResponse:function(t){return e.isString(t)&&!e.isEmpty(t)}})}),s},getStylesIds:function(t){return e.keys(i(t))}}}),define("core/core/SiteMembersAPI",["utils","lodash"],function(e,t){"use strict";function i(e,i,s){if(t.get(s,"errorCode"))i(s.errorCode);else{var o=function(e){var i=t.get(e,"sessionToken")||t.get(e,["smSession","sessionToken"])||"";return t.get(i.match(/^JWS\.(.+)/),0)}(s.payload);o?function(e,i,s,o){n({type:"POST",url:p,data:{token:e},asForm:!0},function(e){var s=t.merge({},e,{httpOnlySession:!0,payload:o});i(s)},s)}(o,e,i,s.payload):e(s)}}function s(e,i,s,p,l,d,u,h){var g=t.merge(i||{},{collectionId:r,metaSiteId:c});d&&(t.merge(g,{svSession:d,appUrl:o}),u&&(g.initiator=u)),n({type:s,url:a+e,data:g,asForm:!0},p,l,h)}function n(s,n,o,r){var a={type:s.type,url:s.url,data:s.data,asForm:s.asForm,dataType:"json",jsonp:!1,success:function(e){i(n,o,e)},error:o};!0===r&&(a=t.merge(a,{crossDomain:!0,xhrFields:{withCredentials:!0}})),e.ajaxLibrary.ajax(a)}var o=void 0,r=void 0,a=void 0,c=void 0,p=void 0,l=void 0,d=void 0,u={POST:"POST",GET:"GET"},h={login:"/api/member/login",register:"/api/member/register",apply:"/api/member/apply",sendForgotPasswordMail:"/api/member/sendForgotPasswordMail",resetMemberPassword:"/api/member/changePasswordWithMailToken",getMemberDetails:"/api/member",handleOauthToken:"/api/social/token/handle",verify:"/_api/wix-sm/verify",logout:"/_api/wix-sm/logout",resendEmailVerification:"/_api/wix-sm/email/resend"},g={};return g.initializeData=function(e){c=e.getMetaSiteId();var t=e.getClientSpecMapEntriesByType("sitemembers")[0];r=t&&t.smcollectionId,a=e.serviceTopology.siteMembersUrl,p="//"+e.currentUrl.host+h.verify+"/"+c+"/"+e.siteId,l="//"+e.currentUrl.host+h.logout+"/"+c,d="//"+e.currentUrl.host+h.resendEmailVerification,o=e.currentUrl.full},g.login=function(e,t,i,n,o){s(h.login,e,u.POST,t,i,n,o)},g.register=function(e,t,i,n,o){s(h.register,e,u.POST,t,i,n,o)},g.apply=function(e,t,i,n,o){s(h.apply,e,u.POST,t,i,n,o)},g.sendForgotPasswordMail=function(e,t,i){s(h.sendForgotPasswordMail,{email:e.email,returnUrl:e.homePageUrl,lang:e.lang},u.POST,t,i)},g.resetMemberPassword=function(e,t,i){s(h.resetMemberPassword,e,u.POST,t,i)},g.getMemberDetails=function(e,t,i,n){e=e||"",s(h.getMemberDetails+"/"+e,null,u.GET,t,i,null,null,n)},g.handleOauthToken=function(t,i,s){!function(t,i,s){var o="?"+e.urlUtils.toQueryString({collectionId:r,metaSiteId:c});n({type:"POST",url:a+h.handleOauthToken+o,data:t},i,s)}(s,t,i)},g.logout=function(e,t){n({type:"POST",url:l,asForm:!0},e,t)},g.resendEmailVerification=function(e,t,i){n({type:"GET",url:d+"/"+e,asForm:!1},t,i)},g}),define("core/siteRender/SiteMembersAspect",["lodash","coreUtils","core/core/siteAspectsRegistry","core/core/SiteMembersAPI","core/bi/events","pmrpc"],function(e,t,i,s,n,o,r){"use strict";function a(t,i){var s=t.getSiteData(),n=e.get(s,"widgetsStore.widgetHandler"),a="viewer_platform_public_api_"+i.appDefId+"_"+i.workerId,c=n&&n.getPostMessageTarget(i.workerId);return c?o.api.request(a,{target:c}):r.reject(new Error("Application API not found."))}function c(e,t,i){return{componentType:e,type:"Component",id:t,key:t,skin:i}}function p(e){return c("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog",l($.PasswordProtected,e))}function l(e,t){return d(t)&&t.isMobileView()&&e.socialMobileThemeStyled?e.socialMobileThemeStyled:e.themeStyled}function d(t){var i=e.get(t.getDataByQuery("masterPage"),["smSettings"],{});return!(!i.socialLoginGoogleEnabled&&!i.socialLoginFacebookEnabled)}function u(t,i){if(e.isBoolean(i))return i?J.Login:J.SignUp;var s=t.getDataByQuery("masterPage");return e.get(s,["smSettings","smFirstDialogLogin"],!1)?J.Login:J.SignUp}function h(e){e.onSubmitCallback=function(e,t){var i=Q.getCookie(ee.SV_SESSION);F.call(this,n.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),s.login(e,function(e,t){x.call(this,e,t,n.SITE_MEMBER_LOGIN_SUCCESS)}.bind(this,t),function(e){t.endLoader(),t.setErrorMessageByCode(e)},i,null),t.startLoader()}.bind(this);var t=this.aspectState.read("languageToDisplay");e.onTokenMessage=C.bind(this),e.onSwitchDialogLinkClick=D.bind(this,J.SignUp,void 0,t),e.onForgetYourPasswordClick=function(){F.call(this,n.SITE_MEMBER_CLICKED_FORGOT_PASSWORD),D.call(this,J.ResetPasswordEmail,void 0,t)}.bind(this),e.needLoginMessage=this.aspectState.read("showDialogMessage")}function g(t){t.onSubmitCallback=function(t,i){var o=this.siteData.getClientSpecMap(),r=e.find(o,{type:"sitemembers"}).collectionType,a=Q.getCookie(ee.SV_SESSION);"Open"===r?(s.register(t,function(e,t){x.call(this,e,t)}.bind(this,i),function(e){i.endLoader(),i.setErrorMessageByCode(e)},a),i.startLoader()):"ApplyForMembership"===r&&s.apply(t,L.bind(this,i.props.language),i.setErrorMessageByCode,a);F.call(this,n.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id})}.bind(this);var i=this.aspectState.read("languageToDisplay");t.onTokenMessage=C.bind(this),t.onSwitchDialogLinkClick=D.bind(this,J.Login,void 0,i),t.needLoginMessage=this.aspectState.read("showDialogMessage"),t.hasSocialAppInstalled=function(){var e={appDefId:ie.MEMBER_AREA,workerId:this.siteData.getPrimaryPageId()},t=this.aspectSiteApi.getSiteAPI();return new r(function(i,s){a(t,e).then(function(e){e.hasSocialPages(function(e){return i(e)},function(e){return s(e)})}).catch(function(){i(!1)})})}.bind(this)}function f(e){e.onSubmitCallback=function(e,t){var i=this.siteData.currentUrl.full;F.call(this,n.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),s.sendForgotPasswordMail({email:e.email,homePageUrl:i,lang:t.props.language},function(){var e=this.aspectState.read("invokeResetPasswordDialogCb"),i=this.aspectState.read("dialogProcessSuccessCallback");e&&(i(),this.aspectState.update({dialogProcessSuccessCallback:null}),this.aspectState.delete("invokeResetPasswordDialogCb")),_.call(this,X.ResetPasswordEmail,t.props.language)}.bind(this),t.setErrorMessageByCode,J.ResetPasswordEmail)}.bind(this)}function m(e){e.biContext="confirm email to start",e.onResendLinkClick=function(e){b.call(this),U.call(this,{context:e,name:"resend confirmation email"}),D.call(this,J.SentConfirmationEmail)}.bind(this,e.biContext),e.onDialogReady=function(){B.call(this,{notificationName:"confirm email to access"})}.bind(this)}function y(e){e.biContext="sent confirmation email",e.onResendLinkClick=function(e){b.call(this),U.call(this,{context:e,name:"resend confirmation email"})}.bind(this,e.biContext),e.onDialogReady=function(){B.call(this,{notificationName:"sent confirmation email"})}.bind(this)}function v(){var t={},i=e.get(this.siteData.currentUrl.query,"lang",te);return t.language=i,t.onSubmitCallback=function(e,t,i){F.call(this,n.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id}),s.resetMemberPassword(t,function(e){delete this.siteData.currentUrl.query.forgotPasswordToken,_.call(this,X.ResetPasswordNewPassword,e)}.bind(this,e),i.setErrorMessageByCode)}.bind(this,i),t.notClosable=this.aspectState.read("notClosable"),t}function A(e){var t=e.language,i=this.siteData;switch(this.aspectState.read("notificationToDisplay")){case J.SignUp:var s=re[i.siteId].siteMember.details.email;e.title="",e.description=V(t,"SMApply_Success1")+" "+V(t,"SMApply_Success2").replace("{0}",s),e.buttonText=V(t,"SMContainer_OK");break;case J.ResetPasswordEmail:e.title=V(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE"),e.description=V(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT"),e.buttonText=V(t,"SMContainer_OK");break;case J.ResetPasswordNewPassword:e.title=V(t,"siteMembersTranslations_Reset_Password_Sucess_Title"),e.description="",e.buttonText=V(t,"SMContainer_OK"),e.onButtonClick=function(e,t){F.call(this,n.SITE_MEMBER_SUBMIT_BUTTON,{context:t}),D.call(this,e)}.bind(this,J.Login,"resetPasswordSuccessNotification");break;case"siteowner":e.title=V(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE"),e.description=V(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE"),e.buttonText=V(t,"SMContainer_OK")}}function S(i){i.onSubmitCallback=function(i,s,n){var o=function(e){var t="SMForm_Error_General_Err";try{t=JSON.parse(e.responseText).errorCode}catch(e){}n.setErrorMessageByCode(t)};if(e.isEmpty(s.password))return n.setErrorMessage("PasswordLogin_Wrong_Password");if(E(this.siteData,i.pageId)){var r=this;(function(e,i,s,n){var o=this.siteData.serviceTopology.protectedPageResolverUrl,r={password:e,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:i.pageId};t.ajaxLibrary.ajax({type:"POST",url:o,data:r,dataType:"json",cache:!1,contentType:"application/json",success:s,error:n})}).call(this,s.password,i,function(e){i.jsonUrls=e.payload.urls,q.call(r,n,i)},o)}else(function(e,t,i){(function(e){return j.SHA256.b64_sha256(e)})(e)===this.aspectState.read("passwordDigest")?t(this.aspectState.read("nextPageInfo")):i()}).call(this,s.password,q.bind(this,n),o)}.bind(this,this.aspectState.read("nextPageInfo"))}function P(e){var t=this;e.onSubmitCallback=function(e,t){var i={appDefId:ie.MEMBER_AREA,workerId:this.siteData.getPrimaryPageId()};t.closeDialog(!1),a(this.aspectSiteApi.getSiteAPI(),i).then(function(e){e.navigateToSection({appDefinitionId:ie.MEMBER_INFO,sectionId:se.MEMBER_INFO,memberId:ne})})}.bind(this);var i=Q.getCookie(ee.SM_EF),s=i&&i.split("|")[1];e.language=s&&s.trim()||te;var n=e.onCloseDialogCallback;e.onCloseDialogCallback=function(){n.apply(void 0,arguments);var e=t.siteData.getMainPagePath();Q.deleteCookie(ee.SM_EF,t.siteData.currentUrl.hostname,e),Q.deleteCookie(ee.SM_EF,t.siteData.currentUrl.hostname,function(e){return e+"#"}(e))}}function I(e){var t=this;e.onBackToSiteButtonClick=function(){t.aspectSiteApi.navigateToPage({pageId:t.siteData.getMainPageId()})},e.onSwitchAccountClick=function(){t.logout()}}function D(t,i,s,n,o){this.aspectState.update(e.merge({},{dialogToDisplay:t},s?{languageToDisplay:s}:{},e.isFunction(i)?{dialogProcessSuccessCallback:i}:{},e.isFunction(n)?{onCancelCallback:n}:{},e.isBoolean(o)?{checkCommunityCheckbox:o}:{},{logoutState:!1}))}function _(t,i){this.aspectState.update(e.merge({},{notificationToDisplay:t,dialogToDisplay:J.Notification},i?{languageToDisplay:i}:{}))}function C(e,t,i,n){var o=Q.getCookie(ee.SV_SESSION),r=function(e,t,i,s){var n=s.payload,o=n.siteMemberDto,r=n.smSession;s.httpOnlySession?x.call(this,e,s):r?x.call(this,e,{payload:r}):L.call(this,e.props.language,{payload:o});O(t,i)}.bind(this,n,i,t),a=function(e,t,i,s){e.endLoader(),e.setOuathErrorMessageByCode(s),O(t,i)}.bind(this,n,i,t);s.handleOauthToken(r,a,{svSession:o,token:e,provider:t,visitorId:this.aspectSiteApi.getSiteAPI().getBiVisitorId(),mode:n.props.id,lang:n.props.language,privacyStatus:n.getJoinCommunityStatus()}),n.startLoader()}function b(){var t=this.aspectState.read("pendingMemberId");s.resendEmailVerification(t,e.noop,e.noop)}function E(t,i){return e.includes(t.rendererModel.passwordProtectedPages,i)}function T(t,i,s){return!function(t,i){return e.includes(re[t.siteId].approvedPasswordPages,i)}(t,s)&&function(e,t,i){return t.passwordDigest||E(e,i)}(t,i,s)}function w(e,t,i){var s=t.requireLogin&&(!this.isLoggedIn()||!e.hasPageData(i));return!T(e,t,i)&&!s}function R(e,t){var i=e.getDataByQuery(t);return i&&i.pageSecurity||{}}function M(t,i,s,o){s&&F.call(this,n.SITE_MEMBER_EXIT_DIALOG,{context:t.props.biContext||t.props.id});var r=re[this.siteData.siteId].siteMember,a=this.aspectState.read("onCancelCallback");e.isFunction(a)&&!r.details&&a(),t.performCloseDialog(function(){this.aspectSiteApi.getActionQueue().runImmediately(function(){this.aspectState.update({dialogToDisplay:null,onCancelCallback:null,dialogProcessSuccessCallback:null,showDialogMessage:!1,smtoken:this.siteData.getSMToken()}),this.aspectState.delete("invokeResetPasswordDialogCb");var s=o||this.aspectState.read("nextPageInfo");t.endLoader(),i?s&&(e.invokeMap(this.onLoginSuccessCallbacks,"callback"),s.routerDefinition&&(s.isRefetchingPageAfterLogin=!0,delete s.pageId),this.aspectSiteApi.navigateToPage(s)):s&&s.pageId===this.siteData.getCurrentUrlPageId()&&(k.call(this),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()}))}.bind(this))}.bind(this))}function k(){!0!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!0})}function O(e,t){e.postMessage({src:"wix-social-login",type:t,action:"revoke"},"*")}function x(t,i,s){!function(e){oe?oe.then(e):e()}(function(){!function(e){return e.payload.hasOwnProperty("sessionToken")&&null===e.payload.sessionToken&&!e.payload.emailVerified}(i)?(i.httpOnlySession||function(e,t){var i=e.cookieName||ee.SM_SESSION,s=e.sessionToken,n=e.rememberMe?e.expirationDate:0;Q.setCookie(i,s,n,t.currentUrl.hostname,t.getMainPagePath(),!1)}(i.payload,this.siteData),N.call(this,function(t,i,s){t.endLoader();var n=re[this.siteData.siteId].siteMember;n.details=i.payload.siteMemberDto,this.aspectState.update({memberDetails:n.details});var o=this.aspectState.read("dialogProcessSuccessCallback");e.isFunction(o)&&(o(n.details),this.aspectState.update({dialogProcessSuccessCallback:null}));var r=void 0;i.payload.pages&&(this.siteData.setPagesJsonFileName(i.payload.pages),r=this.aspectState.read("nextPageInfo")),M.call(this,t,!0,r),s&&this.aspectSiteApi.reportBI(s,{userName:n.details.attribute&&n.details.attribute.name||n.details.email})}.bind(this,t,i,s))):(this.aspectState.update({pendingMemberId:i.payload.siteMemberDto.id}),D.call(this,J.EmailVerification,void 0,t.props.language,function(){this.aspectState.update({pendingMemberId:null})}.bind(this)))}.bind(this))}function L(t,i){var s=re[this.siteData.siteId].siteMember;s.details=i.payload;var n=this.aspectState.read("dialogProcessSuccessCallback");e.isFunction(n)&&(n(s.details),this.aspectState.update({dialogProcessSuccessCallback:null})),_.call(this,X.SignUp,t)}function N(e){this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap").reloadClientSpecMap(e)}function B(e){F.call(this,n.SITE_MEMBER_NOTIFICATION_OPEN,{notification_name:e.notificationName})}function U(e){F.call(this,n.SITE_MEMBER_CLICK_LINK,{context:e.context,name:e.name})}function F(t,i){var s=this.aspectSiteApi.getSiteAPI().getBiVisitorId();s&&this.aspectSiteApi.reportBI(t,e.merge(i||{},{visitor_id:s}))}function V(e,i){return t.translationsLoader.getTranslation("siteMembersTranslations",e,i)}function q(e,t){M.call(this,e,!0),function(e){re[this.siteData.siteId].approvedPasswordPages.push(e)}.call(this,t.pageId),this.aspectSiteApi.navigateToPage(t),this.aspectState.update({passwordDigest:null})}function W(e){switch(this.aspectState.read("dialogToDisplay")){case J.Login:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog",l($.Login,e))}(e);case J.SignUp:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog",l($.SignUp,e))}(e);case J.ResetPasswordEmail:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog",l($.ResetPasswordEmail,e))}(e);case J.ResetPasswordNewPassword:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog",l($.ResetPasswordNewPassword,e))}(e);case J.Notification:return function(e){return c("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog",l($.Notification,e))}(e);case J.PasswordProtected:return p(e);case J.EmailVerification:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog","emailVerificationDialog",l($.EmailVerification,e))}(e);case J.SentConfirmationEmail:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog","sentConfirmationEmailDialog",l($.SentConfirmationEmail,e))}(e);case J.Welcome:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog","welcomeDialog",l($.Welcome,e))}(e);case J.NoPermissionsToPage:return function(e){return c("wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog","noPermissionsToPageDialog",l($.NoPermissionsToPage,e))}(e);case J.AdminLogin:return p(e);default:return null}}function G(){"undefined"==typeof window||oe||(oe=new r(function(e){setTimeout(function(){requirejs(t.allPackages(),e)},Y)})),this.aspectState.read("stopShowDialog");var i=void 0;switch(this.aspectState.read("dialogToDisplay")){case J.Login:i=h;break;case J.SignUp:i=g;break;case J.ResetPasswordEmail:i=f;break;case J.ResetPasswordNewPassword:return v.call(this);case J.Notification:i=A.bind(this);break;case J.Credits:i=e.noop;break;case J.PasswordProtected:i=S;break;case J.EmailVerification:i=m;break;case J.SentConfirmationEmail:i=y;break;case J.Welcome:i=P;break;case J.NoPermissionsToPage:i=I;break;default:return{}}return function(){return e.includes(Z,this.aspectState.read("dialogToDisplay"))}.call(this)&&function(){var t=e.merge({context:this.aspectState.read("dialogToDisplay"),has_social:!!d(this.siteData)},{initator:"unknown"});F.call(this,n.SITE_MEMBER_AUTH_DIALOG_OPENED,t)}.call(this),function(e){var t={};return t.language=this.aspectState.read("languageToDisplay"),t.onCloseDialogCallback=M.bind(this),t.notClosable=this.aspectState.read("notClosable"),t.checkCommunityCheckbox=this.aspectState.read("checkCommunityCheckbox"),e.call(this,t),t}.call(this,i)}function H(e){this.aspectState.update({initiatorAppId:e.appId});var t=u(this.siteData,e.showLoginDialog);D.call(this,t,e.successCallback,e.language,e.cancelCallback,e.checkCommunityCheckbox)}function K(t){this.onLoginSuccessCallbacks=[],this._memberDetailsChangeRegisteredComps={},this.aspectSiteApi=t,this.siteData=t.getSiteData(),this.aspectState=function(t){return{read:function(i){var s=t.getAspectGlobalData("siteMembers");return i?e.get(s,i):s},update:function(e){t.updateAspectGlobalData("siteMembers",e)},delete:function(i){var s=e.set(t.getAspectGlobalData("siteMembers"),i,void 0);t.updateAspectGlobalData("siteMembers",s)}}}(this.aspectSiteApi);var i=z(this.siteData);this.aspectState.update({dialogProcessSuccessCallback:null,onCancelCallback:null,showDialogMessage:!1,passwordDigest:null,nextPageInfo:null,dialogToDisplay:i,notificationToDisplay:null,languageToDisplay:te,notClosable:!1,smtoken:this.siteData.getSMToken(),memberDetails:null}),function(e){re[e.siteId]={approvedPasswordPages:[],siteMember:{details:null}}}(this.siteData),s.initializeData(this.siteData),e.bindAll(this,e.functionsIn(this)),this.aspectSiteApi.registerClientSpecMapUpdateCallback(function(){this.aspectState.update({smtoken:this.siteData.getSMToken()})}.bind(this))}function z(t){return e.has(t.currentUrl.query,"forgotPasswordToken")?J.ResetPasswordNewPassword:Q.getCookie(ee.SM_EF)?function(e){if(function(e){return!!e.getClientSpecMapEntryByAppDefinitionId(ie.MEMBER_AREA)}(e))return J.Welcome;return Q.deleteCookie(ee.SM_EF,e.currentUrl.hostname,e.getMainPagePath()),null}(t):null}r=r||Promise;var j=t.hashUtils,Q=t.cookieUtils,Y=500,J={Login:"login",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword",EmailVerification:"emailVerification",SentConfirmationEmail:"sentConfirmationEmail",Welcome:"welcome",NoPermissionsToPage:"noPermissionsToPage"},Z=[J.Login,J.SignUp],X={SiteOwner:"siteowner",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword"},$={Login:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinSocialMobile"},SignUp:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinSocialMobile"},ResetPasswordEmail:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinNew"},ResetPasswordNewPassword:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinNew"},Notification:{themeStyled:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinNew"},PasswordProtected:{themeStyled:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinNew"},EmailVerification:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinFixed"},SentConfirmationEmail:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.sentConfirmationEmail"},Welcome:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinFixed"},NoPermissionsToPage:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.noPermissionsToPage"}},ee={SV_SESSION:"svSession",SM_SESSION:"smSession",WIX_CLIENT:"wixClient",SM_EF:"sm_ef"},te="en",ie={MEMBER_AREA:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",MEMBER_INFO:"14cffd81-5215-0a7f-22f8-074b0e2401fb"},se={MEMBER_INFO:"member_info"},ne="_signedInUser_",oe=void 0,re={};return K.prototype={getComponentsToRender:function(e){return this.aspectState.read("dialogToDisplay")?[{structure:W.call(this,e.getSiteData()),props:G.call(this)}]:null},isLoggedIn:function(){return!!this.aspectState.read("smtoken")},showAuthenticationDialog:function(e){requirejs.defined("dialogs")?H.call(this,e):requirejs(["dialogs"],H.bind(this,e))},getMemberDetailsInternal:function(t,i,n,o){i=e.isFunction(i)?i:e.noop;var r=re[this.siteData.siteId].siteMember;return!this.isLoggedIn()&&!o||r.details&&!n?(t&&t(r.details),r.details):(s.getMemberDetails(this.aspectState.read("smtoken"),function(i){r.details=i.payload,this.aspectState.update({smtoken:this.siteData.getSMToken(),memberDetails:r.details}),n&&function(){var t=this.aspectState.read("memberDetails");e.forEach(this._memberDetailsChangeRegisteredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"MEMBER_DETAILS_UPDATED",params:t})})}.call(this),t&&t(r.details)}.bind(this),i,o),null)},getMemberDetails:function(e,t,i){return this.getMemberDetailsInternal(e,t,i)},getMemberDetailsInPreview:function(e,t,i){return s.initializeData(this.siteData),this.getMemberDetailsInternal(e,t,i,!0)},isPageAllowed:function(e){if(this.aspectSiteApi.getRenderFlag("isPageProtectionEnabled")){var t=e.pageId;return w.call(this,this.siteData,R(this.siteData,t),t)}return!0},showDialogOnNextRender:function(t){(function(){!1!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!1})}).call(this);var i=this.aspectState.read("logoutState");!1!==i&&this.aspectState.update({logoutState:!1});var s=t.pageId,n=R(this.siteData,s),o=w.call(this,this.siteData,n,s),r=function(t,i,s){if(e.has(t.currentUrl.query,"forgotPasswordToken"))return J.ResetPasswordNewPassword;if(T(t,i,s))return J.PasswordProtected;if(i.requireLogin){if(!this.isLoggedIn())return u(t);if(!t.hasPageData(s))return J.NoPermissionsToPage}return null}.call(this,this.siteData,n,s);if(!this.aspectState.read("dialogToDisplay")&&!o)if(!0===i&&t&&t.pageId===this.siteData.getCurrentUrlPageId())this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()});else{var a=function(e,t,i){return{showDialogMessage:!0,nextPageInfo:e,dialogToDisplay:t,languageToDisplay:i&&i.dialogLanguage||te,passwordDigest:i&&i.passwordDigest||void 0,notClosable:e.pageId===this.siteData.getCurrentUrlPageId()}}.call(this,t,r,n);this.aspectState.update(a)}},logout:function(t,i,n){i=e.isFunction(i)?i:e.noop,n=e.isFunction(n)?n:e.noop;var o=re[this.siteData.siteId].siteMember;if(Q.getCookie(ee.WIX_CLIENT)&&o.details&&o.details.owner)_.call(this,X.SiteOwner,t),n("Current member is the site owner, which can not be logout");else{this.aspectState.update({logoutState:!0}),Q.deleteCookie(ee.SV_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath());var r={siteMember:o};Q.getCookie(ee.SM_SESSION)?(Q.deleteCookie(ee.SM_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath()),function(e,t){N.call(this,function(){e.siteMember.details=null,this.aspectState.update({notificationToDisplay:null}),this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").updateWixCodeModelDataAfterLogin(),t()}.bind(this))}.call(this,e.merge(r,{isHttpOnlySession:!1}),i)):s.logout(function(){this.aspectSiteApi.getSiteAPI().reloadPage()}.bind(this),n)}},showResetPasswordDialog:function(t,i,s){D.call(this,J.ResetPasswordEmail,i,t,s),e.isFunction(i)&&this.aspectState.update({invokeResetPasswordDialogCb:!0})},forceCloseDialog:function(){k.call(this)},reportSiteMembersBi:function(e,t){F.call(this,n[e],t)},registerToUserLogin:function(t){var i=e.uniqueId("callback");return this.onLoginSuccessCallbacks.push({id:i,callback:t}),i},unRegisterToUserLogin:function(t){var i=e.findIndex(this.onLoginSuccessCallbacks,{id:t});-1!==i&&e.pullAt(this.onLoginSuccessCallbacks,i)},registerToMemberDetailsChange:function(e){this._memberDetailsChangeRegisteredComps[e.props.id]=e},unRegisterMemberDetailsChange:function(e){delete this._memberDetailsChangeRegisteredComps[e.props.id]}},i.registerSiteAspect("siteMembers",K),{getInitialDialogToDisplay:z}}),define("core/core/dataRequirementsChecker",["utils","lodash","coreUtils","siteUtils","core/core/pageRequests","core/core/externalStyles","core/core/requireCompCode","core/siteRender/SiteMembersAspect","experiment"],function(e,t,i,s,n,o,r,a,c){"use strict";function p(e,i,s){var n=s.styleId&&e.getDataByQuery(s.styleId,i,e.dataTypes.THEME),o=[n?n.skin:s.skin];return s.modes?o.concat(t(s.modes.overrides).flatMap(t.partial(p,e,i)).compact().value()):o}function l(e,t,i){return{design:i.designQuery?e.getDataByQuery(i.designQuery,t,e.dataTypes.DESIGN):null,data:i.dataQuery?e.getDataByQuery(i.dataQuery,t):null,properties:i.propertyQuery?e.getDataByQuery(i.propertyQuery,t,e.dataTypes.PROPERTIES):null,style:i.styleId?e.getDataByQuery(i.styleId,t,e.dataTypes.THEME):null,skins:p(e,t,i),id:i.id,pageId:t}}function d(e,i,s){var n=t.get(i.pagesData[m],["data","document_data",s]),o=n&&n.pageSecurity;return o&&o.requireLogin&&r.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog")||[]}function u(e,i,n,o,a){var c=l(e,n,o),p=s.jsonUpdaterRegistrar.getCompPlugin(o.componentType);if(p){o=p(o,function(t){var i=t.id===o.id?c:l(e,n,t);return{dataItem:i.data,propertiesItem:i.properties}})}t.has(v,o.componentType)&&(a[o.componentType]=a[o.componentType]||[],a[o.componentType].push(c));var d=y[o.componentType],h=d?d(e,c,i):[],g=r.get(e,o.componentType);g&&h.push(g);var m=f.getChildrenData(o,e.isMobileView());return t.reduce(m,function(t,s){return t.concat(u(e,i,n,s,a))},h)}function h(e,i,s){var n=t.isArray(s)?s:[s],o={},a=i.pagesData,c=u(e,n[0],m,a[m].structure,o);c=t.reduce(n,function(s,n){return s.concat(u(e,n,n.pageId,a[n.pageId].structure,o),function(e,t,i){if(!i.pageItemId)return[];var s=t.pagesData[m],n=s.data.document_data[i.pageItemId];if(!n||"PermaLink"!==n.type)return[];var o=s.data.document_data[n.dataItemRef.replace(/^#/,"")];if(!o)return[];var r=s.data.component_properties[n.dataItemRef.replace(/^#/,"")],a=y["Zoom:"+o.type];if(a)return a(e,{data:o,properties:r},i);return[]}(e,i,n),function(e,i,s){return t.flatMap(s,function(t,s){return(0,v[s])(e,t,i)})}(e,n,o),function(e,i){return t(A).map(function(t,s){var n=e.getClientSpecMapEntryByAppDefinitionId(s);if(n)return t(e,n,i)}).compact().flatten().value()}(e,n),d(e,i,n.pageId))},c);return t.get(e,"publicModel.pageList.pages")&&(c=t.reduce(e.publicModel.pageList.pages,function(t,s){return t.concat(d(e,i,s.pageId))},c)),c.concat(function(e){var t=[],i=e.getExistingRootNavigationInfo(e.getFocusedRootId());if(i.pageItemId){var s=e.getDataByQuery(i.pageItemId);if(s){var n=r.forDataItem(e,s.type);n&&t.push(n)}}return t}(e))}function g(e,s){var n=[s];return e.isPopupPage(s.pageId)&&n.push(e.getExistingRootNavigationInfo(e.getPrimaryPageId())),e.publicModel&&(n=t.filter(n,function(s){var n=t.find(e.publicModel.pageList.pages,{pageId:s.pageId});return t.has(n,"pageJsonFileName")||i.errorPages.isErrorPage(s.pageId)||function(e,i){return t.includes(e.rendererModel.passwordProtectedPages,i.pageId)}(e,s)})),n}var f=e.dataUtils,m="masterPage",y={},v={},A={};return e.sessionFreezer.freeze(y),e.sessionFreezer.freeze(v),e.sessionFreezer.freeze(A),{getNeededRequests:function(e,s,p){e.santaBase=e.santaBase||e.serviceTopology.scriptsLocationMap.santa;var l=g(e,p),d=void 0;if(function(e,i,s){return!t.isEmpty(s.pagesData[e.MASTER_PAGE_ID])&&t.every(i,function(e){return!t.isEmpty(s.pagesData[e.pageId])})}(e,l,s))d=h(e,s,l);else{d=n(e,s,l);if(a.getInitialDialogToDisplay(e)){var u=r.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog");u&&d.push(u)}}if("preview"===e.renderFlags.componentViewMode&&"Template"!==e.rendererModel.siteInfo.documentType&&c.isOpen("sv_selectiveTranslations",e)){var f,y=i.siteDataUtils.getRequestModel(e),v=i.wixUserApi.getLanguage(y.cookie,e.currentUrl,y.language),A=t(l).map(function(e){return t.get(s,["pagesData",m,"data","document_data",e.pageId,"pageSecurity","dialogLanguage"])}).compact().value(),S=i.translationsLoader.getRequests(e,[v].concat(_toConsumableArray(A)));(f=d).push.apply(f,_toConsumableArray(S))}else i.translationsLoader.setToUseOldTranslations();return function(e){return!e.isInSSR()&&!e.isClientAfterSSR()||t.every(o.getStylesIds(e),function(i){return t.has(e.externalStyles,i)})}(e)||d.push.apply(d,o.getRequests(e)),d},registerCheckerForCompType:function(e,t){y[e]=t},registerCheckerForAllCompsOfType:function(e,t){v[e]=t},registerCheckerForAppDefId:function(e,t){A[e]=t}}}),define("core/core/data/apiSections/AnchorsDataAPI",["lodash","utils","siteUtils","coreUtils","experiment"],function(e,t,i,s,n){"use strict";function o(t){var n=function(t){return s.DALFactory.getFullPagesData(t,e.pick(t,"pagesData")).pagesData.masterPage.structure}(t.siteData);return i.masterPageLayout.shouldApplyMobileTightLayout(n)}function r(i,s,r,a,c){var p=i.siteData,l=function(i,s,r,a){var c=i.siteData;if(n.isOpen("sv_useMobileTightLayout",c)&&a.forceMobileStructure&&o(i))return t.layoutAnchors.createMobileTightMasterPageAnchors(s,r,a);var p=e.get(c,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createPageAnchors(s,r,a,p)}(i,s,r,a),d={PAGES_CONTAINER:[{distance:0,locked:!0,originalValue:0,fromComp:"PAGES_CONTAINER",targetComponent:"masterPage",type:"BOTTOM_PARENT"}],SITE_PAGES:[{distance:0,locked:!0,originalValue:0,fromComp:"SITE_PAGES",targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]};e.set(p,["anchorsMap",s.id,c],l),e.set(p,["anchorsMap","defaultMasterPage",c],l),e.set(p,["anchorsMap","landingPageMasterPage",c],d)}function a(t,i){var s=t.getMasterPageLayoutSettings();return{headerPagesContainerLegacyGap:e.get(s,["headerToPagesGap"]),pagesContainerFooterLegacyGap:e.get(s,["pagesToFooterGap"]),useDesktopSectionsLayout:e.get(s,["useDesktopSectionsLayout"]),forceMobileStructure:e.get(i,"forceMobileStructure",t.isMobileView()),applyGroupingAnchors:n.isOpen("sv_mobileGroupingAnchors",t)&&e.get(i,"applyGroupingAnchors",t.isMobileView()&&t.isViewerMode())}}function c(e,t,i){this.privatesKey=e;var s=e.getRequestedLayoutMechanism();p.set(e,{siteData:e,forcedLayoutMechanism:s,displayedDAL:i,pointers:t})}var p=new t.SiteDataPrivates,l=t.constants.LAYOUT_MECHANISMS.ANCHORS;return c.prototype={getLayoutMechanism:function(){var e=p.get(this.privatesKey),t=e.displayedDAL,i=e.pointers,s=e.siteData,o=e.forcedLayoutMechanism,r=(i&&t?function(e,t){return t.get(e.getInnerPointer(e.data.getDataItemFromMaster("masterPage"),"layoutSettings"))||{}}(i,t):{}).mechanism,a=function(){return n.isOpen("sv_meshLayout",s)&&r?r:l};return o||a()},createPageAnchors:function(i,s){var n=p.get(this.privatesKey),o=n.siteData,c=n.displayedDAL,l=n.pointers,d=o.getPageData(i,["structure"]);if(d){var u=o.getAllTheme(),h=a(o,s),g=h.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP;if(this.getLayoutMechanism()!==t.constants.LAYOUT_MECHANISMS.MESH)if(d.id===t.siteConstants.MASTER_PAGE_ID)r(n,d,u,h,g);else{var f=e.get(o,["displayedOnlyComponents","componentTemplateId"]),m=t.layoutAnchors.createPageAnchors(d,u,h,f);e.set(o,["anchorsMap",d.id,g],m)}else t.meshLayoutGenerator.createMeshForPage({siteData:o,displayedDAL:c,pointers:l},d,g)}},removePageOriginalValues:function(i,s){var n=p.get(this.privatesKey).siteData,o=n.getPageData(i,["structure"]),r=s?t.constants.VIEW_MODES.MOBILE:n.getViewMode();e.set(n,["originalValuesMap",o.id,r],{})},createChildrenAnchors:function(i,s,r){var c=p.get(this.privatesKey),l=c.siteData,d=a(l,r),u=e.get(l,["pagesData",s,"structure","id"]),h=d.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP;if(this.getLayoutMechanism(s,h)!==t.constants.LAYOUT_MECHANISMS.MESH){if(l.anchorsMap[s]){var g=function(i,s,r){var a=s.siteData;if(i.id===t.siteConstants.MASTER_PAGE_ID&&n.isOpen("sv_useMobileTightLayout",a)&&r.forceMobileStructure&&o(s))return t.layoutAnchors.createMobileTightSectionsAnchors(i);var c=a.getAllTheme(),p=e.get(a,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createChildrenAnchors(i,c,r,a,p)}(i,c,d);e.assign(l.anchorsMap[u][h],g)}}else t.meshLayoutGenerator.createMeshForContainer(c,i,s,h)}},c}),define("core/core/data/structureInfoGetter",[],function(){"use strict";return function(e,t,i){return function(s){var n={};if(s.dataQuery){var o=e.data.getDataItem(s.dataQuery.replace("#",""),i);n.dataItem=t.get(o)}if(s.propertyQuery){var r=e.data.getPropertyItem(s.propertyQuery.replace("#",""),i);n.propertiesItem=t.get(r)}return n}}}),define("core/core/data/ViewerDisplayedJsonUpdater",["lodash","utils","core/core/data/apiSections/AnchorsDataAPI","core/core/data/structureInfoGetter"],function(e,t,i,s){"use strict";function n(e){return e&&e.length>0&&"pagesData"===e[0]}function o(t,i){var s=this.fullCache.getPath(t);if(!s)throw new Error("pointer path does not exist");if(function(t){return e.isEqual(t,["pagesData"])}(s)){var o=e.get(this.fullJson,s);r.call(this,o,i)}else if(n(s))c.call(this,t,i);else{var a=e.get(this.fullJson,s);this.displayedJsonDAL.set(t,a)}}function r(t,i){var s=this.pointers.page.getAllPagesPointer();this.displayedJsonDAL.set(s,{}),t.masterPage&&a.call(this,i,"masterPage"),e(t).omit("masterPage").keys().forEach(a.bind(this,i))}function a(e,t){e[t]=e[t]||{};var i=this.pointers.page.getPagePointer(t)||this.pointers.page.getNewPagePointer(t);this.displayedJsonDAL.set(i,{}),c.call(this,i,e)}function c(i,o){var r=this.fullCache.getPath(i);if(!r||this.displayedJsonDAL.isPathExist(e.initial(r))){var a=e.take(r,2),c=e.last(a),l=e.get(this.fullJson,r);if(n(r)&&!function(i){return i&&e.includes(t.constants.DATA_TYPES,i.type)}(i)){var d=l.structure?l.structure:l;o[c]=function(i,s,n){var o=t.modes.resolveCompActiveModesRecursive(i,s);e.assign(s,o);var r=this.pointers.general.getActiveModes(),a=this.pointers.getInnerPointer(r,n);return this.displayedJsonDAL.set(a,s),s}.call(this,d,o[c],c);var u=this.pointers.page.isPointerPageType(i)?s(this.pointers,this.fullJsonGetters,c):s(this.pointers,this.displayedJsonDAL,c),h=t.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(l,o,c,u,this.pointersMapApi);p.call(this,i,h,a),this.pointers.page.isPointerPageType(i)||this.pointers.components.isPage(i)?(this.updateDisplayedLayoutFunc(this.pointers.components.getPage(c,t.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(c,t.constants.VIEW_MODES.MOBILE)),this.anchorsAPI.createPageAnchors(c)):this.updateDisplayedLayoutFunc(i)}else this.displayedJsonDAL.set(i,t.objectUtils.cloneDeep(l))}}function p(i,s,n){if(function(e){return"page"===this.pointers.getPointerType(e)}.call(this,i))e.get(this.displayedJsonDAL.jsonData,n)?e.isEqual(this.displayedJsonDAL.get(i),s)||this.displayedJsonDAL.merge(i,s):this.displayedJsonDAL.set(i,s);else{var o=this.displayedJsonDAL.isExist(i)&&this.displayedJsonDAL.get(i);s.structure&&!e.isEqual(o,s.structure)&&e.forEach(this.pointers.components.getAllDisplayedOnlyComponents(i),function(i){var n=t.displayedOnlyStructureUtil.getItemId(i.id);if(n){var o=this.displayedJsonDAL.get(this.pointers.getInnerPointer(i,"layout")),r=t.displayedOnlyStructureUtil.getUniqueStructure(s.structure,n,this.pointersMapApi.update);this.displayedJsonDAL.set(i,e.defaults({layout:o},r))}else this.displayedJsonDAL.set(i,s.structure)}.bind(this))}}function l(e,t,i){e.components.registerDisplayedOnlyComponent(t,i)}function d(e,t){e.components.clearDisplayedOnlyComponents(t)}function u(s,n,o,r,a){n&&(this.fullJson=s,this.displayedJsonDAL=n,this.fullCache=o,this.pointers=r,this.anchorsAPI=new i(n.jsonData,r,n),this.pointersMapApi=function(t){return{update:e.partial(l,t),clear:e.partial(d,t)}}(r),this.fullJsonGetters={get:function(i){var n=o.getPath(i);return t.objectUtils.cloneDeep(e.get(s,n))}},this.updateDisplayedLayoutFunc=a)}return u.prototype={updateDisplayedJsonByPointer:o,updateDisplayedJsonInPagesDataByPointer:c,updateDisplayedPagesData:r,updateDisplayedRoot:function(e,i,n,o){var r=i.structure.id||n,a=s(this.pointers,this.fullJsonGetters,r),c=t.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(i,e,r,a,this.pointersMapApi,o),l=this.pointers.page.getPagePointer(r)||this.pointers.page.getNewPagePointer(r),d=this.fullCache.getPath(l);return p.call(this,l,c,d),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(r,t.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(r,t.constants.VIEW_MODES.MOBILE)),c}},u}),define("core/core/data/apiSections/documentDataAPI",["lodash","utils"],function(e,t){"use strict";function i(i,s,n){var o=function(t,i,s,n){var o=t.cache.getBoundCacheInstance(!0),r=t.pointers.full.components.getPage(i,n),a=r&&t.pointers.full.components.getComponent(s,r),c=a&&o.getPath(a);return c?e.get(t.fullPagesData,c):null}(i,s,t.displayedOnlyStructureUtil.getOriginalId(n),i.siteData.getViewMode());return t.dataUtils.getAllCompsInStructure(o,i.siteData.isMobileView())}function s(t,s,n){var o=t.siteDataAPI.runtime,r=i(t,s,n);return e.reduce(r,function(t,i){var n=o.getDisplayedOnlyCompsForFullComp(i.id,s);return e.forEach(n,function(e){t[e.id]=e}),t[i.id]=i,t},{})}function n(t,i,s){var n=t.cache.getBoundCacheInstance(!0).getPath(t.pointers.getInnerPointer(i,s));return n?e.get(t.fullPagesData,n):null}function o(t,i){var s=t.cache.getBoundCacheInstance(!0).getPath(i);return s?e.get(t.fullPagesData,s):null}function r(e){return e.fullPagesData.pagesData}return function(t){var a={getAllCompsUnderRoot:e.partial(i,t),getFullAndDisplayedOnlyCompsUnderRoot:e.partial(s,t),getFullStructureProperty:e.partial(n,t),getFullDataItem:e.partial(o,t)};return(t.siteData.isInSSR()||window.isMockWindow)&&(a.getFullPagesData=e.partial(r,t)),a}}),define("core/core/data/PointersRuntimeCache",["lodash","utils"],function(e,t){"use strict";function i(i){return e.reduce(i,function(i,s){var n=function(i){var s=this._pointers.components.getAllDisplayedOnlyComponents(i);return e.filter(s,function(e){return t.displayedOnlyStructureUtil.isDisplayedComponent(e.id)})}.call(this,s);return e.forEach(n,function(e){i.push(e)}),i.push(s),i}.bind(this),[])}function s(t,s){this._roots=s,this._viewMode=t,this._compPointers=e(s).flatMap(function(e){var s=this._pointers.full.components.getPage(e,t);if(!s)return[];var n=this._pointers.full.components.getChildrenRecursively(s),o=i.call(this,n);return[s].concat(o)}.bind(this)).keyBy("id").value()}function n(e,t,i){this._compPointers={},this._pointers=e,this._displayedDal=t,this._documentAPI=i,this._roots=[],this._viewMode=null}var o=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE;return n.prototype={reset:function(){this._compPointers={}},isEmpty:function(){return e.isEmpty(this._compPointers)},getAllCompIds:function(t,i){return e.isEqual(this._roots,i)&&this._viewMode===t||s.call(this,t,i),e.keys(this._compPointers)},getCompPointer:function(i,n,o){if(!i)return null;var r=this._compPointers[i];return r&&(this._displayedDal.isExist(r)||function(i){if(t.displayedOnlyStructureUtil.isDisplayedComponent(i.id))return!1;var s=this._pointers.components.getAllDisplayedOnlyComponents(i);return!e.isEqual(s,[i])}.call(this,r))?r:(s.call(this,n,o),this._compPointers[i])},getCompDataId:function(e,t){if(!e)return null;var i=this._pointers.getInnerPointer(e,o[t]);return this._displayedDal.get(i)},getCompDataItemPointer:function(e,t,i){if(!e)return null;var s=void 0,n=void 0;i?s=this._documentAPI.getFullStructureProperty(e,o[t]):(n=this._pointers.getInnerPointer(e,o[t]),s=this._displayedDal.get(n));var r=null;return s&&(r=this._pointers.data.getItem(t,s.replace("#",""),function(e){return(this._pointers.full.components.getPageOfComponent(e)||this._pointers.components.getPageOfComponent(e)).id}.call(this,e))),r&&this._displayedDal.isExist(r)?r:null}},n}),define("core/core/data/RuntimeToDisplayed",["lodash","utils","coreUtils","siteUtils"],function(e,t,i,s){"use strict";function n(t,i,s,n,o){o=o||e.uniqueId(y);var r=this._pointers.getInnerPointer(t,h[i]);this._displayedDal.set(r,"#"+o);var a=this._pointers.data.getItem(i,o,function(e){return this._pointers.full.components.getPageOfComponent(e).id}.call(this,t));return n?this._displayedDal.set(a,s):this._displayedDal.set(a,e.assign({id:o},s)),a}function o(e,t,i){if("type"===i&&!e){if(t)return!0;throw new Error("data items have to be passed with a type")}return"id"===i}function r(t,i,s){if(i.type)return i;var n=null;if(s&&s.type)n=e.assign({},i,{type:s.type});else{if(t!==d.prop)throw new Error("data items have to be passed with a type");n=e.assign({},i,{type:"DefaultProperties"})}return n}function a(i,s,n,a){var c=this._pointers.data.getPageIdOfData(n),p=this._pointers.components.getPageOfComponent(a)&&this._pointers.components.getPageOfComponent(a).id,l=u[s],d=this._siteData.getDataByQuery(n.id,c,l);if(t.objectUtils.isSubset(d,i))return n;(function(t,i){var s=m.getDataRefsForDataItems(i,t.type);if(s){var n=e.keys(s),o=e.pick(t,n),r=e.filter(o,function(t){return t&&!e.includes(t.id,y)});return!e.isEmpty(r)}return!1}).call(this,d,l)&&(d=m.cloneDataItemWithNewRefIdsRecursively(d,l,y,this._siteData.getClonedDataItemsIdsMap(a.id)));var h=r(s,i,d),g=t.objectUtils.cloneAndConditionalMergeOfFields(h,d,o),f=m.getFlatMapOfNestedItem(g,l);return f=e.mapValues(f,function(e){return t.objectUtils.cloneDeep(e)}),this._displayedDal.merge(n,f[n.id]),delete f[n.id],e.forOwn(f,function(t,i){var n=function(t,i,s,n,o,r){return e.find([s,n],function(e){var s=t.data.getItem(r,o,e);return i.isExist(s)})||n}(this._pointers,this._displayedDal,p,c,i,s),o=this._pointers.data.getItem(s,i,n);this._pointers.data.validatePath(o),this._displayedDal.set(o,t)}.bind(this)),n}function c(e,t,i,s){var o=this._compPointersCache.getCompDataItemPointer(i,e,s);return o||(o=n.call(this,i,e)),a.call(this,t,e,o,i)}function p(e,t,i,s,n){this._pointers=i,this._displayedDal=t,this._siteData=e,this._compPointersCache=s,this._documentAPI=n}function l(t,i){var s=null;return s=e.isPlainObject(t)?t:this._compPointersCache.getCompPointer(t,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots()),i?s:s&&this._displayedDal.isExist(s)?s:null}var d=t.constants.DATA_TYPES,u=t.constants.PAGE_DATA_DATA_TYPES,h=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE,g={props:"props",data:"data",design:"design",layout:"layout",style:"style",actionsBehaviors:"actionsBehaviors",dynamicBehaviorsCounter:"dynamicBehaviorsCounter"},f="masterPage",m=s.dataResolver,y="_runtime_",v={};return v[g.dynamicBehaviorsCounter]=e.noop,v[g.data]=e.partial(c,d.data),v[g.style]=e.partial(c,d.theme),v[g.design]=e.partial(c,d.design),v[g.props]=function(s,o,a){var c=d.prop,p=this._compPointersCache.getCompDataItemPointer(o,c,a),l=i.displayedOnlyStructureUtil.isDisplayedComponent(o.id),u=p&&i.displayedOnlyStructureUtil.isDisplayedComponent(p.id),h=l&&!u;if(!p||h){var g=i.displayedOnlyStructureUtil.getItemId(o.id),f=i.displayedOnlyStructureUtil.getOriginalId(o.id),m=p?p.id:e.uniqueId(f+"_props"),y=h&&i.displayedOnlyStructureUtil.getUniqueDisplayedId(m,g);p=h?n.call(this,o,c,{},!1,y):n.call(this,o,c,{},!0)}var v=e.defaults({id:i.displayedOnlyStructureUtil.getOriginalId(o.id)},o),A=this._compPointersCache.getCompDataItemPointer(v,c,!0),S=A&&this._documentAPI.getFullDataItem(A),P=r(c,s,S),I=e.defaults({},P,S);return t.objectUtils.isSubset(this._displayedDal.get(p),I)||this._displayedDal.merge(p,I),p},v[g.actionsBehaviors]=function(t,s){var o=d.behaviors,r=this._compPointersCache.getCompDataItemPointer(s,o),a=i.displayedOnlyStructureUtil.isDisplayedComponent(s.id),c=r&&i.displayedOnlyStructureUtil.isDisplayedComponent(r.id),p=a&&!c;if(!r||p){var l=i.displayedOnlyStructureUtil.getItemId(s.id),u=i.displayedOnlyStructureUtil.getOriginalId(s.id),h=r?r.id:e.uniqueId(u+"_behavior"),g=p&&i.displayedOnlyStructureUtil.getUniqueDisplayedId(h,l);r=n.call(this,s,o,{type:"ObsoleteBehaviorsList"},!1,g)}var f=e.defaults({id:i.displayedOnlyStructureUtil.getOriginalId(s.id)},s),m=this._compPointersCache.getCompDataItemPointer(f,o,!0),y=m&&this._documentAPI.getFullDataItem(m),v=y&&y.items||[],A=(e.isString(v)?JSON.parse(v):v).concat(t),S=this._pointers.getInnerPointer(r,"items"),P=JSON.stringify(A);return e.isEqual(this._displayedDal.get(S),P)||this._displayedDal.set(S,P),S},v[g.layout]=function(e,t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.merge(i,e),i},Object.freeze(v),p.prototype={updateDataItem:function(e,t,i,s){var n=l.call(this,e,s);return n?v[t].call(this,i,n,s):null},updateActionsAndBehaviorsItems:function(e,t){var i=l.call(this,e);return i?v[g.actionsBehaviors].call(this,t,i):null},updateCompLayout:function(e,t){var i=l.call(this,e);return i?v[g.layout].call(this,t,i):null},updateCompStyle:function(t,i){var s=l.call(this,t);if(!s)return null;var n=this._displayedDal.get(s);if(!n.styleId)return null;n.styleId&&!e.includes(n.styleId,y)&&function(t){var i=this._displayedDal.get(t),s=i.styleId+e.uniqueId(y),n=this._pointers.getInnerPointer(t,h[d.theme]),o=this._pointers.data.getItem(d.theme,i.styleId),r=this._displayedDal.get(o),a=e.assign(e.cloneDeep(r),{id:s}),c=this._pointers.data.getItem(d.theme,s,f);this._displayedDal.set(n,s),this._displayedDal.set(c,a)}.call(this,s);var o=this._pointers.data.getItem(d.theme,n.styleId),r=this._displayedDal.get(o);return e.forOwn(i,function(t,s){e.defaultsDeep(i[s],r[s])}),v[g.style].call(this,i,s)},updateAll:function(t){var i=this,s=e.map(t,function(t,s){var n=t.overrides,o=l.call(i,s);return o?(e.forOwn(n,function(e,t){v[t].call(i,e,o)}),o):null});return e.compact(s)},OVERRIDE_TYPES:g},p}),define("core/core/data/RuntimeDal",["lodash","utils","core/core/data/PointersRuntimeCache","core/core/data/RuntimeToDisplayed"],function(e,t,i,s){"use strict";function n(e){return O.concat([e])}function o(e){return n(e).concat("state")}function r(e){return n(e).concat("overrides")}function a(e){return r(e).concat("props")}function c(e){return r(e).concat("data")}function p(e){return r(e).concat("style")}function l(e){return r(e).concat("design")}function d(e){return r(e).concat("layout")}function u(e){return r(e).concat("actionsBehaviors")}function h(e){return["runtime","popups",e]}function g(e){return h(e).concat("opened")}function f(e){return h(e).concat("context")}function m(t,i){return e.isEqual(i,e.pick(t,e.keys(i)))}function y(t,n,o,r){this._siteData=t,this._siteDataApi=n,this._pointers=r,this._displayedDal=o,this._changeListeners=[],this.snapshotId=0,this._roots=[],this._pointersCache=new i(r,o,n.document),this._runtimeToDisplayed=new s(t,o,r,this._pointersCache,n.document),this._siteDataApi&&this._siteDataApi.registerDisplayedJsonUpdateCallback(this._pointersCache.reset.bind(this._pointersCache)),this._displayedDal&&!this._displayedDal.isPathExist(O)&&v.call(this),e.bindAll(this,["registerChangeListener","getCompStructure","setCompState","removeCompState","getCompState","getCompType","getCompLayout","updateCompLayout","getCompDesign","setCompDesign","getCompData","setCompData","updateCompStyle","getCompStyle","getCompConnections","getCompProps","setCompProps","getActionsAndBehaviors","addActionsAndBehaviors","removeActionsAndBehaviors","getCompName","getBoundingClientRect","getPageId","getParentId","isDisplayed","hasBeenPopupOpened","markPopupAsBeenOpened","getDynamicPageData","setPopupContext","getPopupContext","getDisplayedOnlyCompsForFullComp","getChildrenIds","getAncestorOfType","clearCompRuntimeOverrides"])}function v(){var t=e.reduce(e.get(this._siteData,O),function(t,i,s){if(!e.has(i,"state"))return t;var n=e.pick(i,"state");return e.set(t,[s],n)},{});this._siteData.runtime={},e.set(this._siteData,O,t),this._pointersCache.reset()}function A(t,i){return e.get(t,e.head(i))}function S(t){return e.drop(t)}function P(t,i,s){var n=A(t,i),o=S(i);return e.get(n,o,s)}function I(t,i,s){var n=A(t,i),o=S(i);e.set(n,o,s)}function D(i,s,n,o){var r=this;return this._siteDataApi.getActionQueue().runImmediately(function(){var a=T.call(r,s),c=P(r._siteData,n,{}),p=e.assign({},c,i);if(I(r._siteData,n,p),!a)return null;var l=function(i){var s=!1;if(!t.displayedOnlyStructureUtil.isDisplayedComponent(i.id)){var n=this._pointers.components.getAllDisplayedOnlyComponents(i);s=!(1===n.length&&e.isEqual(n[0],i))}return s}.call(r,a),d=E.call(r,a),u=void 0;if(l){var h=r._pointersCache.getCompDataItemPointer(a,o,!0);u=h?"#"+h.id:null}else u=r._pointersCache.getCompDataId(a,o);var g=r._siteData.getDataByQuery(u,d,M[o]);if(r._runtimeToDisplayed.updateDataItem(a,o,p,l),!m(g,i)){var f={type:k[o],value:i};_.call(r,s,f,g)}}),++this.snapshotId}function _(t,i,s){e.forEach(this._changeListeners,function(e){e(t,i,s)})}function C(e,t,i){var s=T.call(this,e);return s?this._pointersCache.getCompDataItemPointer(s,t,i):null}function b(e,t){var i=this._pointers.data.getPageIdOfData(e);return this._siteData.getDataByQuery(e.id,i,M[t])}function E(e){return this._pointers.full.components.getPageOfComponent(e).id}function T(e){return this._pointersCache.getCompPointer(e,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots())}var w=["height","width"],R=t.constants.DATA_TYPES,M=t.constants.PAGE_DATA_DATA_TYPES,k={data:"dataChange",props:"propsChange",design:"designChange"},O=["runtime","components"];return e.assign(y.prototype,{registerChangeListener:function(e){this._changeListeners.push(e)},getCompStructure:function(e){var t=T.call(this,e);return t&&this._displayedDal.get(t)},setCompState:function(t,i){var s=this.getCompState(t),n=o(t),r=A(this._siteData,n),a=S(n);if(e.set(r,a,e.assign({},s,i)),!m(s,i)){var c={type:"stateChange",value:this.getCompState(t)};_.call(this,t,c,s)}return++this.snapshotId},removeCompState:function(t){var i=o(t),s=e.get(this._siteData,e.initial(i)),n=e.last(i);e.get(s,n)&&delete s[n]},getCompState:function(e){return P(this._siteData,o(e))},getCompType:function(e){var t=T.call(this,e);if(this._displayedDal.isExist(t)){var i=this._pointers.getInnerPointer(t,"componentType");return this._displayedDal.get(i)}return this._siteDataApi.document.getFullStructureProperty(t,"componentType")},getCompLayout:function(e){P(this._siteData,d(e));var t=T.call(this,e);if(t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.get(i)}},updateCompLayout:function(t,i){var s=this.getCompLayout(t),n=d(t),o=P(this._siteData,n,{}),r=e.assign({},o,i);if(this._runtimeToDisplayed.updateCompLayout(t,r),I(this._siteData,n,r),!m(s,i)){_.call(this,t,{type:"layoutChange",value:i},s)}return++this.snapshotId},getCompStyle:function(e){P(this._siteData,p(e));var t=C.call(this,e,R.theme);return t&&b.call(this,t,R.theme)},updateCompStyle:function(t,i){var s=p(t),n=P(this._siteData,s,{}),o=e.assign({},n,i);this._runtimeToDisplayed.updateCompStyle(t,o),I(this._siteData,s,o)},getCompDesign:function(e,t){P(this._siteData,l(e));var i=C.call(this,e,R.design,t);return i&&b.call(this,i,R.design)},setCompDesign:function(e,t){return D.call(this,t,e,l(e),R.design)},getCompData:function(e,t){P(this._siteData,c(e));var i=C.call(this,e,R.data,t);return i&&b.call(this,i,R.data)},setCompData:function(e,t){return D.call(this,t,e,c(e),R.data)},registerComponentEvent:function(e,t){var i={action:{type:"comp",name:t.eventType,sourceId:e},behavior:{type:"widget",targetId:t.contextId,params:{callbackId:t.callbackId,compId:e},name:"runCode"}};this.addActionsAndBehaviors(e,i)},getCompConnections:function(e){return function(e){var t=T.call(this,e);if(!t)return null;var i=this._siteDataApi.document.getFullStructureProperty(t,"connectionQuery");if(!i)return null;var s=R.connections,n=E.call(this,t),o=this._pointers.data.getItem(s,i.replace("#",""),n),r=this._displayedDal.get(o);return this._siteData.resolveData(r,n,M[s]).items}.call(this,e)||[]},getCompProps:function(e,t){P(this._siteData,a(e));var i=C.call(this,e,R.prop,t);return i&&b.call(this,i,R.prop)},setCompProps:function(e,t){return D.call(this,t,e,a(e),R.prop)},getActionsAndBehaviors:function(e){P(this._siteData,u(e));var t=C.call(this,e,R.behaviors),i=t&&b.call(this,t,R.behaviors);return i&&i.items||[]},addActionsAndBehaviors:function(e,t){var i=u(e),s=P(this._siteData,i,[]).concat(t);return this._runtimeToDisplayed.updateActionsAndBehaviorsItems(e,s),I(this._siteData,i,s),++this.snapshotId},removeActionsAndBehaviors:function(t,i){var s=u(t),n=P(this._siteData,s,[]);return e.remove(n,i),this._runtimeToDisplayed.updateActionsAndBehaviorsItems(t,n),I(this._siteData,s,n),++this.snapshotId},getCompName:function(t){var i=this.getCompConnections(t),s="WixCodeConnectionItem"===e.get(i,[0,"type"])&&i[0];return s?s.role:t},getCompPointer:T,getBoundingClientRect:function(t){var i=this._siteData.measureMap;return i?e.transform(w,function(e,s){e[s]=i[s][t]},{}):e.pick(this.getCompLayout(t),w)},getPageId:function(e){var t=T.call(this,e);return t?E.call(this,t):null},getParentId:function(e){var i=T.call(this,e),s=t.displayedOnlyStructureUtil.isDisplayedComponent(e)?this._pointers:this._pointers.full,n=i&&s.components.getParent(i);return n&&n.id},isDisplayed:function(e){var t=T.call(this,e);return!!t&&this._displayedDal.isExist(t)},hasBeenPopupOpened:function(e){return P(this._siteData,g(e),!1)},markPopupAsBeenOpened:function(e){var t=g(e);I(this._siteData,t,!0)},getDynamicPageData:function(){return this._siteData.getDynamicPageData()},getCompDataOverrides:function(e){return P(this._siteData,c(e))},getCompDesignOverrides:function(e){return P(this._siteData,l(e))},getCompBehaviorsOverrides:function(e){return P(this._siteData,u(e))},getCompPropsOverrides:function(e){return P(this._siteData,a(e))},setPopupContext:function(e,t){var i=f(e);I(this._siteData,i,t)},getPopupContext:function(e){return P(this._siteData,f(e))},getDisplayedOnlyCompsForFullComp:function(i,s){var n=this._displayedDal,o=this._pointers.full.components.getPage(s,this._siteData.getViewMode()),r=this._pointers.full.components.getComponent(i,o),a=this._pointers.components.getAllDisplayedOnlyComponents(r);return e.reduce(a,function(e,i){return t.displayedOnlyStructureUtil.isDisplayedComponent(i.id)&&e.push(n.get(i)),e},[])},getChildrenIds:function(i){var s=t.displayedOnlyStructureUtil.isDisplayedComponent(i)?this._pointers:this._pointers.full,n=T.call(this,i);return e.map(s.components.getChildren(n),"id")},getAncestorOfType:function(e,t){var i=this,s=this._pointers.full,n=T.call(this,e);return s.components.getAncestorByPredicate(n,function(e){return i.getCompType(e.id)===t})},clearCompRuntimeOverrides:function(t){!function(t,i){var s=A(t,i),n=S(i);e.unset(s,n)}(this._siteData,n(t))}}),{createRuntimeDal:function(t,i,s,n){var o=new y(t,i,s,n);return{runtimeDal:o,resetRuntime:v.bind(o),runtimeToDisplayed:o._runtimeToDisplayed,getAllCompsData:function(){return P(o._siteData,O,{})},resetNonDisplayedPages:function(){var t=this._siteData.getAllPossiblyRenderedRoots(),i=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),t),s=!1;if(!e.isEqual(t,this._roots)){var n=e.get(this._siteData,O),o=e.difference(e.keys(n),i),r=e.get(this._siteData,O);e.isEmpty(o)||(s=!0,e.forEach(o,function(e){delete r[e]}))}return this._roots=t,s}.bind(o),resetPage:function(t){var i=this._siteData.getAllPossiblyRenderedRoots(),s=!1,n=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),[t]),o=e.get(this._siteData,O);return o&&!e.isEmpty(n)&&(e.forEach(n,function(e){delete o[e]}),s=!0),this._roots=i,s}.bind(o)}}}}),define("core/core/data/apiSections/OriginalValuesAPI",["lodash","utils"],function(e,t){"use strict";function i(e){this.privatesKey=e,s.set(e,{siteData:e})}var s=new t.SiteDataPrivates;return i.prototype={createPageOriginalValuesMap:function(i,n){var o=s.get(this.privatesKey).siteData,r=o.getPageData(i,["structure"]),a=o.getAllTheme(),c=n?t.constants.VIEW_MODES.MOBILE:o.getViewMode(),p=c===t.constants.VIEW_MODES.MOBILE,l=t.originalValuesMapGenerator.createOriginalValuesMap(r,a,p);e.set(o,["originalValuesMap",r.id,c],l)},removePageOriginalValues:function(i,n){var o=s.get(this.privatesKey).siteData,r=o.getPageData(i,["structure"]),a=n?t.constants.VIEW_MODES.MOBILE:o.getViewMode();e.set(o,["originalValuesMap",r.id,a],{})}},i}),define("core/core/data/ActionQueue",["lodash","mobx"],function(e,t){"use strict";function i(t){this.queue=[],this.duringFlushQueue=[],this.isDuringFlush=!1,this.preFlushOp=e.noop,this.postFlushOp=e.noop,this.shouldThrowOnErrors=t}function s(i,n){e.forEach(i,function(i,o,r){var a=void 0;if(n)a=i();else try{a=i()}catch(e){}if(e.get(a,"then"))return function(i,n,o,r){i.then(function(i){t.action(function(){var t=e.slice(n,o+1);s(i?e.concat(i,t):t,r)})()})}(a,r,o,n),!1})}return i.prototype.addItem=function(e){this.queue.push(e)},i.prototype.flush=function(){if(this.isDuringFlush)e.isEmpty(this.queue)||(this.duringFlushQueue=this.queue);else{var i=this.queue;this.queue=[],this.preFlushOp(),t.runInAction(function(){this.isDuringFlush=!0,s(i,this.shouldThrowOnErrors),e.isEmpty(this.duringFlushQueue)||(s(this.duringFlushQueue,this.shouldThrowOnErrors),this.duringFlushQueue=[]),this.isDuringFlush=!1}.bind(this)),this.postFlushOp()}},i.prototype.runImmediately=function(e){this.isDuringFlush?e():(this.addItem(e),this.flush())},i.prototype.registerPreFlushOperation=function(e){this.preFlushOp=e},i.prototype.registerPostFlushOperation=function(e){this.postFlushOp=e},i}),define("core/core/data/apiSections/ModesApplicationAPI",["coreUtils","utils","lodash"],function(e,t,i){"use strict";function s(e,t,i){var s=function(e){return e.siteData.isMobileView()?c.VIEW_MODES.MOBILE:c.VIEW_MODES.DESKTOP}(e),n=e.pointers.components.getPage(i,s);return e.pointers.components.getComponent(t,n)}function n(e,t,s,n,o,r){this.privatesKey=e,l.set(e,{siteData:e,createDisplayedPage:t,createDisplayedNode:s,pointers:n,displayedDal:o,actionQueue:r}),i.bindAll(this,i.functionsIn(this))}function o(e,s,n,o,r){var a=e.pointers.activeModes.getPageActiveModes(s);e.displayedDal.isExist(a)||e.displayedDal.set(a,{});var c=e.pointers.activeModes.getPageActiveModes(s),p=e.pointers.componentStructure.getModesDefinitions(n),l=e.displayedDal.get(p),d=r&&i.find(l,{modeId:r}),u=o&&i.find(l,{modeId:o}),h=e.displayedDal.get(c),g=t.modes.getActiveModesForActivationChange(l,h,d,u);e.displayedDal.set(c,g)}function r(e,t,s){var n=e.pointers.activeModes.getPageActiveModes(t),o=e.displayedDal.get(n);if(!i.isEmpty(o)){var r=s?i.omitBy(o,s):{};return e.displayedDal.set(n,r),e.createDisplayedPage(t)}return!1}function a(e){return!function(e){return Boolean(p[e.modeType])}(e)}var c=t.constants,p={};p[e.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0;var l=new t.SiteDataPrivates;return n.prototype={resetAllActiveModes:function(){var e=l.get(this.privatesKey),t=e.pointers.activeModes.getAllActiveModes(),s=e.displayedDal.getKeys(t);i.forEach(s,function(t){r(e,t,a)})},deactivateModesInPage:function(e){return r(l.get(this.privatesKey),e)},getActiveModes:function(){var e=l.get(this.privatesKey),t=e.pointers.activeModes.getAllActiveModes(),s=e.displayedDal.getKeys(t);return i.reduce(s,function(e,t){var s=this.getPageActiveModes(t);return i.isEmpty(s)||(e[t]=s),e}.bind(this),{})},getPageActiveModes:function(e){var t=l.get(this.privatesKey),s=t.pointers.activeModes.getPageActiveModes(e),n=t.displayedDal.get(s);return i.pickBy(n)},activateModeById:function(e,t,i){var n=s(l.get(this.privatesKey),e,t);return this.activateMode(n,i)},activateMode:function(e,t){var i=l.get(this.privatesKey),s=i.pointers.full.components.getPageOfComponent(e);if(s&&s.id){var n=this.getActiveModes()[s.id];return(!n||!n[t])&&(i.actionQueue.runImmediately(function(){o(i,s.id,e,null,t),i.createDisplayedNode(e)}),!0)}return!1},deactivateModeById:function(e,t,i){var n=s(l.get(this.privatesKey),e,t);return this.deactivateMode(n,i)},deactivateMode:function(e,t){var i=l.get(this.privatesKey),s=i.pointers.full.components.getPageOfComponent(e);if(s&&s.id){var n=this.getActiveModes()[s.id];return!(!n||!n[t])&&(i.actionQueue.runImmediately(function(){o(i,s.id,e,t),i.createDisplayedNode(e)}),!0)}return!1},switchModesByIds:function(e,t,i,n){var o=s(l.get(this.privatesKey),e,t);return this.switchModes(o,i,n)},switchModes:function(e,t,i){var s=l.get(this.privatesKey);if(t===i)return!1;var n=s.pointers.full.components.getPageOfComponent(e),r=this.getActiveModes()[n.id]||{},a=!r[i]||r[t];return a&&s.actionQueue.runImmediately(function(){o(s,n.id,e,t,i),s.createDisplayedNode(e)}),a}},n}),define("core/core/SiteDataAPI",["utils","coreUtils","siteUtils","lodash","core/core/dataRequirementsChecker","core/core/data/ViewerDisplayedJsonUpdater","core/core/data/apiSections/documentDataAPI","core/core/data/RuntimeDal","core/core/data/apiSections/AnchorsDataAPI","core/core/data/apiSections/OriginalValuesAPI","core/core/data/ActionQueue","core/core/data/apiSections/ModesApplicationAPI","experiment"],function(e,t,i,s,n,o,r,a,c,p,l,d,u){"use strict";function h(e,i,n){var o=t.DALFactory.getFullPagesData(e,s.pick(e,"pagesData")),r=t.DALFactory.getCacheInstance(e,o),a=function(e,t,i,n,o,r){var a={};return a.fileChangeCallback=s.noop,a.displayedDal=t.dal,a.pointers=t.pointers,a.cache=i,a.fullPagesData=n,a.siteData=e,a.displayedDal.setByPath(["pagesData"],{}),a.siteDataAPI=new A(a,o),a.wixCodeAppApi=r&&r.wixCodeAppApi,a}(e,function(e,i){return{dal:t.DALFactory.getInstance(e),pointers:new t.pointers.DataAccessPointers(i)}}(e,r),r,o,i,n);return S.set(e,a),u.isOpen("sv_multilingual",e)&&t.multilingual.init(a.siteDataAPI),s.forEach(e.getAllPossiblyRenderedRoots(),function(e){a.siteDataAPI.createDisplayedPage(e)}),s.clone(a)}function g(e,t,i,o,r,a,c,p,l){function d(){e.runImmediately(function(){if(s.size(i.failedRequests)&&i.isInSSR())c(p);else{l&&c(p);var d=n.getNeededRequests(i,o,r),u=s.filter(d,function(e){return"pagesData"===s.head(e.destination)&&2===e.destination.length});p=(p||[]).concat(s.map(u,"destination[1]")),0!==d.length||l?t.loadBatch(d,g.bind(null,e,t,i,o,r,a,c,p)):c(p)}})}i.isViewerMode()&&u.isOpen("importScriptsOpt",i)&&a&&a.isAppInitiated()?setTimeout(d,10):d()}function f(e,t,i,n){(function(e,t,i,n){if(m(i)){s.set(t,i,n);var o=i[1];(function(e,t){"masterPage"===e||t.siteData.pagesData.masterPage?"masterPage"===e?(this.updateDisplayedJsonAfterPageLoaded(e),s.forEach(this.pagesPendingForMasterPage,this.updateDisplayedJsonAfterPageLoaded.bind(this)),this.pagesPendingForMasterPage=[]):this.updateDisplayedJsonAfterPageLoaded(e):this.pagesPendingForMasterPage.push(e)}).call(this,o,e)}else y(i)?s.set(e.siteData,i,n):e.displayedDal.setByPath(i,n)}).call(this,e,t,i,n),"pagesData"!==s.head(i)&&e.dataLoadedCallback&&e.dataLoadedCallback(i,n)}function m(e){return"pagesData"===s.head(e)&&s.size(e)>1}function y(e){var t=e[0];return!!P[t]}function v(t,i){if(i){var n=t.fullPagesData.pagesData[i],o=t.siteData.isMobileView(),r=t.pointers.activeModes.getPageActiveModes(i),a=t.displayedDal.get(r),c=e.modes.resolveCompActiveModesRecursive(n.structure,a,o,n.data.component_properties);t.displayedDal.set(r,c);return!s.isEqual(a,c)}}function A(t,i){t.displayedJsonUpdater=function(e,t){var i=e.fullPagesData,s=e.cache,n=e.displayedDal,r=e.pointers,a=s.getBoundCacheInstance(!0);return new o(i,n,a,r,t)}(t,this.updateDisplayedNodesLayout.bind(this)),t.dataLoadedCallback=null,this.siteData=t.siteData,this.store=new e.Store(function(e){var t=e.fullPagesData,i=e.displayedDal,n=e.siteData;return function(e){return m(e)?s.get(t,e):y(e)?s.get(n,e):i.getByPath(e)}}(t),i),this.store.registerDataLoadedCallback(s.bind(f,this,t,t.fullPagesData)),this.siteData.setStore(this.store),this._displayedJsonUpdateCallbacks=[],this.pagesPendingForMasterPage=[],this.actionQueue=new l(this.siteData.hasDebugQueryParam()||this.siteData.isQaMode()),this.document=r(t);var n=a.createRuntimeDal(t.siteData,this,t.displayedDal,t.pointers);t.runtimeToDisplayed=n.runtimeToDisplayed,t.resetRuntimeData=n.resetRuntime,t.resetRuntimeNonDisplayedPages=n.resetNonDisplayedPages,t.resetPage=n.resetPage,t.getRuntimeCompsData=n.getAllCompsData,this.runtime=n.runtimeDal,this.anchors=new c(this.siteData,t.pointers,t.displayedDal),this.originalValues=new p(this.siteData),this.modes=new d(this.siteData,this.createDisplayedPage.bind(this),this.createDisplayedNode.bind(this),t.pointers,t.displayedDal,this.actionQueue)}var S=new e.SiteDataPrivates,P=s.keyBy(["wixapps","externalStyles"]);return A.prototype={registerDataLoadedCallback:function(e){S.get(this.siteData).dataLoadedCallback=e},refreshRenderedRootsData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.noop,t=S.get(this.siteData),i=this.siteData.getFocusedRootId(),n=this.siteData.getExistingRootNavigationInfo(i);g(this.actionQueue,this.store,t.siteData,t.fullPagesData,n,t.wixCodeAppApi,e)},registerDisplayedJsonUpdateCallback:function(e){this._displayedJsonUpdateCallbacks.push(e)},loadPage:function(e,t){var i=this,n=S.get(this.siteData);g(this.actionQueue,this.store,n.siteData,n.fullPagesData,e,n.wixCodeAppApi,function(o){!e.pageId||s.includes(o,e.pageId)||n.siteData.isFirstRenderAfterSSR()||i.updateDisplayedJsonAfterPageLoaded(e.pageId),s.forEach(o,function(e){if(n.dataLoadedCallback){var t=n.fullPagesData.pagesData[e];n.dataLoadedCallback(["pagesData",e],t)}}.bind(i)),t()},[])},resetRuntimeOverrides:function(e,t){var i=S.get(this.siteData);return t?i.resetPage(e):i.resetRuntimeNonDisplayedPages()},removeResolvedDataMapForPage:function(e){this.siteData.resolvedDataMaps&&this.siteData.resolvedDataMaps.delete(e)},updateActiveSOSPModes:function(e){e=e||this.siteData.getCurrentUrlPageId();var i=S.get(this.siteData),n=function(e){var i=S.get(e),n=i.pointers.components.getMasterPage(e.getViewMode()),o=i.pointers.componentStructure.getModes(n);if(!o)return[];if(o){var r=s.get(i.displayedDal.get(o),"definitions",[]);return s.filter(r,{type:t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}}(this.siteData);if(n){var o=i.pointers.components.getMasterPage(this.siteData.getViewMode()),r=this.modes.getPageActiveModes(t.siteConstants.MASTER_PAGE_ID),a=void 0,c=void 0;s.forEach(n,function(t){var i=function(e,t){var i=S.get(e),s=t.settings.pagesGroupId.replace("#",""),n=i.pointers.data.getDataItem(s,"masterPage");return i.displayedDal.get(n).pages}(this.siteData,t);s.includes(i,"#"+e)?r[t.modeId]||(a=t.modeId):r[t.modeId]&&(c=t.modeId)}.bind(this)),a&&c?this.modes.switchModes(o,c,a):a?this.modes.activateMode(o,a):c&&this.modes.deactivateMode(o,c)}},updateDisplayedJsonAfterPageLoaded:function(e){var t=S.get(this.siteData),i=t.pointers.activeModes.getPageActiveModes(e);t.displayedDal.set(i,{}),this.createDisplayedPage(e),e===this.siteData.getCurrentUrlPageId()&&this.updateActiveSOSPModes(e)},createDisplayedPage:function(e){var t=S.get(this.siteData),i=t.fullPagesData.pagesData[e];if(!i){var s=t.pointers.page.getPagePointer(e);return s&&t.displayedDal.isExist(s)&&t.displayedDal.remove(s),!1}var n=t.pointers.activeModes.getAllActiveModes();return this.actionQueue.runImmediately(function(){v(t,e);var s=t.displayedDal.get(n),o=t.displayedJsonUpdater.updateDisplayedRoot(s,i,e,{rendererModel:t.siteData.rendererModel});this.anchors.createPageAnchors(o.structure.id),t.runtimeToDisplayed.updateAll(t.getRuntimeCompsData())}.bind(this)),!0},updateDisplayedNodesLayout:function(t){function n(e,t){var s=e.pointers.getInnerPointer(t,["componentType"]),n=e.displayedDal.get(s);return i.jsonUpdaterRegistrar.getCompLayouter(n)}var o=S.get(this.siteData),r=this.siteData.getViewMode(),a=t?[t]:s(this.siteData.getAllPossiblyRenderedRoots()).map(function(e){return o.pointers.components.getPage(e,r)}).compact().value();s.forEach(a,s.bind(function(t){var i=o.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(t,n.bind(null,o));s.forEach(i,s.bind(function(t){var i=n(o,t),s=this.siteData.getScreenSize(),r=this.siteData.getSiteWidth(),a=o.pointers.getInnerPointer(t,["layout"]),c=o.displayedDal.get(a),p=e.positionAndSize.getPositionAndSize(c,s,s,r);i.setLayout(o.pointers,o.displayedDal,t,null,p)},this))},this))},updateDisplayedNodesLayoutAndUpdateAnchors:function(){this.updateDisplayedNodesLayout();var e=this.siteData.getAllPossiblyRenderedRoots();s.forEach(e,s.bind(function(e){this.anchors.createPageAnchors(e)},this))},createDisplayedNode:function(e){this.actionQueue.runImmediately(function(){var t=S.get(this.siteData),i=t.pointers.components.getPageOfComponent(e);v(t,i.id);var n=t.pointers.activeModes.getAllActiveModes(),o=t.displayedDal.get(n);t.displayedJsonUpdater.updateDisplayedJsonByPointer(e,o),this.anchors.createPageAnchors(i.id),t.cache.resetValidations();var r=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e),a=s.pick(t.getRuntimeCompsData(),s.map(r,"id"));t.runtimeToDisplayed.updateAll(a),function(e){var t=S.get(this.siteData).pointers.full.components.getPageOfComponent(e);s.forEach(this._displayedJsonUpdateCallbacks,function(i){i(t.id,e.id)})}.call(this,e)}.bind(this))},createDisplayedPages:function(){var e=this.siteData.getAllPossiblyRenderedRoots();s.forEach(e,this.createDisplayedPage.bind(this)),this.siteData.observableUpdateIndex++},resetRuntimeData:function(){S.get(this.siteData).resetRuntimeData(),this.createDisplayedPages()},getActionQueue:function(){return this.actionQueue},setRenderRealtimeConfigItem:function(e,t){var i=S.get(this.siteData),s=i.pointers.general.getRenderRealtimeConfigItem(e);return i.displayedDal.set(s,t)}},{createSiteDataAPIAndDal:h}}),define("core/core/site",["react","lodash","zepto","coreUtils","utils","core/siteRender/WixSiteReact","core/siteRender/WixSiteHeadRenderer","core/core/siteBI","core/bi/events","core/core/SiteDataAPI","experiment","loggingUtils"],function(e,t,i,s,n,o,r,a,c,p,l,d){"use strict";function u(e,i,s){var o=t(s).keys().pull("masterPage").value();return t.mapValues(s,function(t,s){return i&&window.pagesData&&window.pagesData[s]?t:n.dataFixer.fix(t,o.slice(),e.requestModel,e.currentUrl,e.urlFormatModel,"site"===e.viewMode,e.rendererModel)})}function h(e,i,o){var r={};s.urlUtils.isQueryParamOn(i.currentUrl,"isSantaEditor")&&(r=t.assign(r,{componentViewMode:"editor"})),i.rendererModel.previewMode&&(r=t.assign(r,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),i.renderFlags=t.assign({},i.renderFlags,r);var a=new n.FullSiteData(i);a.updateScreenSize();var c=p.createSiteDataAPIAndDal(a,e,o),l=c.siteData,d=c.siteDataAPI;return{fullSiteData:a,displayedSiteData:l,siteDataWrapper:c,viewerPrivateServices:{pointers:c.pointers,displayedDAL:c.displayedDal,siteDataAPI:d},isServerSideRender:l.isClientAfterSSR(),siteModel:i,siteDataAPI:d}}function g(e){var i=e.siteDataWrapper.fullPagesData.pagesData;if(i&&(u(e.siteModel,e.isServerSideRender,i),i.masterPage)){e.siteDataAPI.createDisplayedPage("masterPage");var s=e.siteModel.landingPageNavigationInfo||n.wixUrlParser.parseUrl(e.displayedSiteData,e.displayedSiteData.currentUrl.full);e.displayedSiteData.setRootNavigationInfo(s),t.forEach(i,function(t,i){e.siteDataAPI.createDisplayedPage(i)})}return e}function f(e,i,s,o){if(!!e.documentServicesModel)m(e,i,s,o);else{var r=i.redirectUrl;if(e.isInSSR())throw new U("Dynamic redirect is not supported for SSR, for url: "+r);k.isExternalUrl(r)?window.location=r:k.isRelativeUrl(r)&&B<4?(B++,function(e,i,s){var o=e.getExternalBaseUrl()+i,r=n.wixUrlParser.parseUrl(e,o);R(n.wixUrlParser.getUrl(e,r),r.title,e),r.routerDefinition?y(e,r,function(e){s(t.assign(r,e))}):(r.isStaticPageRedirect=!0,s(r))}(e,r,o)):o(N)}}function m(e,i,s,n){e.addDynamicPageData(i.pageId,i.pageData,s),e.addDynamicPageHeadData(i.pageId,i.pageHeadData),n({pageId:i.pageId,title:t.get(i.pageHeadData,"title",""),errorInfo:i.errorInfo,tpaInnerRoute:i.tpaInnerRoute,routerPublicData:i.publicData})}function y(e,t,i){var s=t.routerDefinition,o=n.routersBackEndRequests.makeParamObjFromSiteData(e,s,t);n.routersBackEndRequests.getPage(o,function(t){t.redirectUrl?f(e,t,s,i):m(e,t,s,i)},function(){},e)}function v(e,i,s){if("undefined"!=typeof window&&t.get(window,"history.replaceState")&&s)try{window.history.replaceState(null,i,e)}catch(e){}}function A(e,i){t.forEach(L[e],function(e){e.apply(null,i)})}function S(e,t){var i=e.getPrimaryPageId()===t.pageId;return e.isPopupOpened()&&i}function P(e){if(!e.isInSSR()&&!window.isMockWindow&&window.performance&&performance.getEntriesByType)try{var i=/(skins|require)\.min\.js$/,s=t(performance.getEntriesByType("resource")).toArray().filter(function(e){return i.test(e.name)}).map(function(e){var t=e.name.match(i),s=e.responseEnd-(e.responseStart||e.startTime),n={Name:t[1],DnsTime:Math.round(e.domainLookupEnd-e.domainLookupStart),ConnectTime:Math.round(e.connectEnd-e.connectStart),Ttfb:Math.round(e.duration-s),ResponseTime:Math.round(s)},o=e.transferSize||e.encodedBodySize;return o&&e.duration&&(n.Kbps=Math.round(o/e.duration)),n}).map(function(e){var i=t.includes(e.Name,"require")?"small":"large";return t.mapKeys(e,function(e,t){return i+t})}).reduce(function(e,i){return t.assign(e,i)},{});n.logger.reportBI(e,c.CDN_PERFORMANCE,s)}catch(e){}}function I(e,i,s,o,r,a,c){var p=e.props.siteData,l=e.siteAPI;if(p.getCurrentUrlPageId()!==o.pageId&&l.reportBeatStart(o.pageId),p.getPrimaryPageId()!==o.pageId&&o.anchorData||o.anchorData&&p.getCurrentUrlPageId()===o.pageId&&o.routerDefinition){l.getSiteAspect("actionsAspect").registerNextAnchorScroll(o.anchorData)}var d=!0,u=p.currentUrl.full,h=function(){if(A(x.PAGE_LOADED,[l,o]),d){d=!1,0===s.indexOf("#")?p.currentUrl.hash=s:p.currentUrl=k.parseUrl(s),function(e,t,i,s){var o=e.isPopupPage(s.pageId),r=e.isUsingUrlFormat(n.siteConstants.URL_FORMATS.SLASH),a=S(e,s);return!o&&i!==t&&r&&!a}(p,u,s,o)&&l.reportCurrentPageEvent(s);var i=function(e,t){var i=e.isPopupPage(t.pageId),s=S(e,t);return!i&&!s}(p,o);p.setRootNavigationInfo(o,!a),e.siteAPI.getSiteAspect("WidgetAspect").pageNavigationInfoChanged(),p.isViewerMode()&&(c?v(s,o.title,c):function(e,i,s){if("undefined"!=typeof window&&t.get(window,"history.pushState")&&s)try{window.history.pushState(null,i,e)}catch(e){}}(s,o.title,r)),i&&b(p,o.pageId)}};return function(e,i){var s=e.pageId===i.getFocusedRootId()&&e.imageZoom,n=t.has(i.pagesData,e.pageId),o=e.pageId===i.getPrimaryPageId(),r=e.pageAdditionalData===i.getExistingRootNavigationInfo().pageAdditionalData;return!(s||n&&o&&r)}(o,p)?(i.loadPage(o,function(){l.getActionQueue().runImmediately(h)}),!0):(l.getActionQueue().runImmediately(h),!0)}function D(e,i,s){var n="wixSiteProperties";return l.isOpen("mobileNonOptimizedOverflow",e)&&(n+=" mobile-non-optimized-overflow"),O(t.assign({},s,{className:"WixSite"===e.rendererModel.siteInfo.documentType?n:"noop",siteData:e,viewerPrivateServices:i,rootId:"masterPage",navigateMethod:I,updateUrlIfNeededMethod:M,getDynamicPageRealPage:y,updateHeadMethod:C,getSiteContainer:_}))}function _(){return window}function C(e,t){if(b(e,t),"WixSite"===e.rendererModel.siteInfo.documentType){T(E(e),r.getGoogleTagManagerScript())}}function b(e,i){var s=E(e);!function(e){e.isInSSR()||window.isMockWindow||(window.document.title=e.getCurrentUrlPageTitle())}(e),function(e,i){var s=["[name=description]","[name=keywords]",'[property="og:title"]','[property="og:description"]','[property="og:url"]','[property="og:image"]','[rel="amphtml"]'];t.get(e,"publicModel.indexable")&&s.push("[name=robots]");var n=e.getCurrDynamicPageMetaTags();t.forEach(n,function(e,i){t.startsWith(i,"og:")?s.push('[property="'+i+'"]'):s.push('[name="'+i+'"]')}),e.resetCurrDynamicPageMetaTags(),l.isOpen("sv_twitterMetaTags",e)&&(s=s.concat(['[name="twitter:card"]','[name="twitter:title"]','[name="twitter:description"]','[name="twitter:image"]']));s.forEach(function(e){w(i,e)})}(e,s),function(e,i,s){!function(e,i){t.forEach(e,function(e){T(i,e)})}(r.getPageMetaTags(e,i),s)}(e,i,s),function(e,t,i){w(i,'script[type="application/ld+json"]');var s=r.getPageJsonldTag(e,t);s&&T(i,s)}(e,i,s),function(e,i,s){if(l.isOpen("sv_ampLinkTag",e)&&t.get(e,"publicModel.hasBlogAmp")){var n=r.getPageLinkTag(e,i);n&&T(s,n)}}(e,i,s)}function E(e){return e.isInSSR()||window.isMockWindow?(e.headTagsForSSR=e.headTagsForSSR||[],e.headTagsForSSR):window.document.head}function T(e,s){t.isArray(e)?t.isString(s)&&e.push(s):i(e).append(n.xss.filterHtmlString(s,{allowHeadTags:!0,allowOneSelfClosingMetaTag:!0}))}function w(e,s){e.remove?i(s,e).remove():t.pullAllWith(e,[s],function(e,i){var s=i.match(/([^[]*?)(?=\])/);return s&&s[0]&&t.includes(e,s[0])})}function R(e,t,i){v(e,t,!0),i.currentUrl=k.parseUrl(e)}function M(e,t){if(!n.errorPages.isErrorPage(t.pageId)){var i=n.wixUrlParser.getUrl(e,t);!t.routerDefinition&&e.isViewerMode()&&i!==e.currentUrl.full&&R(i,t.title,e)}}var k=n.urlUtils,O=e.createFactory(o),x={PAGE_LOADED_FIRST_RENDER:"page_loaded_first_render",PAGE_LOADED:"page_loaded"},L={},N={pageId:n.errorPages.IDS.INTERNAL_ERROR},B=0;n.sessionFreezer.freeze(L);var U=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.name="WebWorkerRedirectError",i}return _inherits(t,Error),t}();return{isProtectedPage:function(e,t){if(!e.publicModel)return!1;var i=t||e.getPrimaryPageId(),n=void 0===e.publicModel?{}:e.publicModel,o=void 0===n.pageList?{}:n.pageList,r=(void 0===o.pages?[]:o.pages).reduce(function(e,t){return t.pageId===i?t:e});return!s.errorPages.isErrorPage(i)&&!!r&&!r.pageJsonFileName},createSitePrivates:h,extendPrivates:g,createSitePrivatesEx:function(){return g(h.apply(this,arguments))},fixPages:u,prepareSiteForRender:function(e,t,i){return new Promise(function(o){function r(r){e.setRootNavigationInfo(r),n.logger.reportBeatEvent(e,6,r.pageId),P(e),a.init(e),t.siteDataAPI.loadPage(r,function(){A(x.PAGE_LOADED_FIRST_RENDER,[e,i.wixCodeAppApi]);var a=n.wixUrlParser.parseUrl(e,e.currentUrl.full);a.pageId!==r.pageId&&(a.pageId=r.pageId,a.title=r.title),s.errorPages.isErrorPage(a.pageId)&&(s.errorPages.setIsFixingDisplayedMasterPage(),s.errorPages.updateErrorPageMasterData("masterPage",e.pagesData.masterPage)),function(e,t){e.routerPublicData||(e.routerPublicData=t.routerPublicData),e.tpaInnerRoute||(e.tpaInnerRoute=t.tpaInnerRoute)}(a,r),e.setRootNavigationInfo(a),n.mobileViewportFixer.fixViewportTag(e),M(e,a),o({siteData:e,viewerPrivateServices:t})})}var c=e.landingPageNavigationInfo||n.wixUrlParser.parseUrl(e,e.currentUrl.full);c&&c.routerDefinition?(B=0,e.landingPageNavigationInfo?r(c):y(e,c,function(e){r(e)})):r(c)})},doRenderSite:function(e,t,i){e.then(function(e){function s(){d.performance.finish(d.performanceMetrics.RENDER_PREPARE,{category:d.performance.VERBOSE}),i(D(e.siteData,e.viewerPrivateServices,t))}e.siteData.isViewerMode()&&l.isOpen("importScriptsOpt",e.siteData)&&t.wixCodeAppApi&&t.wixCodeAppApi.isAppInitiated()?setTimeout(s,10):s()})},renderSite:function(e,t,i,o){function r(r){e.setRootNavigationInfo(r),n.logger.reportBeatEvent(e,6,r.pageId),P(e),a.init(e),t.siteDataAPI.loadPage(r,function(){A(x.PAGE_LOADED_FIRST_RENDER,[e,i.wixCodeAppApi]);var a=n.wixUrlParser.parseUrl(e,e.currentUrl.full);a.pageId!==r.pageId&&(a.pageId=r.pageId,a.title=r.title),s.errorPages.isErrorPage(a.pageId)&&(s.errorPages.setIsFixingDisplayedMasterPage(),s.errorPages.updateErrorPageMasterData("masterPage",e.pagesData.masterPage)),e.setRootNavigationInfo(a),e.isClientAfterSSR()||n.mobileViewportFixer.fixViewportTag(e),M(e,a),o(D(e,t,i))})}var c=n.wixUrlParser.parseUrl(e,e.currentUrl.full);return c.routerDefinition?(B=0,void y(e,c,function(e){r(e)})):(r(c),e)},WixSiteReact:o,hooks:{types:x,registerHook:function(e,t){L[e]=L[e]||[],L[e].push(t)}}}}),define("core/siteRender/compRegistrar",["compUtils"],function(e){"use strict";return{register:function(t,i,s){return e.compFactory.register(t,i,s),this},registerMobxObserver:function(t){return e.compFactory.registerMobxObserver(t),this}}}),define("core/components/createChildComponentMixin",["lodash","santaProps","compUtils"],function(e,t,i){"use strict";function s(i,s,n,o,r){r=r||{};var a=this.getSkinExports(),c="string"==typeof o?{skin:a[o].skin,styleId:this.props.styleId+o}:o,p={compProp:e.omit(this.props.compProp,["isHidden","isCollapsed"]),compData:i,skin:c.skin,styleId:c.styleId};if(!i&&!r.id)throw new Error("Unable to set child comp id - no data item\\custom id were passed");if(p.id=r.id||this.props.id+i.id,!i&&!r.ref)throw new Error("Unable to set child comp ref - no data item\\custom ref were passed");p.ref=r.ref||i.id,p.structure={componentType:s,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:r.skinPart||p.ref};var l={};if(t.santaTypesUtils.isSantaTypedReactComponent(this)){var d=t.santaTypesUtils.getSantaTypesForChildComponentClass(n);l=e.pick(this.props,e.keys(d))}else l=function(e,i){var s=t.santaTypesUtils.getSantaTypesForChildComponentClass(e);return t.santaTypesUtils.resolveComponentProps(s,i)}(n,e.assign(e.pick(this.props,["siteAPI","siteData","loadedStyles"]),p));return e.assign(l,p,e.omit(r,"structure"))}return{createChildComponent:function(e,t,n,o){var r=i.compFactory.getCompReactClass(t);if(!r)return null;return i.compFactory.getCompClass(t,!0)(s.call(this,e,t,r,n,o))}}}),define("core/components/createOldChildComponentMixin",["lodash","santaProps","compUtils"],function(e,t,i){"use strict";function s(i,s,n,o,r){r=r||{};var a=this.getSkinExports(),c="string"==typeof o?{skin:a[o].skin,styleId:this.props.styleId+o}:o,p={siteData:this.props.siteData,siteAPI:this.props.siteAPI,compProp:e.omit(this.props.compProp,["isHidden","isCollapsed"]),loadedStyles:this.props.loadedStyles,compData:i,refInParent:e.get(i,"id",""),skin:c.skin,styleId:c.styleId,pageId:this.props.pageId,rootId:this.props.rootId,rootNavigationInfo:this.props.rootNavigationInfo,currentUrlPageId:this.props.currentUrlPageId};if(!i&&!r.id)throw new Error("Unable to set child comp id - no data item\\custom id were passed");if(p.id=r.id||this.props.id+i.id,!i&&!r.ref)throw new Error("Unable to set child comp ref - no data item\\custom ref were passed");p.ref=r.ref||i.id,p.compDesign=this.props.compDesign,p.structure=e.assign({componentType:s,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:r.skinPart||p.ref},r.structure);var l=function(e,i){var s=t.santaTypesUtils.getSantaTypesForChildComponentClass(e);return t.santaTypesUtils.resolveComponentProps(s,i)}(n,p);return p=e.merge(l,p,e.omit(r,"structure")),e.omitBy(p,e.isUndefined)}return{createOldChildComponent:function(e,t,n,o){var r=i.compFactory.getCompReactClass(t);if(!r)return null;return i.compFactory.getCompClass(t,!0)(s.call(this,e,t,r,n,o))}}}),define("core/components/popupPagesMixin",["lodash","reactDOM","utils"],function(e,t,i){"use strict";return{preventTabbingOut:function(s){if("Tab"===s.key){s.stopPropagation();var n=i.accessibility.getTabbaleElements(t.findDOMNode(this));e.isEmpty(n)?s.preventDefault():s.shiftKey&&window.document.activeElement===e.head(n)?(s.preventDefault(),e.last(n).focus()):s.shiftKey||window.document.activeElement!==e.last(n)||(s.preventDefault(),e.head(n).focus())}}}}),define("core/components/inputFocusMixin",["lodash"],function(e){"use strict";return{INPUT_FOCUS_BEHAVIORS:{focus:{methodName:"requestFocus"},blur:{methodName:"requestBlur"}},requestFocus:function(){this.shouldApplyFocus=!0},requestBlur:function(){this.shouldApplyBlur=!0},componentDidUpdate:function(){this.shouldApplyFocus&&(e.isFunction(this.focus)&&this.focus(),this.shouldApplyFocus=!1),this.shouldApplyBlur&&(e.isFunction(this.blur)&&this.blur(),this.shouldApplyBlur=!1)}}}),define("core/components/validatableMixin",["lodash"],function(e){"use strict";return{validatable:{requestSetCustomValidity:function(e){this.customValidityToSet=e},componentDidUpdate:function(){e.isString(this.customValidityToSet)&&e.isFunction(this.setCustomValidity)&&(this.setCustomValidity(this.customValidityToSet),this.customValidityToSet=null)},updateValidityIndication:function(e){this.setState({shouldShowValidationIndication:e})},showValidityIndication:function(){this.updateValidityIndication(!0)},hideValidityIndication:function(){this.updateValidityIndication(!1)},shouldShowValidityIndication:function(){return this.state.shouldShowValidationIndication}},getPublicState:function(t){return{shouldShowValidationIndication:e.get(t,"shouldShowValidationIndication",!1)}},VALIDATABLE_BEHAVIORS:{setCustomValidity:{methodName:"requestSetCustomValidity",params:["customValidity"]},updateValidityIndication:{methodName:"updateValidityIndication",params:["value"]}}}}),define("core/components/validatableWithSyncMixin",["lodash"],function(e){"use strict";return{validatableWithSync:{getInitialState:function(){return{validateData:{}}},isValid:function(){return e.get(this.state,["validateData","validity","valid"],!0)},getValidity:function(){return e.get(this.state,["validateData","validity"])},syncValidationData:function(e){this.setState({validateData:e})},updateValidityIndication:function(e){this.setState({shouldShowValidationIndication:e})},showValidityIndication:function(){this.updateValidityIndication(!0)},hideValidityIndication:function(){this.updateValidityIndication(!1)},shouldShowValidityIndication:function(){return this.state.shouldShowValidationIndication},resetValidity:function(){this.setState({validateData:{}})}},getPublicState:function(t){return{shouldShowValidationIndication:e.get(t,"shouldShowValidationIndication",!1)}},VALIDATABLE_WITH_SYNC_BEHAVIORS:{updateValidityIndication:{methodName:"updateValidityIndication",params:["value"]},syncValidationData:{methodName:"syncValidationData",params:["validateData"]}}}}),define("core/components/runTimeCompData",["lodash","santaProps","utils"],function(e,t){"use strict";return{propTypes:{id:t.Types.Component.id.isRequired,setRuntimeCompData:t.Types.DAL.setCompData.isRequired,setRuntimeCompProps:t.Types.DAL.setCompProps.isRequired},updateData:function(e){this.props.setRuntimeCompData(this.props.id,e)},updateProps:function(e){this.props.setRuntimeCompProps(this.props.id,e)}}}),define("core/components/blockOuterScrollMixin",[],function(){"use strict";return{blockOuterScroll:function(e){var t=e.currentTarget,i=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,s=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+s<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+s>=i&&(t.scrollTop=i,e.preventDefault()),e.stopPropagation()}}}),define("core/components/optionInput",["lodash","skins","santaComponents","core/components/createOldChildComponentMixin","utils"],function(e,t,i,s,n){"use strict";return{mixins:[i.mixins.skinBasedComp(t.skinsMap),s],getInitialState:function(){return this.getCssState(this.props)},componentWillReceiveProps:function(e){this.setState(this.getCssState(e))},getCssState:function(e){return{$enabledState:e.compData.disabled?"disabled":"enabled",$selectState:e.selected?"selected":"unselected"}},onMouseEnter:function(){this.refs.toolTip.showToolTip({},{source:this})},onMouseLeave:function(){this.refs.toolTip.closeToolTip()},createInfoTipChildComponent:function(){return this.createOldChildComponent({content:this.props.compData.description,id:"toolTip"},"wysiwyg.common.components.InfoTip",{skin:"wixapps.integration.skins.ecommerce.options.InfoTipSkin",styleId:n.santaTypes.shortenStyleId("wixapps.integration.skins.ecommerce.options.InfoTipSkin")},{ref:"toolTip",className:this.props.styleId+"tooltip"})}}}),define("core/components/skinInfo",["lodash","skins","santaProps"],function(e,t,i){"use strict";return{propTypes:{skin:i.Types.Component.skin,structure:i.Types.Component.structure,compTheme:i.Types.Component.theme,themeColor:i.Types.Theme.colors,isExperimentOpen:i.Types.isExperimentOpen},getParams:function(t,i){var s={};return e.forEach(t,function(e){s[e]=this.getParamFromDefaultSkin(e,i)}.bind(this)),s},getParamFromDefaultSkin:function(e,t){return this.getParamFromSkin(e,t||this.props.skin)},getParamFromSkin:function(i,s){var n=e.get(this.props.compTheme,"style.properties")||{},o=t.skinsMap.get(s,this.props.isExperimentOpen),r=n[i]||o.paramsDefaults&&o.paramsDefaults[i];return e.isArray(r)&&r.length>1&&((n=e.clone(n))[i]=this.getSumParamValue(i,s)),t.params.renderParam(i,o,n,this.props.themeColor)},getSumParamValue:function(i,s){var n=this.getSkinExports(),o=t.skinsMap.get(s,this.props.isExperimentOpen).paramsDefaults,r=o&&o[i];if(!r){var a=n[i];return a?Math.abs(parseInt(a,10))||0:0}return Array.isArray(r)?e.sumBy(r,function(e){return Math.abs(parseInt(this.getParamFromSkin(e,s).value,10))}.bind(this)):Math.abs(parseInt(r,10))||0},getFromExports:function(e){var t=this.getSkinExports();return t&&t[e]||0},getStyleData:function(t){return t=t||this.props,e.get(t.compTheme,"style.properties")||{}}}}),define("core/components/util/galleryPagingCalculations",["lodash","coreUtils"],function(e,t){"use strict";var i=t.matrix.calculations;return{getNumberOfDisplayedRows:function(e,t,s,n){return e||n&&n<t*s?t:i.getAvailableRowsNumber(t,s,n)},getItemsPerPage:function(e,t,i){return e*this.getNumberOfDisplayedRows(null,t,e,i)},getTotalPageCount:function(e,t,i){var s=this.getItemsPerPage(e,t,i),n=Math.floor(i/s);return i%s>0&&n++,n},getNextPageItemIndex:function(e,t,i,s){var n=e+this.getItemsPerPage(t,i,s);return n>=s&&(n=0),n},getPrevPageItemIndex:function(e,t,i,s){var n=this.getItemsPerPage(t,i,s),o=e-n;return o<0&&(o=(this.getTotalPageCount(t,i,s)-1)*n),o},getCounterText:function(e,t,i,s){var n=Math.floor(e/this.getItemsPerPage(t,i,s)),o=this.getTotalPageCount(t,i,s);return o||(o=1),String(n+1)+"/"+String(o)},getPageItems:function(e,t,i,s){return this.getPageItemsByStartIndex(e,t,this.getItemsPerPage(i,s,e.length))},getPageItemsByStartIndex:function(e,t,i){var s=[];if(i<e.length){for(var n=this.getLastItemIndex(e,t,i),o=t;o<=n;o++)s.push(e[o]);return s}return e},getLastItemIndex:function(e,t,i){return Math.min(e.length-1,t+i-1)}}}),define("core/components/util/boxSlideShowCommon",["lodash"],function(e){"use strict";function t(e){return e.componentType}var i="wysiwyg.viewer.components.BoxSlideShowSlide",s="wysiwyg.viewer.components.StripContainerSlideShowSlide";return{getNextSlideIndex:function(e,t){var i=t+1;return i>=e.length&&(i=0),i},getPrevSlideIndex:function(e,t){var i=t-1;return i<0&&(i=e.length-1),i},getSlidesFromChildrenByStructure:function(n){return e.filter(n,function(e){return t(e)===i||t(e)===s})},getShownOnAllSlidesFromChildrenByStructure:function(n){return e.reject(n,function(e){return t(e)===i||t(e)===s})},isBoxOrStripSlideShowComponent:function(e){return"wysiwyg.viewer.components.BoxSlideShow"===e||"wysiwyg.viewer.components.StripContainerSlideShow"===e},isBoxOrStripSlideShowSlideComponent:function(e){return e===i||e===s},getMatchingChildSlideType:function(e){if(!this.isBoxOrStripSlideShowComponent(e))throw new Error("invalid comp type, not a box or strip slide show component");return"wysiwyg.viewer.components.BoxSlideShow"===e?i:s}}}),define("core/components/mediaZoomWrapperMixin",["prop-types","lodash","skins","santaComponents","core/components/createChildComponentMixin","santaProps"],function(e,t,i,s,n,o){"use strict";return{mixins:[s.mixins.skinBasedComp(i.skinsMap),n],propTypes:{closeFunction:e.func,compData:o.Types.Component.compData.isRequired,windowKeyboardEvent:o.Types.SiteAspects.windowKeyboardEvent.isRequired,windowTouchEvents:o.Types.SiteAspects.windowTouchEvents.isRequired},componentWillMount:function(){var e=this.props.windowKeyboardEvent;e.registerToEscapeKey(this),this.props.windowTouchEvents.registerToWindowTouchEvent("touchMove",this);var t=this.getPrevAndNextState();t.next&&e.registerToArrowRightKey(this),t.prev&&e.registerToArrowLeftKey(this)},getSkinProperties:function(){var e=this.getChildZoomComponentType(),i="wysiwyg.viewer.components.MobileMediaZoom"===e,s=this.getChildZoomExtraProps();return{"":{children:this.createChildComponent(this.props.compData,e,"mediaZoom",t.assign({ref:this.props.compData.id,actualNavigateToItemFunc:this.actualNavigateToItem,getBoxDimensionsFunc:this.getBoxDimensions,getChildCompFunc:this.getChildComp,getPrevAndNextStateFunc:this.getPrevAndNextState,isDataChangedFunc:this.isDataChanged,closeFunction:this.props.closeFunction,enableInnerScrolling:this.enableInnerScrolling||!1},s||{})),style:{width:"100%",height:"100%",position:i?"static":"absolute"}}}},closeMediaZoom:function(){this.refs[this.props.compData.id].closeMediaZoom()},onEscapeKey:function(){this.closeMediaZoom()},onArrowLeftKey:function(){this.refs[this.props.compData.id].clickOnPreviousButton()},onArrowRightKey:function(){this.refs[this.props.compData.id].clickOnNextButton()},onWindowTouchMove:function(e){this.enableInnerScrolling||(e.preventDefault(),e.stopPropagation())}}}),define("core/components/galleryImageExpandedActionMixin",["lodash","prop-types","siteUtils","loggingUtils","santaProps"],function(e,t,i,s,n){"use strict";return{propTypes:{compData:n.Types.Component.compData.isRequired,id:n.Types.Component.id.isRequired,rootId:n.Types.Component.rootId.isRequired,handleAction:n.Types.Behaviors.handleAction.isRequired,galleryCompId:t.string,imageIndex:t.number},handleImageExpandedAction:function(){var t=this.props.rootId,n=e.get(this.props,"compData"),o=e.get(this.props,"imageIndex"),r=this.props.galleryCompId;if(r){var a=this.props.handleAction,c=[{name:i.constants.ACTION_TYPES.ITEM_CLICKED,pageId:t,sourceId:r,type:"comp"},{name:i.constants.ACTION_TYPES.IMAGE_EXPANDED,pageId:t,sourceId:r,type:"comp"},{name:i.constants.ACTION_TYPES.IMAGE_CHANGED,pageId:t,sourceId:r,type:"comp"}];e.forEach(c,function(e){a(e,function(e,t){return{item:e,timeStamp:s.performance.now(),imageIndex:t,name:"imageExpanded"}}(n,o))})}}}}),define("core/components/util/matrixAnimationManipulation",["lodash"],function(e){"use strict";var t={getDefultAnimationValues:function(e,t,i,s){return{sourceNodesArrSorted:[e],destNodesArrSorted:[t],stagger:0,timingFunctionIndex:i,transName:s,sporadicallyRandom:!1}},getUpdatedTimingFunctionIndex:function(e,t){return t>e.length-1&&(t=0),t},getCrossFadePossibleTransitionByName:function(e){switch(e){case"crossFadeHorizWave":return this.sortMatrixByRows;case"crossFadeVertWave":return this.sortMatrixByCols;case"seq_crossFade_Diagonal":return this.convertMatrixToDiagonal}},convertArrayToMatrix:function(t,i,s){var n=0,o=new Array(i);return e.times(i,function(i){o[i]||(o[i]=[]),e.times(s,function(e){n<t.length?(o[i][e]=t[n],n++):o[i][e]=-1})}),o},sortMatrixByRows:function(e){return[e]},sortMatrixByCols:function(t,i,s){var n=this.convertArrayToMatrix(t,i,s),o=[],r=0;return e.times(s,function(t){e.times(i,function(e){-1!==n[e][t]&&(o[r]=n[e][t],r++)})}),[o]},reverseMatrix:function(e){return e.reverse()},convertMatrixToDiagonal:function(t,i,s){var n=this.convertArrayToMatrix(t,i,s),o=[],r=0;return e.times(i+s,function(t){var a=Math.max(0,t-i),c=Math.min(s-a,t,i);e.times(c,function(e){var s=n[Math.min(i,t)-e-1][a+e];-1!==s&&(o[r]=s,r++)})}),[o]},convertMatrixToReverseDiagonal:function(e,t,i){var s=this.convertMatrixToDiagonal(e,t,i);return this.reverseMatrix(s)},getMatrixByRows:function(t,i,s){var n=0,o=new Array(i);return e.times(i,function(i){o[i]||(o[i]=[]),e.times(s,function(e){n<t.length&&(o[i][e]=t[n],n++)})}),o},getMatrixByRowsReverse:function(e,t,i){var s=this.getMatrixByRows(e,t,i);return this.reverseMatrix(s)},getMatrixByColsReverse:function(e,t,i){var s=this.getMatrixByCols(e,t,i);return this.reverseMatrix(s)},getMatrixByCols:function(t,i,s){var n=this.getMatrixByRows(t,i,s),o=new Array(s);return e.times(s,function(t){o[t]||(o[t]=[]),e.times(i,function(e){n[e][t]&&(o[t][e]=n[e][t])})}),o}};return{getSortedArrayAndStagger:function(e,i,s,n,o,r){switch(e){case"none":return{sourceNodesArrSorted:[i],destNodesArrSorted:[s],stagger:0,transName:"NoTransition"};case"seq_shrink_All":case"seq_crossFade_All":var a=[t.sortMatrixByRows,t.sortMatrixByCols,t.reverseMatrix,t.convertMatrixToDiagonal,t.convertMatrixToReverseDiagonal,t.sortMatrixByRows],c=a[r=t.getUpdatedTimingFunctionIndex(a,r)];return{sourceNodesArrSorted:c.call(t,i,n,o),destNodesArrSorted:c.call(t,s,n,o),stagger:r===a.length-1||i.length!==s.length?0:.1,timingFunctionIndex:r,transName:"seq_shrink_All"===e?"Shrink":"CrossFade"};case"swipe_horiz_All":var p=[t.getMatrixByRows,t.getMatrixByRowsReverse],l=p[r=t.getUpdatedTimingFunctionIndex(p,r)];return{sourceNodesArrSorted:l.call(t,i,n,o),destNodesArrSorted:l.call(t,s,n,o),stagger:.1,timingFunctionIndex:r,transName:"SlideHorizontal",sporadicallyRandom:n>1};case"swipe_vert_All":var d=[t.getMatrixByCols,t.getMatrixByColsReverse],u=d[r=t.getUpdatedTimingFunctionIndex(d,r)];return{sourceNodesArrSorted:u.call(t,i,n,o),destNodesArrSorted:u.call(t,s,n,o),stagger:.1,timingFunctionIndex:r,transName:"SlideVertical",sporadicallyRandom:o>1};case"seq_random":var h=["seq_shrink_All","seq_crossFade_All","swipe_horiz_All","swipe_vert_All"],g=h[Math.floor(Math.random()*h.length)];return this.getSortedArrayAndStagger(g,i,s,n,o,r);case"horizSwipeAllAtOnce":return t.getDefultAnimationValues(i,s,r,"SlideHorizontal");case"vertSwipeAllAtOnce":return t.getDefultAnimationValues(i,s,r,"SlideVertical");case"crossFadeAllAtOnce":return t.getDefultAnimationValues(i,s,r,"CrossFade");case"crossFadeHorizWave":case"crossFadeVertWave":case"seq_crossFade_Diagonal":var f=t.getCrossFadePossibleTransitionByName(e);return{sourceNodesArrSorted:f.call(t,i,n,o),destNodesArrSorted:f.call(t,s,n,o),stagger:.1,timingFunctionIndex:r,transName:"CrossFade"};case"seq_swipe_alternate":var m=[t.getMatrixByRows,t.getMatrixByCols];return r=t.getUpdatedTimingFunctionIndex(m,r),{sourceNodesArrSorted:i,destNodesArrSorted:s,stagger:.1,timingFunctionIndex:r,transName:0===r?"SlideHorizontal":"SlideVertical"}}}}}),define("core/components/uniquePageIdMixin",["lodash","santaProps"],function(e,t){"use strict";var i=t.Types;return{propTypes:{rootId:i.Component.rootId.isRequired,externalBaseUrl:i.PublicModel.externalBaseUrl.isRequired,isSinglePostPage:t.Types.isSinglePostPage.isRequired,pageUrl:i.pageUrl.isRequired,getUniquePageId:i.getUniquePageId.isRequired},getUniquePageId:function(){if("masterPage"===this.props.rootId)return this.props.externalBaseUrl;var e=this.props.rootId;return this.props.isSinglePostPage?this.props.getUniquePageId(e):this.props.pageUrl}}}),define("core/activities/activity",["coreUtils"],function(e){"use strict";var t=function(e,t){this._activityInfo=e,this._fields=t};return t.prototype={getParams:function(){return{hs:this._activityInfo.hubSecurityToken,"activity-id":e.guidUtils.getUniqueId(),"metasite-id":this._activityInfo.metaSiteId,svSession:this._activityInfo.svSession,version:"1.0.0"}},getPayload:function(){return{activityDetails:{additionalInfoUrl:null,summary:""},activityInfo:"activityInfo",activityLocationUrl:function(e){return e.currentUrl.full}(this._activityInfo),activityType:"activityType",contactUpdate:{},createdAt:(new Date).toISOString()}}},t}),define("core/activities/tpaActivity",["lodash","core/activities/activity"],function(e,t){"use strict";var i=function(e,i){t.call(this,e,i)};return i.prototype=new t,i.prototype.getParams=function(i){var s=t.prototype.getParams.call(this,i),n={"application-id":this._fields.appDefinitionId,instance:this._fields.instance};return n=e.assign(s,n)},i.prototype.getPayload=function(i){var s=t.prototype.getPayload.call(this,i),n={contactUpdate:this._fields.contactUpdate,activityInfo:this._fields.info,activityType:this._fields.type,activityDetails:this._fields.details};return n=e.assign(s,n)},i}),define("core/activities/contactFormActivity",["lodash","core/activities/activity"],function(e,t){"use strict";var i={name:{first:"",last:""},emails:[{tag:"main",email:""}],phones:[{tag:"main",phone:""}],addresses:[{tag:"main",address:""}]};Object.freeze(i);var s={name:"name",email:"emails",phone:"phones",address:"addresses"},n=function(e,t){t.phone||(t.phone=""),t.phone=t.phone.substring(0,29)},o=function(e,t){t.name||(t.name="");var i=t.name.split(" ");e.name&&(e.name.first=i[0],e.name.last=i[1])},r=function(e,i,s){t.call(this,e,i),this._fieldLabels=s};return r.prototype=new t,r.prototype.getParams=function(i){var s=t.prototype.getParams.call(this,i),n={"component-name":"ContactForm"};return n=e.assign(s,n)},r.prototype.getPayload=function(r){var a=t.prototype.getPayload.call(this,r),c={contactUpdate:function(t){var r=e.omitBy(t,function(e){return!e}),a=e.map(r,function(e,t){return s[t]}),c=e.pick(i,a);return o(c,r),n(c,r),e.forEach(r,function(t,i){var n=c[s[i]];e.isArray(n)&&(e.head(n)[i]=t)}),c}(this._fields),activityInfo:function(e){var t={fields:[]};return Object.keys(e).forEach(function(i){t.fields.push({name:i,value:e[i]})}),t}(this._fields),activityDetails:function(t){var i="";return i+=t.subject?"<strong>"+t.subject+"</strong>":"",t.message&&(i+=t.subject?"<br>":"",i+=t.message),{additionalInfoUrl:null,summary:e.isEmpty(i)?"No message was received":i}}(this._fields),activityType:"contact/contact-form"};return c=e.assign(a,c)},r}),define("core/activities/dynamicContactFormActivity",["lodash","core/activities/activity"],function(e,t){"use strict";function i(e,t){var i=e.filter(function(e){return e.name===t});return i.length>0?i[0].value:""}var s=29,n=function(e,i){t.call(this,e,i)};return n.prototype=new t,n.prototype.getParams=function(i){var s=t.prototype.getParams.call(this,i),n={"component-name":"ContactForm"};return n=e.assign(s,n)},n.prototype.getPayload=function(n){var o=t.prototype.getPayload.call(this,n),r={contactUpdate:function(t){function i(e){return t.filter(function(t){return t.name===e})}var n=[{type:"email",fields:i("secondaryEmail"),contactField:"emails"},{type:"phone",fields:i("phone"),contactField:"phones"},{type:"address",fields:i("address"),contactField:"addresses"}].reduce(function(e,t){return e[t.contactField]=t.fields.reduce(function(e,i){if(i.value){var n={tag:i.label};n[t.type]="phone"===i.name?i.value.substring(0,s):i.value,e.push(n)}return e},[]),e},{}),o=i("email");if(o&&o.length>0){var r=o[0];n.emails.unshift({tag:r.label,email:r.value})}var a=function(t){var i=e.filter(t,{name:"name"});if(i.length>0){var s=i[0].value;return s?s.indexOf(" ")>0?{first:s.substr(0,s.indexOf(" ")),last:s.substr(s.indexOf(" ")+1)}:{first:s}:""}return""}(t);return a&&(n.name=a),n}(this._fields),activityInfo:function(t){var i={};return i.fields=e.cloneDeep(t),i}(this._fields),activityDetails:function(t){var s=i(t,"subject"),n=i(t,"message"),o="";return o+=s?"<strong>"+s+"</strong>":"",n&&(o+=s?"<br>":"",o+=n),{additionalInfoUrl:null,summary:e.isEmpty(o)?"No message was received":o}}(this._fields),activityType:"contact/contact-form"};return r=e.assign(o,r)},n}),define("core/activities/subscribeFormActivity",["lodash","core/activities/activity"],function(e,t){"use strict";var i=function(e,i){t.call(this,e,i)};return i.prototype=new t,i.prototype.getParams=function(i){var s=t.prototype.getParams.call(this,i),n={"component-name":"subscribeForm"};return n=e.assign(s,n)},i.prototype.getPayload=function(i){var s=t.prototype.getPayload.call(this,i),n={contactUpdate:function(e){return{name:{first:e.first||"",last:e.last||""},emails:[{tag:"main",email:e.email||""}],phones:e.phone?[{tag:"main",phone:e.phone||""}]:[],emailSubscriptionPolicy:"RECURRING"}}(this._fields),activityInfo:function(t){var i={fields:[]};return Object.keys(t).forEach(function(e){i.fields.push({name:e,value:t[e]})}),i.email=t.email,(t.first||t.last)&&(i.name=e.pickBy({first:t.first,last:t.last})),t.phone&&(i.phone=t.phone),i}(this._fields),activityType:"contact/subscription-form"};return n=e.assign(s,n)},i}),define("core/activities/activityTypes",["core/activities/tpaActivity","core/activities/contactFormActivity","core/activities/dynamicContactFormActivity","core/activities/subscribeFormActivity"],function(e,t,i,s){"use strict";return{TPAActivity:e,ContactFormActivity:t,DynamicContactFormActivity:i,SubscribeFormActivity:s}}),define("core/activities/activityService",["coreUtils"],function(e){"use strict";var t=e.urlUtils,i=e.ajaxLibrary,s="/_api/app-integration-bus-web/v1/activities";return{reportActivity:function(e,n,o,r){var a="?"+t.toQueryString(n.getParams()),c=e+s+a;i.ajax({type:"POST",url:c,data:n.getPayload(),dataType:"json",contentType:"application/json",success:o,error:r})}}}),define("core/components/transitionGroup",["core/core/createReactElement","lodash","react","prop-types","create-react-class"],function(e,t,i,s,n){"use strict";function o(e){var t={},s=0;return i.Children.forEach(e,function(e){t[e.key||""+s++]=e}),t}return n({displayName:"ReactTransitionGroup",propTypes:{component:s.any,childFactory:s.func},getDefaultProps:function(){return{component:"span",childFactory:t.identity}},getInitialState:function(){return{children:o(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var i=o(e.children),s=this.state.children;this.setState({children:t.assign({},s,i)});var n=void 0;for(n in i)!i[n]||s&&s.hasOwnProperty(n)||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n);for(n in s)!s[n]||i&&i.hasOwnProperty(n)||this.currentlyTransitioningKeys[n]||this.keysToLeave.push(n)},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var i=o(this.props.children);i&&i.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var i=o(this.props.children);i&&i.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var i=this.refs[e];i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var s=o(this.props.children);s&&s.hasOwnProperty(e)?this.performEnter(e):this.setState(function(i){var s=t.assign({},i.children);return delete s[e],{children:s}})},render:function(){var s=[];for(var n in this.state.children)if(this.state.children[n]){var o=this.state.children[n];s.push(i.cloneElement(this.props.childFactory(o),{ref:n,key:n}))}var r=t.assign({},this.props);return delete r.transitionLeave,delete r.transitionName,delete r.transitionAppear,delete r.transitionEnter,delete r.childFactory,delete r.transitionLeaveTimeout,delete r.transitionEnterTimeout,delete r.transitionAppearTimeout,delete r.component,e(this.props.component,r,s)}})}),define("core/components/wixTransitionItem",["lodash","create-react-class","santaComponents"],function(e,t,i){"use strict";return t({displayName:"wixTransitionItem",mixins:[i.mixins.animatableMixin],render:function(){return this.props.children},componentWillEnter:function(e){this.props.onWillEnter(this.props.refInParent,e)},componentWillLeave:function(e){this.props.onWillLeave(this.props.refInParent,e)}})}),define("core/components/wixTransitionGroup",["core/core/createReactElement","lodash","react","create-react-class","reactDOM","zepto","core/components/transitionGroup","core/components/wixTransitionItem","santaComponents"],function(e,t,i,s,n,o,r,a,c){"use strict";function p(e,i){t(e).map(n.findDOMNode).map(o).forEach(function(e){e.attr("data-leaving",!!i||null)})}var l=i.createFactory(r);return s({displayName:"wixTransitionGroup",mixins:[c.mixins.animationsMixin],getDefaultProps:function(){return{transition:"CrossFade",transitionDuration:2,reverse:!1,transitionCallback:t.noop}},getInitialState:function(){return this.leavingChildren={},this.enteringChildren={},{}},render:function(){return l(t.assign({childFactory:this.childWrapper,component:"div",ref:"group"},t.omit(this.props,"transition","transitionDuration","reverse","transitionCallback","animations","isSiteBusy")))},childWrapper:function(t){return e(a,{onWillEnter:this.onWillEnter,onWillLeave:this.onWillLeave,refInParent:t.props.refInParent,ref:t.props.refInParent,key:t.props.refInParent},t)},getInnerRefs:function(e){return t.map(e,function(e){return this.refs.group.refs[e]}.bind(this))},flush:function(){if(!t.isEmpty(this.enteringChildren)&&t.size(this.leavingChildren)===t.size(this.enteringChildren)){var e=this.getInnerRefs(t.keys(this.leavingChildren)),i=this.getInnerRefs(t.keys(this.enteringChildren));p(e,!0),p(i,!1);var s=t.values(this.enteringChildren).concat(t.values(this.leavingChildren));this.leavingChildren={},this.enteringChildren={};var n=t.isFunction(this.props.getTransitionParams)?this.props.getTransitionParams():{};this.transition(e,i,this.props.transition,this.props.transitionDuration,0,t.assign({reverse:this.props.reverse},n),{onComplete:function(){this.props.transitionCallback(function(){t.forEach(s,function(e){e()})})}.bind(this)})}},onWillEnter:function(e,t){this.enteringChildren[e]=t,this.flush()},onWillLeave:function(e,t){this.leavingChildren[e]=t,this.flush()}})}),define("core/components/behaviorHandlers/behaviorHandlersFactory",["lodash","utils"],function(e,t){"use strict";var i={},s={};t.sessionFreezer.freeze(i),t.sessionFreezer.freeze(s);var n={handle:e.noop};return{getHandler:function(s){return e.has(i,s)?i[s]:(t.log.warn("there is no behavior handler for type "+s),n)},registerHandler:function(e,t){i[e]=t},registerBehaviorPreprocessor:function(e,t){s[e]=t},getBehaviorPreprocessor:function(t){return s[t]||e.identity}}}),define("core/components/siteAspects/behaviorsService",["lodash","core/components/behaviorHandlers/behaviorHandlersFactory"],function(e,t){"use strict";function i(i,s,n,o){n=n||{};s=function(t,i){return e.filter(t,function(e){var t=!e.viewMode,s=e.viewMode&&e.viewMode.toLowerCase()===i.toLowerCase();return t||s})}(s,i.getSiteData().getViewMode()),t.getHandler(o).handle(s,i,n)}var s=["targetId","type","name","part","viewMode"];return{handleBehaviors:i,behaviorUniqueIdentifier:function(i){var n=t.getHandler(i.type);return n.getUniqueIdentifier?n.getUniqueIdentifier(i):e(i).at(s).map(function(t){return e.isPlainObject(t)?e.values(t):t}).join()}}}),define("core/components/fullScreenOverlay/fullScreenOverlay",["core/core/createReactElement","lodash","react","prop-types","create-react-class"],function(e,t,i,s,n){"use strict";return n({displayName:"fullScreenOverlay",propTypes:{siteWidth:s.number.isRequired,siteScrollingBlocker:s.object.isRequired,forceBackground:s.func.isRequired,disableForcedBackground:s.func.isRequired,isMobileDevice:s.bool.isRequired,overlayBackgroundOpacity:s.string},statics:{createOverlay:function(e,s){var n=i.createFactory(this);return e[""]=t.assign({},e[""],{wrap:[n,s]}),e}},getOverlayBackground:function(){return"rgba(0, 0, 0, "+(this.props.overlayBackgroundOpacity||1)+")"},componentDidMount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!0),this.props.isMobileDevice&&this.props.forceBackground(this.getOverlayBackground())},componentWillUnmount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!1),this.props.isMobileDevice&&this.props.disableForcedBackground()},render:function(){return e("div",null,e("div",{className:"fullScreenOverlay",key:"fullScreenOverlay"},e("div",{className:"fullScreenOverlayContent",style:{width:this.props.siteWidth,background:this.getOverlayBackground()},key:"fullScreenOverlayContent"},this.props.children)))}})}),define("core/components/compStateMixin",["lodash","santaProps"],function(e,t){"use strict";function i(e){var t={props:this.props.compProp,data:this.props.compData};return e.call(this,this.state,t)}return function(e){return{statics:{publicState:e},propTypes:{setCompState:t.Types.DAL.setCompState.isRequired,removeCompState:t.Types.DAL.removeCompState.isRequired,id:t.Types.Component.id.isRequired},componentWillUnmount:function(){this.props.removeCompState(this.props.id)},componentDidMount:function(){this.props.setCompState(this.props.id,i.call(this,e))},componentDidUpdate:function(){this.props.setCompState(this.props.id,i.call(this,e))}}}}),define("core/components/siteAspects/animationsService",[],function(){"use strict";function e(e){return e.getSiteAspect("animationsAspect")}return{playAnimations:function(t,i,s,n,o){var r=e(t);return r?r.playAnimations(i,s,n,o):o&&o()},hideElementsByAnimationType:function(t,i){var s=e(t);s&&s.hideElementsByAnimationType(i)},revertHideElementsByAnimations:function(t,i){var s=e(t);s&&s.revertHideElementsByAnimations(i)},stopAndClearAnimations:function(t,i,s){var n=e(t);n&&n.stopAndClearAnimations(i,s)},isAnimationPlayable:function(t,i){return e(t).isAnimationPlayable(i)}}}),define("core/components/siteAspects/BehaviorsAspect",["lodash","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/siteAspects/behaviorsService"],function(e,t,i){"use strict";function s(t){return e.at(t,d).join(",")}function n(e){return e.type+":"+e.sourceId}function o(t,i,s,n){var o=e(t).map(s).keyBy(n).value(),r=e.keys(o),a=e.keys(i),c=e.intersection(r,a);return{map:o,added:e.difference(r,c),removed:e.difference(a,c)}}function r(t,i,s){var n=e(t).pick(i).map(function(t,i){return!0===s?t:e.pick(t,s[i])}).values().value();return e.assign.apply(e,[{}].concat(n))}function a(s,n,o){var r=this._aspectSiteAPI.getSiteAPI(),a=r.getAllRenderedRootIds(),c=e.map(s,function(i){var s=function(t,i,s){return e(i).chain().pick(t).map(function(t){return e.flatten(e.values(t))}).find(function(t){return e(t).map("behavior").some(s)}).find(function(t){return e.isEqual(t.behavior,s)}).get("action").value()}(a,this._rawBehaviorsForActions,i);return t.getBehaviorPreprocessor(o)(i,s,r)}.bind(this));i.handleBehaviors(r,c,n,o)}function c(t){return e(t).map("action").groupBy(n).value()}function p(i,s,n){var o=i.getSiteAspect("actionsAspect");return e(s).reject(function(e){return o.isActionDisabled(e.action.name)}).filter(function(s){var n=t.getHandler(e.get(s,"behavior.type","animation"));return e.isUndefined(n.isEnabled)||n.isEnabled(s.behavior,i.getSiteAPI())}).map(function(t){return e.defaultsDeep(t,{behavior:{type:"animation",pageId:n},action:{pageId:n}})}).value()}function l(t){this._aspectSiteAPI=t,this._registeredActions={},this._registeredBehaviors={},this._ranOnce={},this._rawBehaviorsForActions={},this._behaviorsAdded={},this._behaviorsRemoved={},this._actionsAdded={},this._actionsRemoved={},this._actionsToBehaviorsMap={},this._behaviorsToActionsMap={},this._triggeredBehaviors=[],e.set(t.getSiteData(),u,{}),e.bindAll(this,["handleActions","handleAction","setBehaviorsForActions","getActions","getCompActions","convertBehaviors","_handleDidLayout","_handleRootsChanged","_handleRootsAddedDidLayout","resetBehaviorsRegistration","_registerPendingBehaviors","registerBehavior","extractBehaviors","handleBehavior"]),this._aspectSiteAPI.registerToDidLayout(this._handleDidLayout),this._aspectSiteAPI.registerToAddedRenderedRootsDidLayout(this._handleRootsAddedDidLayout),this._aspectSiteAPI.registerToRenderedRootsChange(this._handleRootsChanged),this.applySsrChanges=this._registerPendingBehaviors.bind(this)}var d=["sourceId","type","name"],u=["behaviors","registeredActionsByTypeSource"];return l.prototype={handleActions:function(t,n){e.forEach(this._actionsToBehaviorsMap,function(o,r){e(o).pick(e.map(t,s)).values().flatten().map(e.get.bind(e,this._registeredBehaviors[r])).groupBy("type").forEach(function(s,o){this._triggeredBehaviors=this._triggeredBehaviors.concat(s),s=function(t,s){return e.filter(t,function(e){var t=i.behaviorUniqueIdentifier(e);return!(e.playOnce&&s[t]||(s[t]=!0,0))})}(s,this._ranOnce),n=e.defaults({},n,{action:"action"}),t=t||[{name:"action"}],n.action=t[0].name,a.call(this,s,n,o)}.bind(this))}.bind(this))},handleAction:function(e,t){this.handleActions([e],t)},setBehaviorsForActions:function(t,i,s){var n=p(this._aspectSiteAPI,t,i);e.set(this._aspectSiteAPI.getSiteData(),u.concat([i,s]),c(t)),e.set(this._rawBehaviorsForActions,[i,s],n)},getActions:function(t,i){var s=e.get(this._aspectSiteAPI.getSiteData(),u,{});return e(s).map(i).flatMap(t+":"+i).compact().uniq().mapKeys(function(e){return e.name}).value()},getCompActions:function(t,i,s,n){var o=c(p(this._aspectSiteAPI,n,s));return e(e.get(o,[t+":"+i])).compact().uniq().mapKeys(function(e){return e.name}).value()},convertBehaviors:function(t,i){return e.map(t,function(t){if(t.behavior&&t.action)return t;var s={name:t.action,sourceId:t.sourceId||i,type:"comp"},n=e.omit(t,["action","sourceId","pageId","duration","delay"]);return n.targetId=n.targetId||i,e.assign(n.params,e.pick(t,["duration","delay"])),{action:s,behavior:n}})},_handleDidLayout:function(){var n=this._aspectSiteAPI.getAllRenderedRootIds();e.forEach(n,function(n){var r=e.flatten(e.values(this._rawBehaviorsForActions[n])),a=this._aspectSiteAPI.getSiteData().measureMap.top;r=e.filter(r,function(t){var i=t.action.sourceId,s=t.action.type,n=t.behavior.type,o=t.behavior.targetId,r="comp"!==s||e.isNumber(a[i]),c="widget"===n||"site"===n||e.isNumber(a[o]);return r&&c}),function(n,r){var a=o(n,this._registeredBehaviors[r]||{},"behavior",i.behaviorUniqueIdentifier);this._behaviorsAdded[r]=a.added.concat(this._behaviorsAdded[r]||[]),this._behaviorsRemoved[r]=a.removed.concat(this._behaviorsRemoved[r]||[]),e(this._registeredBehaviors[r]).pick(a.removed).forEach(function(i){var s=t.getHandler(i.type),n=e.find(this._triggeredBehaviors,function(t){return e.isEqual(t,i)}),o=!!n;e.has(s,"cancelPreCondition")&&!o&&s.cancelPreCondition(i,this._aspectSiteAPI),e.has(s,"cancel")&&s.cancel(i,this._aspectSiteAPI),this._triggeredBehaviors=e.without(this._triggeredBehaviors,n)}.bind(this)),this._registeredBehaviors[r]=a.map;var c=o(n,this._registeredActions[r]||{},"action",s);this._actionsRemoved[r]=this._actionsRemoved[r]||{},e.assign(this._actionsRemoved[r],e.pick(this._registeredActions[r],c.removed)),this._registeredActions[r]=c.map,this._actionsAdded[r]=c.added.concat(this._actionsAdded[r]||[]),this._actionsToBehaviorsMap[r]=e(n).groupBy(function(e){return s(e.action)}).mapValues(function(t){return e(t).map("behavior").map(i.behaviorUniqueIdentifier).value()}).value(),this._behaviorsToActionsMap[r]=e(n).groupBy(function(e){return i.behaviorUniqueIdentifier(e.behavior)}).mapValues(function(t){return e(t).map("action").map(s).value()}).value()}.call(this,r,n)}.bind(this));var a=r(this._registeredActions,n,this._actionsAdded),c=e(this._actionsRemoved).pick(n).values().reduce(e.assign,{}),p=e(this._registeredActions).pick(n).values().reduce(e.assign,{}),l=r(this._registeredBehaviors,n,this._behaviorsAdded);e.forEach(l,function(i,s){var o=e(this._behaviorsToActionsMap).pick(n).values().map(s).compact().flatten().map(e.get.bind(e,p)).every(function(e){return this._aspectSiteAPI.getSiteAspect("actionsAspect").needToRunPreConditions(e)}.bind(this));if((!i.playOnce||!this._ranOnce[s])&&o){var r=t.getHandler(i.type);e.has(r,"handlePreCondition")&&r.handlePreCondition(i,this._aspectSiteAPI)}}.bind(this)),e.forEach(n,function(e){this._actionsAdded[e]=[],this._actionsRemoved[e]={},this._behaviorsAdded[e]=[],this._behaviorsRemoved[e]=[]}.bind(this)),e.isEmpty(c)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(c),e.isEmpty(a)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsAddedLayouted(a)},_handleRootsChanged:function(t,i){var s=r(this._registeredActions,i,!0);e.forEach(i,function(t){this._rawBehaviorsForActions[t]=[],this._registeredActions[t]={},this._registeredBehaviors[t]={},this._behaviorsAdded[t]=[],this._behaviorsRemoved[t]=[],this._actionsAdded[t]=[],this._actionsRemoved[t]={},this._actionsToBehaviorsMap[t]={},this._behaviorsToActionsMap[t]={},e.set(this._aspectSiteAPI.getSiteData(),u.concat(t),{})}.bind(this)),this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(s)},_handleRootsAddedDidLayout:function(){},resetBehaviorsRegistration:function(){this._ranOnce={}},_registerPendingBehaviors:function(){e.forEach(this._aspectSiteAPI.getSiteData().pendingBehaviours,function(e){this.registerBehavior(e,e.callback)}.bind(this))},registerBehavior:function(t,i){var s=this._aspectSiteAPI.getSiteAPI().getAspectComponentData("behaviorsAspect",t.targetId)||{},n=e.get(s,"behaviorsWaitingToFlush",[]);e.set(s,["behaviorsWaitingToFlush",n.length],{name:t.name,params:t.params,callback:i}),this._aspectSiteAPI.setAspectComponentData("behaviorsAspect",t.targetId,s)},extractBehaviors:function(t){var i=this._aspectSiteAPI.getSiteAPI().getAspectComponentData("behaviorsAspect",t)||{};return e.get(i,"behaviorsWaitingToFlush",[])},clearBehaviorsAfterFlush:function(t){var i=this._aspectSiteAPI.getSiteAPI().getAspectComponentData("behaviorsAspect",t);e.get(i,"behaviorsWaitingToFlush")&&(delete i.behaviorsWaitingToFlush,this._aspectSiteAPI.setAspectComponentData("behaviorsAspect",t,i))},handleBehavior:function(e,t){a.call(this,[e],t,e.type)}},l}),define("core/components/siteAspects/animationsAspect",["lodash","reactDOM"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animationsPackage=this._siteData.animations,this._liveSequenceIdsByGroup={}}function s(t){for(var i=t.targetId||t.sourceId;e.isArray(i);)i=i[0];return this._aspectSiteAPI.getRootOfComponentId(i)||t.pageId}function n(i,n){e.forEach(i,function(e){var i=this.animationsPackage.getProperties(e.name);if(i&&i.hideOnStart){var o=s.call(this,e),r=this._aspectSiteAPI.getComponentByPageAndCompId(o,e.targetId||e.sourceId),a=r?t.findDOMNode(r):null;a&&(a.style.opacity=n)}}.bind(this))}return i.prototype.previewAnimation=function(e,t,i,s){var n=void 0,o=void 0,r=this._aspectSiteAPI.getPageById(t);if(r)return n=r.sequence(),o={props:"clip,opacity,transform,transform-origin",immediateRender:!1},n.add(e,i.name,i.duration,i.delay,i.params),n.add(e,"BaseClear",0,0,o),s&&n.onCompleteAll(s),n.execute()},i.prototype.addAnimationToSequence=function(e,t,i){var n=void 0,o=t[s.call(this,e)];return o.add(e.targetId,e.name,e.params.duration,e.params.delay,e.params,0),i&&(n="clip,opacity,transform",o.add(e.targetId,"BaseClear",0,0,{props:n,immediateRender:!1})),e.targetId},i.prototype.playAnimations=function(t,i,n,o){var r={},a={},c=[];e.forEach(i,function(t){var i=s.call(this,t),o=this._aspectSiteAPI.getPageById(i),c=this._aspectSiteAPI.getPageComponents(i),p=t.targetId||t.sourceId;e.isString(p)&&!c[p]||(a[i]||(a[i]=o.sequence(),r[i]=[]),this.addAnimationToSequence(t,a,n),r[i].push(p))}.bind(this));var p=1,l=function(i){p--,this._liveSequenceIdsByGroup[t]=e.reject(this._liveSequenceIdsByGroup[t],{sequenceId:i}),0===p&&o()}.bind(this);return e.forEach(a,function(t,i){t.hasAnimations()&&(p++,t.onCompleteAll(l.bind(this,t.getId())),r[i]=e.compact(r[i]),c.push({parentId:i,sequenceId:t.getId()}),t.execute())}.bind(this)),l(),this._liveSequenceIdsByGroup[t]=this._liveSequenceIdsByGroup[t].concat(c),r},i.prototype.hideElementsByAnimationType=function(e){n.call(this,e,0)},i.prototype.revertHideElementsByAnimations=function(e){n.call(this,e,"")},i.prototype.previewTransition=function(e,t,i,s,n){var o=void 0;if(o="masterPage"===i?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var r=o.sequence();return r.add({sourceRefs:e,destRefs:t},s.name,s.duration,s.delay,s.params),r.add(e.concat(t),"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),n&&r.onCompleteAll(n),r.execute()}},i.prototype.stopPreviewAnimation=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this._aspectSiteAPI.getAllRenderedRoots();e.forEach(s,function(e){e.stopSequence(t,i)})},i.prototype.stopAndClearAllAnimations=function(){e(this._liveSequenceIdsByGroup).keys().forEach(this.stopAndClearAnimations.bind(this))},i.prototype.stopAndClearAnimations=function(t,i){e.forEach(this._liveSequenceIdsByGroup[t],function(e){var t=this._aspectSiteAPI.getPageById(e.parentId);t&&t.stopSequence(e.sequenceId,i)}.bind(this)),this._liveSequenceIdsByGroup[t]=[]},i.prototype.isAnimationPlayable=function(e){return s.call(this,e)},i}),define("core/components/designDataChangeHandlers/designDataChangeBgBehaviorsHandler",["lodash","utils"],function(e,t){"use strict";function i(i,s,r,a){var c=i.getSiteAspect("behaviorsAspect");e.forEach(a,function(i){var a=e.get(r,["background",n[i.part]],{}),p=e.get(o,[i.name,"defaults","params"]);c.handleBehavior(function(i,s,n,o){var r={name:s.name,type:s.type,targetId:[[i,t.balataConsts.BALATA,s.part]],params:e.clone(s.params)||{}};return e.isEmpty(n)||e.assign(r.params,n,e.pick(o,e.keys(n))),r}(s,i,p,a),{group:s})})}function s(t,s,r,a){var c=function(e,t){return e.getComponentById(t).refs.balata}(t,s),p=r||{},l=function(t,i,s){var n=[];e.forEach(e.filter(t.dataChangeBehaviors,{trigger:"out"}),function(e){n.push(e)}),e.forEach(e.filter(i.dataChangeBehaviors,{trigger:"in"}),function(t){e.find(n,e.pick(t,["type","part","name"]))||n.push(t)});var o={callbacks:{onComplete:function(){s.setState({transforms:{}})}}};return e.map(n,function(t){var i=e.defaults({},o,t.params);return e.defaults({params:i},t)})}(r,a,c);!function(e,t){e.getSiteAspect("animationsAspect").stopAndClearAnimations(t)}(t,s),i(t,s,a,l),c.setState({transforms:function(t,i){var s=e(i).map("part").uniq().value(),r=e.transform(i,function(t,i){var s=e.get(o,[i.name,"defaults","params"]);t[i.part]=e.assign({},t[i.part],s)},{});return e.transform(s,function(i,s){var o=e.get(t,["background",n[s]]);i[s]=e.merge({},r[s],e.pick(o,e.keys(r[s])))},{})}(p,l)})}var n=t.balataConsts,o={FadeIn:{type:"animation",defaults:{params:{}}},FadeOut:{type:"animation",defaults:{params:{}}},Scale:{type:"animation",defaults:{params:{scale:1}}}};return Object.freeze(o),{handle:function(t,i,n,o){e.isEmpty(e.get(n,"dataChangeBehaviors"))&&e.isEmpty(e.get(o,"dataChangeBehaviors"))||e.get(o,"background.mediaRef.type")!==e.get(n,"background.mediaRef.type")||s(t,i,n,o)}}}),define("core/components/siteAspects/DesignDataChangeAspect",["lodash","core/components/designDataChangeHandlers/designDataChangeBgBehaviorsHandler"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredHandlers={},this.registerHandler("designDataChangeBgBehaviorsHandler",t.handle)}return i.prototype={registerHandler:function(e,t){this._registeredHandlers[e]=t},unregisterHandler:function(t){this._registeredHandlers=e.omit(this._registeredHandlers,t)},notify:function(e,t,i){this.propagate(e,t,i)},propagate:function(t,i,s){e.forEach(this._registeredHandlers,function(e){e(this._aspectSiteAPI,t,i,s)}.bind(this))}},i}),define("core/components/siteAspects/parentFrameAspect",["core/core/siteAspectsRegistry","lodash"],function(e,t){"use strict";function i(e){this.aspectSiteApi=e,this.storedHeight=0,e.registerToDidLayout(function(){var e=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap,i=t.get(e,"height.masterPage",0);if(i&&i!==this.storedHeight){this.storedHeight=i;var s=void 0;window.parent.postMessage?s=window.parent:window.parent.document.postMessage&&(s=window.parent.document),s&&void 0!==s&&s.postMessage(i,"*")}}.bind(this))}return e.registerSiteAspect("parentFrame",i),i}),define("core/core/pageItemRegistry",["utils"],function(e){"use strict";var t={Image:function(e,t,i){var s={id:"imageZoomComp",key:"imageZoomComp",dataQuery:"#"+e.id,skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};return t&&(s.propertyQuery=t),i.isMobileView()?(s.skin="wysiwyg.viewer.skins.TouchMediaZoom",s.componentType="wysiwyg.viewer.components.TouchMediaZoom"):(i.isMobileDevice()||i.isTabletDevice())&&(s.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"),s},PermaLink:function(e,t,i){var s={id:"appPartZoomComp_"+i.getRootNavigationInfo().pageAdditionalData.split("/")[0],key:"appPartZoomComp",dataQuery:"#"+e.id,skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};return t&&(s.propertyQuery=t),i.isMobileView()&&(s.skin="wysiwyg.skins.MobileAppPartZoomSkin"),s}};return{registerPageItem:function(i,s){t[i]?e.log.error("page item already registered "+i):t[i]=s},getCompStructure:function(e,i,s,n){return t[e]?t[e](i,s,n):null},clear:function(){t={}}}}),define("core/core/pageItemAspect",["lodash","core/core/pageItemRegistry","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(t){var i={};if(t){var s=t.split(" ");return e.forEach(s,function(e){var t=e.split(":");t[0]&&t[1]&&(i[t[0]]=t[1])}),e.isEmpty(i)?t:i}}function n(i){var n=i.getSiteData(),o=function(i){var n=i.getExistingRootNavigationInfo(i.getFocusedRootId()),o=i.getDataByQuery(n.pageItemId);if(!o)return null;var r=s(n.pageItemAdditionalData),a=e.get(r,"propertyQuery"),c=t.getCompStructure(o.type,o,a,i);return c||null}(n);return o?[{structure:o,pageId:n.getFocusedRootId(),props:function(t){var i={},n=t.getFocusedRootId(),o=s(t.getExistingRootNavigationInfo(n).pageItemAdditionalData);if(e.isPlainObject(o)){var r=t.getDataByQuery(o.galleryId)||o.galleryId;r&&(i.pageItemAdditionalData=r),o.galleryCompId&&(i.galleryCompId=o.galleryCompId)}else i.pageItemAdditionalData=o;return i}(n)}]:null}function o(){}o.prototype={getComponentsToRender:n},i.registerSiteAspect("pageItem",o)}),define("core/core/nonPageItemZoomAspect",["lodash","core/core/pageItemRegistry","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(t){this._aspectSiteAPI=t,e.bindAll(this,["zoom","unzoom"])}return s.prototype={zoom:function(e,t){if(!e||"Image"!==e.type||!t)throw"nonPageItemZoom should be used only with (imageData, galleryData)";this._aspectSiteAPI.setAspectGlobalData("nonPageItemZoom",{image:e,galleryData:t})},unzoom:function(){this._aspectSiteAPI.removeAspectGlobalData("nonPageItemZoom")},getComponentsToRender:function(e){var i=e.getAspectGlobalData("nonPageItemZoom");if(i){var s=e.getSiteData(),n=t.getCompStructure("Image",i.image,null,s);return n.compData=i.image,delete n.dataQuery,[{structure:n,props:{key:n.key,compData:i.image,closeFunction:this.unzoom,pageItemAdditionalData:i.galleryData}}]}return null}},i.registerSiteAspect("nonPageItemZoom",s),s}),define("core/components/siteAspects/externalScriptLoaderAspect/externalScriptRegistry",["lodash","utils"],function(e,t){"use strict";function i(e,i){return"FACEBOOK"===e?{NAME:"FacebookSDK",SRC:o({lang:function(e){var i={en:"en_US",es:"es_ES",pt:"pt_BR",ru:"ru_RU",fr:"fr_FR",de:"de_DE",ja:"ja_JP",ko:"ko_KR",it:"it_IT",pl:"pl_PL",tr:"tr_TR",nl:"nl_NL",sv:"sv_SE",da:"da_DK",no:"nn_NO"};return i[t.wixUserApi.getLanguage(e.cookie,e.currentUrl,e.userLanguage)]||i.en}(i),sdkVersion:s,appId:n})}:"GOOGLE"===e?{NAME:"GoogleApi",SRC:"//apis.google.com/js/plusone.js",actionBefore:function(){window.___gcfg={lang:t.wixUserApi.getLanguage(i.cookie,i.currentUrl,i.userLanguage)}}}:void 0}var s="v2.4",n="304553036307597",o=e.template("//connect.facebook.net/<%= lang %>/sdk.js#xfbml=1&appId=<%= appId %>&version=<%= sdkVersion %>");return{getScriptDescription:i}}),define("core/components/siteAspects/externalScriptLoaderAspect",["lodash","core/core/siteAspectsRegistry","core/components/siteAspects/externalScriptLoaderAspect/externalScriptRegistry"],function(e,t,i){"use strict";function s(e){this.siteAPI=e}var n="externalScriptLoader";return s.prototype={loadScript:function(t,s,o){var r=e.get(this.siteAPI.getAspectGlobalData(n),t),a=!r;if(a){var c=i.getScriptDescription(t,o);if(!c)return;r={script:c,callbacks:[]}}s&&r.callbacks.push({callback:s,context:o}),a&&e.isFunction(r.script.actionBefore)&&r.script.actionBefore(),(s||a)&&this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,r]])),a&&this.siteAPI.forceUpdate()},unsubscribe:function(t,i){var s=e.get(this.siteAPI.getAspectGlobalData(n),t);s&&(e.pull(s.callbacks,i),this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,s]])))}},t.registerSiteAspect(n,s),s}),define("core/components/siteAspects/windowFocusEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(e,t,i){"use strict";var s=i.stringUtils,n=["focus","blur"],o=function(e){this._aspectSiteAPI=e,this._registerToFocusEvents()};o.prototype={_registerToFocusEvents:function(){this._compsRegistry={},e.forEach(n,function(e){this._compsRegistry[e]={},this._aspectSiteAPI.registerToFocusEvents(e,this.propagateFocusEvent.bind(this,e))}.bind(this))},registerToFocusEvent:function(e,t){this._compsRegistry[e][t.props.id]=t.props.id},unregisterFromFocusEvent:function(e,t){delete this._compsRegistry[e][t.props.id]},propagateFocusEvent:function(t){var i=this._compsRegistry[t],n="on"+s.capitalize(t),o=void 0;e.forEach(i,function(e){(o=this._aspectSiteAPI.getComponentById(e))?o[n]&&o[n]():delete this._compsRegistry[t][e]}.bind(this))}},t.registerSiteAspect("windowFocusEvents",o)}),define("core/components/siteAspects/windowScrollEventAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(t,i){e.forEach(i,function(i){!function(t,i){e.forEach(i,function(i){var s=e.findLast(i.scrollModes,function(e){return e.settings.scrollPos<=t});s&&i.debouncedActivateModeById(s.modeId)})}(t,i)})}function s(e){var t=this;this._aspectSiteAPI=e,this._registeredCompIds={},this.invokeOnce=[],this._registeredScrollModes={},this._prevScrollPosition={x:0,y:0},this._prevScrollDirection="",this._aspectSiteAPI.getSiteData().isInSSR()?this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",{x:0,y:0}):this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",this._aspectSiteAPI.getSiteScroll()),this._aspectSiteAPI.registerToSiteReady(function(){t._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t._aspectSiteAPI.getSiteScroll()),e.registerToScroll(t.propagateScrollEvent.bind(t)),t._aspectSiteAPI.isExperimentOpen("scrollModes")&&e.registerToRenderedRootsChange(t.cleanNonRenderedScrollModes.bind(t))})}s.prototype={scrollSiteTo:function(e,t,i){if(i){if(!function(e){var t=this._aspectSiteAPI.getSiteData(),i=t.getScreenSize(),s=t.measureMap.height.masterPage;if(!(s>i.height))return!1;var n=this.getScrollPosition().y,o=n+i.height;return e>n&&s>o||e<n&&n>0}.call(this,t))return void i();this.invokeOnce.push(i)}this._aspectSiteAPI.scrollSiteTo(e,t)},registerToScroll:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToScroll:function(e){delete this._registeredCompIds[e.props.id]},propagateScrollEvent:function(t){var s=this;this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t);var n=this.getScrollDirection(t);this._aspectSiteAPI.isExperimentOpen("scrollModes")&&i(t.y,this._registeredScrollModes),this._prevScrollPosition=t,this._prevScrollDirection=n,e.forEach(this._registeredCompIds,function(e){var i=s._aspectSiteAPI.getComponentById(e);i?i.onScroll&&i.onScroll(t,n):delete s._registeredCompIds[e]}),e.forEach(this.invokeOnce,function(e){e(t,n)}),this.invokeOnce=[]},getScrollDirection:function(e){return e.y!==this._prevScrollPosition.y?e.y>this._prevScrollPosition.y?"DOWN":"UP":e.x!==this._prevScrollPosition.x?e.x>this._prevScrollPosition.x?"RIGHT":"LEFT":this._prevScrollDirection},getScrollPosition:function(){return this._aspectSiteAPI.getAspectGlobalData("windowScrollEvent")},registerCompScrollModes:function(t,i,s){this._registeredScrollModes[i]=this._registeredScrollModes[i]||{};var n=e.findKey(this._registeredScrollModes,t);n&&n!==i&&delete this._registeredScrollModes[n][t];var o=this._aspectSiteAPI;this._registeredScrollModes[i][t]={scrollModes:e.sortBy(s,"settings.scrollPos"),debouncedActivateModeById:function(e,t,i){var s=void 0,n=void 0;return function(o){o!==n&&(n=o,clearTimeout(s),s=setTimeout(function(){e.activateModeById(t,i,n)},50))}}(o,t,i)}},clearCompScrollModes:function(t){var i=e.findKey(this._registeredScrollModes,t);i&&delete this._registeredScrollModes[i][t]},cleanNonRenderedScrollModes:function(t,i){this._aspectSiteAPI.isExperimentOpen("scrollModes")&&(this._registeredScrollModes=e.omit(this._registeredScrollModes,i))}},t.registerSiteAspect("windowScrollEvent",s)}),define("core/components/siteAspects/windowResizeEventAspect",["lodash","zepto","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(e){this._aspectSiteAPI=e,this._registeredCompIds={},this._registeredCompIdsOrientation={},this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this)),this._aspectSiteAPI.registerToOrientationChange(this.propagateOrientationEvent.bind(this))}s.prototype={registerToResize:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToResize:function(e){delete this._registeredCompIds[e.props.id]},registerToOrientationChange:function(e){this._registeredCompIdsOrientation[e.props.id]=e.props.id},unregisterToOrientationChange:function(e){delete this._registeredCompIdsOrientation[e.props.id]},propagateResizeEvent:function(){var i=null;e.forEach(this._registeredCompIds,function(e){var s=this._aspectSiteAPI.getComponentById(e);if(s){if(s.onResize){if(!i){var n=t(window.document.body);i={height:n.height(),width:n.width()}}s.onResize(i)}}else delete this._registeredCompIds[e]}.bind(this))},propagateOrientationEvent:function(){e.forEach(this._registeredCompIdsOrientation,function(e){var t=this._aspectSiteAPI.getComponentById(e);t?t.onOrientationChange&&t.onOrientationChange():delete this._registeredCompIdsOrientation[e]}.bind(this))}},i.registerSiteAspect("windowResizeEvent",s)}),define("core/components/siteAspects/windowClickEventAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";var i=function(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToDocumentClick(this.propagateDocumentClickEvent.bind(this)),this._registeredCompIds=[]};i.prototype={registerToDocumentClickEvent:function(t){this._registeredCompIds=e.union(this._registeredCompIds,[t])},unRegisterToDocumentClickEvent:function(t){e.pull(this._registeredCompIds,t)},propagateDocumentClickEvent:function(t){e.forEach(this._registeredCompIds,function(e){var i=this._aspectSiteAPI.getComponentById(e);i&&i.onDocumentClick&&i.onDocumentClick(t)}.bind(this))}},t.registerSiteAspect("windowClickEventAspect",i)}),define("core/components/siteAspects/windowKeyboardEventAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToKeyDown(this.propagateKeyDownSpecificKeyEvent.bind(this)),this._aspectSiteAPI.registerToKeyUp(this.propagateKeyboardEvent.bind(this,"KeyUp")),this._registeredCompIds={specificKeysKeyDown:{Escape:[],ArrowRight:[],ArrowLeft:[]},KeyDown:[],KeyUp:[]}}var s={39:"ArrowRight",37:"ArrowLeft",27:"Escape",13:"Enter",32:"Space"};i.prototype={registerToKeyDownWithFocus:function(e,t){t.addEventListener("focus",function(){this.registerToKeyDown(e)}.bind(this)),t.addEventListener("blur",function(){this.unRegisterKeyDown(e)}.bind(this))},registerToEscapeKey:function(e){this._registeredCompIds.specificKeysKeyDown.Escape.push(e.props.id)},registerToArrowRightKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowRight.push(e.props.id)},registerToArrowLeftKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowLeft.push(e.props.id)},unRegisterKeys:function(t){e.forEach(this._registeredCompIds.specificKeysKeyDown,function(i,s){this._registeredCompIds.specificKeysKeyDown[s]=e.without(this._registeredCompIds.specificKeysKeyDown[s],t.props.id)}.bind(this))},registerToKeyDown:function(e){this._registeredCompIds.KeyDown.push(e.props.id)},unRegisterKeyDown:function(t){this._registeredCompIds.KeyDown=e.without(this._registeredCompIds.KeyDown,t.props.id)},registerToKeyUp:function(e){this._registeredCompIds.KeyUp.push(e.props.id)},unRegisterKeyUp:function(t){this._registeredCompIds.KeyUp=e.without(this._registeredCompIds.KeyUp,t.props.id)},unRegisterAll:function(e){this.unRegisterKeys(e),this.unRegisterKeyDown(e),this.unRegisterKeyUp(e)},propagateKeyDownSpecificKeyEvent:function(t){this.propagateKeyboardEvent("KeyDown",t);var i=s[t.keyCode||t.which];if(!e.isEmpty(this._registeredCompIds.specificKeysKeyDown[i])){var n=e.last(this._registeredCompIds.specificKeysKeyDown[i]),o=this._aspectSiteAPI.getComponentById(n),r="on"+i+"Key";o?o[r]&&(t.preventDefault(),o[r]()):this._registeredCompIds.specificKeysKeyDown[i]=e.without(this._registeredCompIds.specificKeysKeyDown[i],n)}},propagateKeyboardEvent:function(t,i){!e.isEmpty(this._registeredCompIds[t])&&function(e){return Boolean(s[e.keyCode||e.which])}(i)&&e.forEach(this._registeredCompIds[t],function(s){var n=this._aspectSiteAPI.getComponentById(s),o="on"+t;n?n[o]&&(i.preventDefault(),n[o](i)):this._registeredCompIds[t]=e.without(this._registeredCompIds[t],s)}.bind(this))}},t.registerSiteAspect("windowKeyboardEvent",i)}),define("core/components/siteAspects/addComponentAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,e.bindAll(this,e.functionsIn(this))}return i.prototype={getComponentsToRender:function(t){var i=t.getAspectGlobalData("addComponent");return e.values(i)},addComponent:function(e,t,i){var s={};s[e]={structure:t,props:i},this._aspectSiteAPI.updateAspectGlobalData("addComponent",s),this._aspectSiteAPI.forceUpdate()},deleteComponent:function(e){var t=this._aspectSiteAPI.getAspectGlobalData("addComponent");delete t[e],this._aspectSiteAPI.setAspectGlobalData("addComponent",t),this._aspectSiteAPI.forceUpdate()}},t.registerSiteAspect("addComponent",i),i}),define("core/components/siteAspects/AudioAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(i,s){return e.assign({url:function(e){var i=e.scriptsDomainUrl;t.stringUtils.endsWith(i,"/")||(i+="/");return i+"services/third-party/soundmanager2/V2.97a.20150601/"}(i.siteAPI.getSiteData().serviceTopology),flashVersion:9,preferFlash:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,html5PollingInterval:100,onready:function(){i.siteAPI.updateAspectGlobalData(a,{soundManagerReady:!0})}},s||{})}function n(){p=c}function o(e){var t=s(e,{preferFlash:!0,useHTML5Audio:!1,onready:function(){e.siteAPI.updateAspectGlobalData(a,{soundManagerOnResetup:!1,soundManagerReady:!0})}});e.soundManager.destruct(),e.soundManager.reset().setup(t),e.soundManager.beginDelayedInit()}function r(t){this.siteAPI=t,this.soundManager=null,this.siteAPI.updateAspectGlobalData(a,{nowPlayingComp:"",soundManagerReady:!1,soundManagerOnResetup:!1}),e.bindAll(this,e.functionsIn(this))}var a="AudioAspect",c=10,p=c,l=function(e){var t=s(e);e.soundManager.setup(t),setTimeout(function(){d(e)},p)},d=function e(i){null===i.soundManager?requirejs(["SoundManager"],function(t){i.soundManager=t.getInstance(),e(i)}):i.siteAPI.getAspectGlobalData(a).soundManagerReady?n():1e4>p?(l(i),p*=1.5):(n(),t.log.verbose("Failed to setup SoundManager."))};return r.prototype={loadSoundManagerAPI:function(){this.siteAPI.getSiteData().isInSSR()||window.isMockWindow||d(this)},onHTML5ErrorTryToReloadWithFlash:function(){!function(e){l!==o&&(e.siteAPI.updateAspectGlobalData(a,{soundManagerOnResetup:!0,soundManagerReady:!1}),l=o,o(e))}(this)},createAudioObj:function(e){return this.siteAPI.getAspectGlobalData(a).soundManagerReady?(e.id&&this.soundManager.getSoundById(e.id)&&this.soundManager.destroySound(e.id),this.soundManager.createSound(e)):(this.loadSoundManagerAPI(),!1)},updatePlayingComp:function(e){this.siteAPI.getAspectGlobalData(a).soundManagerReady||this.loadSoundManagerAPI(),this.siteAPI.updateAspectGlobalData(a,{nowPlayingComp:e.props.id})},updatePausingComp:function(){this.siteAPI.updateAspectGlobalData(a,{nowPlayingComp:""})}},i.registerSiteAspect(a,r),r}),define("core/components/siteAspects/quickActionBarAspect",["lodash","siteUtils","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(t,i){var s=e.find(t,{appId:i.appId});s?e.merge(s,i):t.push(i)}function n(t){this.aspectSiteApi=t,this.aspectSiteApi.updateAspectGlobalData(o,{dynamicActions:[]}),e.bindAll(this,e.functionsIn(this))}var o="QuickActionBarAspect",r=e.map(t.constants.SUPPORTED_DYNAMIC_ACTIONS,"appId");Object.freeze(r),n.prototype={updateDynamicActions:function(t){!function(t){var i=e(t).map("appId").difference(r).value();if(e.some(i))throw new Error('failed to add unsupported dynamic actions with app ids: "'+i+'"')}(t=[].concat(t));var i=this.aspectSiteApi.getAspectGlobalData(o).dynamicActions;!function(t,i){e.forEach(i,e.partial(s,t,e))}(i,t),this.aspectSiteApi.updateAspectGlobalData(o,{dynamicActions:i}),this.aspectSiteApi.forceUpdate()}},i.registerSiteAspect(o,n)}),define("core/components/actionsAspectActions/bgScrubAction",["lodash","utils","experiment"],function(e,t,i){"use strict";function s(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviors=[],this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1,this.didFireInitialResizeEvent=!1}var n=t.balataConsts,o=t.triggerTypesConsts,r={BackgroundParallax:[n.BALATA,n.MEDIA],BackgroundReveal:[n.BALATA,n.MEDIA],BackgroundZoom:[n.BALATA,n.MEDIA],BackgroundFadeIn:[n.BALATA],BackgroundBlurIn:[n.BALATA,n.MEDIA],SiteBackgroundParallax:[]};return Object.freeze(r),s.prototype=e.create(Object.prototype,{constructor:s,ACTION_TRIGGERS:[o.PAGE_CHANGED,o.PAGE_RELOADED,o.TRANSITION_ENDED,o.SCROLL,o.RESIZE],ACTION_NAME:"bgScrub",_currentScroll:{x:0,y:0},_currentPopupScroll:{x:0,y:0},shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),s=this._siteData.isMobileView();return e&&!t&&!i&&!s},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this._currentPageBehaviors=[],this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},executeAction:function(){e.isEmpty(this._currentPageBehaviors)||this.setAnimationsProgress()},setSequenceProgress:function(e,i,s){var n=s.getSequence(e.sequenceId);n?n.progress(i):t.log.error("sequence id %s returned no sequence",e.sequenceId)},setAnimationsProgress:function(){var t=Math.max(this._currentScroll.y,0);e.forEach(this._liveSequenceIds,function(e){if(this.isComponentInViewport(e.compId,e.parentId)){var i=(this._viewportHeight+t-e.componentTop)/e.maxTravel;this.setSequenceProgress(e,i,this.getComponentParent(e.parentId))}}.bind(this))},getComponentMeasure:function(t){var i=this._siteData.measureMap||{};return{height:e.get(i,["height",t],0),top:e.get(i,["absoluteTop",t],0)}},setSiteMeasure:function(){this._viewportHeight=this._siteData.getScreenHeight(),this._siteHeight=this.getSiteHeight()},initiateBehaviors:function(){this._currentPageBehaviors=this.getCurrentPageBehaviors(this._behaviors,this._siteData.getPrimaryPageId())},getComponentParent:function(e){return"masterPage"===e?this._aspectSiteAPI.getMasterPage():"siteBackground"===e?this._aspectSiteAPI.getComponentById("SITE_BACKGROUND"):this._aspectSiteAPI.getCurrentPage()},isComponentInViewport:function(e,i){if(t.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,i))return!0;var s=this._currentScroll,n=this._aspectSiteAPI.getCurrentPopupId();return n&&n===this._aspectSiteAPI.getRootOfComponentId(e)&&(s=this._currentPopupScroll),t.viewportUtils.isInViewport(this._aspectSiteAPI,s,e)},getSequenceParams:function(){return{suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0}},getCurrentPageBehaviors:function(t,i){return e.filter(t,function(e){return e.action===this.ACTION_NAME&&(e.pageId===i||"masterPage"===e.pageId||"siteBackground"===e.pageId)}.bind(this))},createSequences:function(){var t=!1;if(this._liveSequenceIds=e.map(this._currentPageBehaviors,function(i){var s="siteBackground"===i.pageId,n=this.getComponentParent(i.pageId).sequence(),o=this.getComponentMeasure(i.targetId),a=this.animations.getProperties(i.name),c=(a.getMaxTravel||e.noop)(o,this._viewportHeight,this._siteHeight)||this._viewportHeight,p=i.params||{};p.browserFlags=this._siteData.browserFlags(),p.componentTop=o.top,p.componentHeight=o.height,p.viewPortHeight=this._viewportHeight;var l=[[i.targetId].concat(r[i.name])];n.add(l,i.name,i.duration,i.delay,p),t=a.shouldDisableSmoothScrolling||t;var d=n.execute(this.getSequenceParams());return{path:l,compId:i.targetId,parentId:i.pageId,behaviorName:i.name,componentTop:s?this._viewportHeight:o.top,componentHeight:o.height,maxTravel:c,sequenceId:d}}.bind(this)),i.isOpen("DisableSmoothScrolling",this._siteData)&&t&&this._siteData.browserFlags().shouldDisableSmoothScrolling){this._aspectSiteAPI.getSiteAspect("mouseWheelOverride").overrideMouseWheel()}},handleTrigger:function(e,t){if(this._isEnabled)switch(this._currentScroll=function(e,t){if(e===o.SCROLL)return t;var i=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");return i&&i.getScrollPosition?i.getScrollPosition():this._aspectSiteAPI.getSiteScroll()}.call(this,e,t),this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),e){case o.PAGE_CHANGED:case o.TRANSITION_ENDED:this.clearAllAndReload(0),this._animateOnNextTick=!0,this._behaviorsUpdated=!1;break;case o.PAGE_RELOADED:case o.SCROLL:case o.RESIZE:(this._behaviorsUpdated||this._viewportHeightUpdated)&&(this.clearAllAndReload(0),this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1),this._animateOnNextTick=!0}},_shouldForceResizeEvent:function(){this.didFireInitialResizeEvent&&this._siteData.getScreenHeight()===this._viewportHeight||(this.didFireInitialResizeEvent=!0,this._viewportHeight=this._siteData.getScreenHeight(),this._viewportHeightUpdated=!0,this.handleTrigger(o.RESIZE))},_executeActionOnTick:function(){this._shouldForceResizeEvent(),this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},clearAllAndReload:function(e){this.stopAndClearAnimations(e),this.initiateBehaviors(),this.setSiteMeasure(),this.createSequences()},stopAndClearAnimations:function(t){var i=this._aspectSiteAPI.getSiteAspect("mouseWheelOverride");i&&i.releaseMouseWheel&&i.releaseMouseWheel(),t=e.isNumber(t)?t:1,e.forEach(this._liveSequenceIds,function(e){var i=this.getComponentParent(e.parentId);i.getSequence(e.sequenceId)&&i.stopSequence(e.sequenceId,t)}.bind(this)),this._liveSequenceIds=[]},handleBehaviorsUpdate:function(e){this._behaviors=e,this._behaviorsUpdated=!0},getSiteHeight:function(){var t=this._aspectSiteAPI.getSiteData().measureMap||{},i=this._aspectSiteAPI.getRenderFlag("extraSiteHeight");return e.get(t,"height.masterPage",0)+(t.siteMarginBottom||0)+(i||0)}}),s}),define("core/components/actionsAspectActions/baseAction",["lodash","utils"],function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,this._siteData=t.getSiteData(),this.animations=this._siteData.animations,this._isEnabled=!1,this._triggeredOnce={},e.bindAll(this,e({}).assignIn(this).pickBy(e.isFunction).keys().value())}var s=t.triggerTypesConsts;return i.prototype=e.create(Object.prototype,{constructor:i,ACTION_TRIGGERS:[],ACTION_NAME:"BASE_ACTION",ACTIONS_SUPPORTED:["BASE_ACTION"],shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),s=this._siteData.isMobileView();return e&&!t&&!i&&!s},enableAction:function(){this._isEnabled||(this._triggeredOnce={},this._currentActions={},this._delayActionByTransitionDuration=0,this._executeOnNextTick=[],this.resetActionState(),this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._executeOnNextTick=[],this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this._isEnabled=!1,this._delayActionByTransitionDuration=0,this.resetActionState())},isEnabled:function(){return this._isEnabled},triggerActions:function(t,i){var s=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");return e.forEach(t,function(e){this._triggeredOnce[e]=!0}.bind(this)),i=e.defaults(i||{},{action:this.ACTION_NAME}),s.handleActions(e(this._currentActions).pick(t).values().value(),i)},registerPageTransitionDuration:function(e){this._delayActionByTransitionDuration=e},handleBehaviorsUpdate:e.noop,executeAction:e.noop,_executeActionOnTick:function(){if(!e.isEmpty(this._executeOnNextTick)){var t=this._executeOnNextTick;this._executeOnNextTick=[],e.forEach(t,function(e){e()})}},executeOnNextTick:function(t){this._executeOnNextTick=e(this._executeActionOnTick).concat([t]).uniq().value()},handleTrigger:function(t){var i=e.toArray(arguments);switch(t){case s.ACTIONS_ADDED_LAYOUTED:i[1]=e.pickBy(i[1],function(t){return e.includes(this.ACTIONS_SUPPORTED,t.name)}.bind(this)),e.assign(this._currentActions,i[1]);break;case s.ACTIONS_REMOVED:i[1]=e.pickBy(i[1],function(t){return e.includes(this.ACTIONS_SUPPORTED,t.name)}.bind(this)),this._currentActions=e.omit(this._currentActions,e.keys(i[1]))}this._isEnabled&&this.handleActionTrigger.apply(this,i)},handleActionTrigger:function(){throw"Need to implement handleTrigger in specific actions"},resetActionState:function(){throw"Need to implement resetActionState in specific actions"}}),i}),define("core/components/actionsAspectActions/scrollScrubAction",["lodash","utils","core/components/actionsAspectActions/baseAction"],function(e,t,i){"use strict";function s(){i.apply(this,arguments),this._windowScrollAspect=this._aspectSiteAPI.getSiteAspect("windowScrollEvent"),this._currentScroll=this.getCurrentScroll(),this._previousScroll=void 0}var n=t.triggerTypesConsts;return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.SCROLL,n.PAGE_CHANGED,n.RESIZE,n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT],ACTION_NAME:"scrollScrub",ACTIONS_SUPPORTED:["scrollScrub"],runAction:function(t){this._previousScroll=this._currentScroll,this._currentScroll=this.getCurrentScroll(),t=e.assign(t,{scroll:{previous:this._previousScroll,current:this._currentScroll}}),this.triggerActions(e.keys(this._currentActions),t)},getCurrentScroll:function(){if(!this._windowScrollAspect)return{};var t=this._windowScrollAspect.getScrollPosition();return{direction:this._windowScrollAspect.getScrollDirection(t),position:e.defaults(t,{x:0,y:0})}},handleActionTrigger:function(e){switch(e){case n.ACTIONS_REMOVED:case n.ACTIONS_ADDED_LAYOUTED:break;case n.RESIZE:case n.DID_LAYOUT:case n.PAGE_CHANGED:case n.SCROLL:this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),s}),define("core/components/actionsAspectActions/loadAction",["lodash","utils","core/components/actionsAspectActions/baseAction"],function(e,t,i){"use strict";function s(){i.apply(this,arguments)}var n=t.triggerTypesConsts;return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.SITE_READY,n.PAGE_RELOADED,n.PAGE_CHANGED,n.DID_LAYOUT,n.ACTIONS_REMOVED,n.ACTIONS_ADDED_LAYOUTED],ACTION_NAME:"load",ACTIONS_SUPPORTED:["load"],shouldEnable:e.constant(!0),runAction:function(){var t=e(this._currentActions).omit(e.keys(this._triggeredOnce)).keys().value();this.triggerActions(t)},handleActionTrigger:function(i){switch(i){case n.ACTIONS_REMOVED:this._triggeredOnce=e(this._triggeredOnce).omit(e.keys(arguments[1])).omit(e.keys(function(i){return e.pickBy(i,{sourceId:t.siteConstants.SITE_STRUCTURE_ID})}(this._currentActions))).value();break;case n.SITE_READY:case n.PAGE_RELOADED:case n.PAGE_CHANGED:case n.DID_LAYOUT:this.executeOnNextTick(this.runAction)}},resetActionState:e.noop}),s}),define("core/components/actionsAspectActions/screenInAction",["lodash","utils","siteUtils","core/components/actionsAspectActions/baseAction"],function(e,t,i,s){"use strict";function n(){s.apply(this,arguments),this._currentScroll={x:0,y:0},this._currentPopupScroll={x:0,y:0}}var o=t.triggerTypesConsts;return n.prototype=e.create(s.prototype,{constructor:n,ACTION_TRIGGERS:[o.SCROLL,o.RESIZE,o.ACTIONS_ADDED_LAYOUTED,o.ACTIONS_REMOVED,o.DID_LAYOUT],ACTION_NAME:"screenIn",ACTIONS_SUPPORTED:["screenIn"],getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},isComponentInViewport:function(i,s){var n=this._aspectSiteAPI.getCurrentPopupId()===i.pageId?this._currentPopupScroll:this._currentScroll;return s=e.isNumber(s)?s:.15,t.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,i.sourceId)||t.viewportUtils.isInViewport(this._aspectSiteAPI,n,i.sourceId,s)||this.isChildOfFixedFooter(i.pageId,i.sourceId)},isChildOfFixedFooter:function(e,t){var s=!1,n=i.measurerUtils.isFooterFixedPosition();if("masterPage"===e&&n){var o=this._aspectSiteAPI.getComponentById("SITE_FOOTER");s=this.isDescendantOf(o.props.structure,t)}return s},isDescendantOf:function(t,i){return!!t.components&&e.some(t.components,function(e){return e.id===i||this.isDescendantOf(e,i)}.bind(this))},runScreenInActions:function(t){var i=e(t).omit(e.keys(this._triggeredOnce)).pickBy(this.isComponentInViewport).keys().value();this.triggerActions(i)},runAction:function(){var t=e.pickBy(this._currentActions,["name","screenIn"]);this.runScreenInActions(t)},handleActionTrigger:function(t,i){var s=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");switch(t===o.SCROLL?this._currentScroll=e.pick(i,["x","y"]):this._currentScroll=s.getScrollPosition()||this._currentScroll,this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),t){case o.ACTIONS_REMOVED:this._triggeredOnce=e.omit(this._triggeredOnce,e.keys(e.toArray(arguments)[1]));break;case o.DID_LAYOUT:case o.SCROLL:case o.RESIZE:case o.ACTIONS_ADDED_LAYOUTED:var n=1e3*Math.max(this._delayActionByTransitionDuration-.2,0);n>0?e.delay(function(){this._delayActionByTransitionDuration=0,this.executeOnNextTick(this.runAction)}.bind(this),n):this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),n}),define("core/components/actionsAspectActions/modeChangeAction",["lodash","zepto","utils","reactDOM"],function(e,t,i,s){"use strict";function n(t,i,s){var n=e.get(s,"params.modeIds");switch(s.action){case"modeIn":return"enter"===t[s.targetId]&&e.every(n,function(e){return!0===i[e]});case"modeOut":return"leave"===t[s.targetId]&&e.every(n,function(e){return!1===i[e]});case"modeChange":return"transition"===t[s.targetId]&&e.every(n,function(t){return!e.isUndefined(i[t])});default:return!1}}function o(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._behaviorsById={},this.playingSequences={},this.componentAnimationsInfo={}}var r=i.triggerTypesConsts,a={ENTER:i.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:i.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:i.siteConstants.Animations.Modes.AnimationType.TRANSITION},c={};c[a.ENTER]=a.LEAVE,c[a.LEAVE]=a.ENTER,Object.freeze(c);var p={};p[a.ENTER]="modeIn",p[a.LEAVE]="modeOut",p[a.TRANSITION]="modeChange",Object.freeze(p);var l={"wysiwyg.viewer.components.SiteButton":i.siteConstants.Animations.TransitionType.NO_SCALE,"wysiwyg.viewer.components.WRichText":i.siteConstants.Animations.TransitionType.NO_DIMESIONS};return o.prototype=e.create(Object.prototype,{constructor:o,ACTION_TRIGGERS:[r.MODE_CHANGED_INIT,r.MODE_CHANGED_EXECUTE],ACTION_NAME:"modeChange",ACTIONS_SUPPORTED:["modeChange","modeIn","modeOut"],shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice();return e&&!t&&!i},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._behaviorsById),this._behaviorsById={},this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},needToRunPreConditions:function(){return!1},_executeActionOnTick:function(){this._animateOnNextTick&&(this._executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){this._behaviorsById={},e.forEach(this.playingSequences,function(e,t){this.getComponentPage(e.parentId).stopSequence(e.sequence.getId(),1),this.handleSequenceEnded(t,e.parentId,e.type)}.bind(this)),e.forEach(this.componentAnimationsInfo,function(e,t){e.hasPendingAnimation=!1,this.handleSequenceEnded(t,e.pageId,e.type)}.bind(this))},_executeAction:function(){e.isEmpty(this._behaviorsById)||e.assign(this.playingSequences,this.playJsAnimations())},executeAction:function(){this.handleTrigger.apply(this,arguments)},clearPlayedBehaviors:function(t){this._behaviorsById=e.omitBy(this._behaviorsById,function(e,i){return t[i]})},convertBehaviorTimingFunctionToCSS:function(e){return i.siteConstants.Animations.TimingFunctions[e]},clearCssTransitionFromNode:function(e){e.css({"transition-property":"","transition-duration":"","transition-delay":"","transition-timing-function":"","-webkit-transition-timing-function":"","-moz-transition-timing-function":"","-o-transition-timing-function":""})},addCssTransitionToNode:function(e,t){var i=this.convertBehaviorTimingFunctionToCSS(e.params.timingFunction);t.css({"transition-property":"background-color, color !important","transition-duration":e.duration+"s !important","transition-delay":e.delay+"s !important","transition-timing-function":i+" !important","-webkit-transition-timing-function":i+" !important","-moz-transition-timing-function":i+" !important","-o-transition-timing-function":i+" !important"})},initCssTransitions:function(){var i=e.filter(this._behaviorsById,{animationType:"transition"});i.length&&e.forEach(i,function(e){var i=e.targetId,s=t(this.getComponentNode(e.pageId,i));this.componentAnimationsInfo[i].didCssTransitionStartExecuting||(this.componentAnimationsInfo[i].didCssTransitionStartExecuting=!0,this.addCssTransitionToNode(e,s))}.bind(this))},handleSequenceEnded:function(e,i,s){s===a.TRANSITION&&this.clearCssTransitionFromNode(t(this.getComponentNode(i,e))),delete this.playingSequences[e],this.notifyAnimationEnded(e)},playJsAnimations:function(){var t={},i={};return e.forEach(this._behaviorsById,function(e){var s=this.getComponentPage(e.pageId),n=e.targetId,o=this.playingSequences[n],r=o&&c[o.type]===e.animationType,a=o&&o.type===e.animationType;t[n]=!0,a||(r?this.reverseAnimation(e):(o&&s.stopSequence(o.sequence.id),i[n]={sequence:s.sequence(),parentId:e.pageId,type:e.animationType},this.addAnimationToSequence(e,this.componentAnimationsInfo[e.targetId],i[e.targetId].sequence)))}.bind(this)),e.forEach(i,this.executeSequenceIfNeeded.bind(this)),this.clearPlayedBehaviors(t),i},reverseAnimation:function(e){var t=e.targetId,i=this.getComponentPage(e.pageId),s=this.playingSequences[t];s.type=e.animationType,this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.reverseSequence(s.sequence.getId())},executeSequenceIfNeeded:function(e,t){var i=e.sequence;if(i.hasAnimations()){var s=this.componentAnimationsInfo[t].progress,n=this.handleSequenceEnded.bind(this,t,e.parentId,e.type);this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.onCompleteAll(n),i.onReverseAll(n),s&&i.onInit(function(e){e.progress(1-s)}),i.execute()}},getComponentPage:function(e){return this._aspectSiteAPI.getPageById(e)},getPageComponents:function(e){return this._aspectSiteAPI.getPageComponents(e)},getComponentNode:function(e,t){var i=this.getPageComponents(e)[t];return i?s.findDOMNode(i):null},addAnimationToSequence:function(e,t,s){var n=this.getPageComponents(e.pageId),o=e.targetId,r="modeOut"===e.action?"clip,transform":"clip,opacity,transform";if(!n[o])return null;var c=n[o].props.structure,p=e.duration,d=e.delay;if(e.animationType===a.TRANSITION){var u=t.prevLayout,h=e.name+(l[c.componentType]||i.siteConstants.Animations.TransitionType.SCALE);s.add(o,h,p,d,{from:u})}else s.add(o,e.name,p,d,e.params,0);return s.add(o,"BaseClear",0,0,{props:r,immediateRender:!1}),o},hideElementsByAnimationType:function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t),s=this.playingSequences[t],n=s&&c[s.type]===e.animationType;i&&!n&&(i.style.opacity=0)}}.bind(this))},revertHideElementsByAnimationType:function(t){e.forEach(t,function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t);i&&(i.style.opacity="")}}.bind(this))}.bind(this))},initiateBehaviors:function(t,i,s,n,o){this._behaviorsById=e.assign(this._behaviorsById,i),e.forEach(s,function(e,i){var s=this.componentAnimationsInfo[i]=this.componentAnimationsInfo[i]||{};s.pageId=t,s.type=e,s.hasPendingAnimation=!0,s.onComplete=o,e===a.TRANSITION&&(s.prevLayout=n[i])}.bind(this))},handleBehaviorsUpdate:function(e){this._behaviors=e},runJsAnimationsOnNextTick:function(){this._animateOnNextTick=!0},runJsAnimationsImmediately:function(){this._executeAction()},notifyAnimationEnded:function(e){if(this.componentAnimationsInfo[e]&&!this.componentAnimationsInfo[e].hasPendingAnimation){var t={};t[e]=this.componentAnimationsInfo[e].type;var i=this.componentAnimationsInfo[e].onComplete;delete this.componentAnimationsInfo[e],i(t)}},handleDidLayout:function(){this._aspectSiteAPI.unRegisterFromDidLayout();var e=this._siteData.getBrowser();e&&(e.ie||e.edge||e.safari)?this.runJsAnimationsImmediately():this.runJsAnimationsOnNextTick()},handleReverseTransitionAnimations:function(t){var i=e.transform(t,function(e,t,i){t===a.TRANSITION&&e.push(i)},[]),s=e.transform(this.playingSequences,function(e,t,i){t.type===a.TRANSITION&&e.push(i)},[]),n=e.intersection(i,s);e.forEach(n,function(e){var t=this.componentAnimationsInfo[e],i=this.getComponentPage(t.pageId),s=this.playingSequences[e].sequence.getId(),n=i.getSequence(s),o=this.getComponentNode(t.pageId,e);t.progress=n.progress(),n.set(o,{clearProps:"clip,opacity"}),i.stopSequence(s,1),delete this.playingSequences[e]}.bind(this))},handleTrigger:function(t,i){if(this._isEnabled)switch(t){case r.MODE_CHANGED_INIT:var s=function(t,i,s){return e(t).filter(e.partial(n,i,s)).map(function(t){return e.assign({animationType:i[t.targetId]},t)}).keyBy("targetId").value()}(this._behaviors,i.componentAnimations,i.modeChanges),o=e.pick(i.componentAnimations,e.keys(s)),a=e.omit(i.componentAnimations,e.keys(s));this.initiateBehaviors(i.pageId,s,o,i.transitioningComponentsPrevLayout,i.onComplete),this.handleReverseTransitionAnimations(i.componentAnimations),this.initCssTransitions(),i.onComplete(a);break;case r.MODE_CHANGED_EXECUTE:this.hideElementsByAnimationType(this._behaviorsById),this._aspectSiteAPI.registerToDidLayout(this.handleDidLayout.bind(this))}else i&&i.onComplete&&i.onComplete(i.componentAnimations)}}),o}),define("core/components/actionsAspectActions/pageTransitionAction",["lodash","utils"],function(e,t){"use strict";function i(e,t){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=t,this._isEnabled=!1,this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null}var s=t.triggerTypesConsts;return e.assign(i.prototype,{ACTION_TRIGGERS:[s.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),s=this._siteData.isMobileView();return e&&!t&&!i&&!s},enableAction:function(){this._isEnabled=!0},disableAction:function(){this._isEnabled=!1},isEnabled:function(){return this._isEnabled},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData),this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null},handleTrigger:function(t){this._isEnabled||e.isEmpty(this._nextPageTransition)||(this._nextPageTransition.duration=0,this._nextPageTransition.transitionName="NoTransition"),t===s.PAGE_CHANGED&&this.executeAction()},handleBehaviorsUpdate:function(e){this._behaviors=e},registerNextPageTransition:function(e,t,i,s,n,o,r,a){this._nextPageTransition={comp:e,previousRef:t,currentRef:i,transitionName:s,duration:n,delay:o,params:r,callbacks:a}},registerNextBGPageTransition:function(e,t,i,s){this._nextPageBGTransition={comp:e,previousRef:t,currentRef:i,callbacks:s}},registerNextAnchorScroll:function(e){this._nextPageInitialScrollData=e},getNormalizedTransitionDuration:function(e,t){var i=e;return(t=t||{}).width?i=e*t.width/t.siteWidth:t.height&&(i=e*(Math.max(t.height,t.screenHeight)/t.screenHeight)),Math.min(i,1.2)},executeTransitions:function(i,s,n){var o=this._aspectSiteAPI,r="function"==typeof i.params?i.params():i.params,a=this.getNormalizedTransitionDuration(i.duration||0,r),c=void 0,p=void 0;if(!e.isEmpty(i)){c=i.comp.sequence(),(p=i.callbacks||{}).onStart&&c.onStartAll(p.onStart),p.onInterrupt&&c.onInterruptAll(p.onInterrupt),p.onComplete&&c.onCompleteAll(p.onComplete);var l={sourceRefs:i.previousRef,destRefs:i.currentRef};c.add(l,i.transitionName,a,i.delay,r).add([i.previousRef,i.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:!1}).execute()}e.isEmpty(s)||s.comp.transition(s.previousRef,s.currentRef,i.transitionName,a,i.delay,r,s.callbacks);var d=o.getSiteData(),u=t.scrollAnchors.calcAnchorScrollToPosition(n,o);n=u.anchorQuery,this.animations.animate("BaseScroll",o.getSiteContainer(),a,i.delay,{x:u.x||0,y:u.y||0,callbacks:{onComplete:function(){var e=this._aspectSiteAPI.getSiteAspect("anchorChangeEvent");e&&e.setSelectedAnchorAsync(d,n,d.getPrimaryPageId(),t.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL),this._aspectSiteAPI.notifyOnRendered()}.bind(this)}})}}),i}),define("core/components/actionsAspectActions/exitAction",["lodash","utils"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._pendingComponentExits=[]}var s=t.triggerTypesConsts;return i.prototype=e.create(Object.prototype,{constructor:i,ACTION_TRIGGERS:[s.PAGE_CHANGED,s.PAGE_RELOADED],ACTION_NAME:"exit",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),s=this._siteData.isMobileView();return e&&!t&&!i&&!s},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){if(this._isEnabled){this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations();var t=e.map(this._pendingComponentExits,"callback");this._pendingComponentExits=[],this._isEnabled=!1,e.forEach(t,function(e){e()})}},isEnabled:function(){return this._isEnabled},executeAction:function(){if(!e.isEmpty(this._pendingComponentExits)){var t=this._pendingComponentExits;this._pendingComponentExits=[],e.forEach(t,function(e){this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations(e.leavingCompIds,e.callback))}.bind(this))}},playPageAnimations:function(t,i){function s(){0===--c&&i()}var n={},o={},r=[],a=e(this._behaviors).filter(function(i){return i.action===this.ACTION_NAME&&e.includes(t,i.sourceId)}.bind(this)).keyBy("sourceId").value();e.forEach(a,function(e){var t=this.getComponentParent(e.pageId);t.refs[e.sourceId]&&(o[e.pageId]||(o[e.pageId]=t.sequence(),n[e.pageId]=[]),n[e.pageId].push(this.addAnimationToSequence(e,o)))}.bind(this));var c=1;return e.forEach(o,function(t,i){t.hasAnimations()&&(c++,t.onCompleteAll(s),t.onInterruptAll(s),n[i]=e.compact(n[i]),r.push({parentId:i,sequenceId:t.getId()}),t.execute())}),s(),r},getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},addAnimationToSequence:function(e,t){var i=t[e.pageId];return i.add(e.targetId,e.name,e.duration,e.delay,e.params,0),i.add(e.targetId,"BaseClear",0,0,{props:"clip,opacity,transform",immediateRender:!1}),e.targetId},registerComponentsExit:function(e,t){this._isEnabled?(this._pendingComponentExits.push({leavingCompIds:e,callback:t}),this._animateOnNextTick=!0):t()},handleTrigger:function(){},handleBehaviorsUpdate:function(e){this._behaviors=e},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){e.forEach(this._liveSequenceIds,function(e){var t=this.getComponentParent(e.parentId);t&&t.stopSequence(e.sequenceId,1)}.bind(this)),this._liveSequenceIds=[]}}),i}),define("core/components/actionsAspectActions/viewportEventAction",["lodash","utils","core/components/actionsAspectActions/baseAction"],function(e,t,i){"use strict";function s(){i.apply(this,arguments),this._componentsLastVisableState={},this._registeredActions={},this._isEnabled=!0,this._currentPageId=null}var n=t.triggerTypesConsts;return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT,n.PAGE_CHANGED],ACTION_NAME:"viewport",ACTIONS_SUPPORTED:["viewportEnter","viewportLeave"],shouldEnable:e.constant(!0),isComponentHiddenOrCollapsed:function(e){var t=this._siteData.measureMap||{},i=t.isHidden[e],s=t.collapsed[e];return i||s},triggerViewPortEventIfNeeded:function(t,i){var s=this._aspectSiteAPI.getSiteAspect("viewportChange"),n=this._aspectSiteAPI.getSiteAspect("behaviorsAspect"),o=s.get(t),r=this._componentsLastVisableState[t],a=e.find(i,{name:"viewportLeave"});o.in&&a&&r&&n.handleAction(a)},compVisibilityChange:function(t){if(!this._componentsLastVisableState[t]){var i=e(this._currentActions).filter({sourceId:t}).values().value();e.forEach(i,this.registerAction)}var s=e.values(this._registeredActions[t]);this.triggerViewPortEventIfNeeded(t,s),this._componentsLastVisableState[t]&&e.forEach(s,this.unRegisterAction)},checkIfCompVisibilityChanged:function(t){var i=void 0;e.isNil(this._componentsLastVisableState[t])||(i=this._componentsLastVisableState[t]),this._componentsLastVisableState[t]=this.isComponentHiddenOrCollapsed(t),e.isNil(i)||i===this._componentsLastVisableState[t]||this.compVisibilityChange(t,i,this._componentsLastVisableState[t])},registerAction:function(t){var i=t.sourceId,s=t.name,n=!0;if(this._registeredActions[i]||(n=!1,this._registeredActions[i]={}),!this._registeredActions[i][s]&&(this._registeredActions[i][s]=t,!n)){this._aspectSiteAPI.getSiteAspect("viewportChange").register(i,function(t){var s=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");if(t.in){var n=e.get(this._registeredActions[i],"viewportEnter");n&&s.handleAction(n)}if(t.out){var o=e.get(this._registeredActions[i],"viewportLeave");o&&s.handleAction(o)}}.bind(this),["in","out"])}},unRegisterAction:function(t){var i=t.sourceId,s=t.name;if(e.isEmpty(this._registeredActions[i])||delete this._registeredActions[i][s],e.isEmpty(this._registeredActions[i])){delete this._registeredActions[i];this._aspectSiteAPI.getSiteAspect("viewportChange").unregister(i)}},handleActionTrigger:function(t){var i=e(this._currentActions).map("sourceId").uniq().value();switch(t){case n.DID_LAYOUT:e.forEach(i,this.checkIfCompVisibilityChanged);break;case n.PAGE_CHANGED:var s=this._siteData.getFocusedRootId();s!==this._currentPageId&&(this._currentPageId=s,this.resetActionState());break;case n.ACTIONS_ADDED_LAYOUTED:e.forEach(i,this.checkIfCompVisibilityChanged),e.forEach(this._currentActions,function(e){this._componentsLastVisableState[e.sourceId]||this.registerAction(e)}.bind(this))}},resetActionState:function(){e.forEach(this._componentsLastVisableState,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._componentsLastVisableState[t]}.bind(this)),e.forEach(this._registeredActions,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._registeredActions[t]}.bind(this))}}),s}),define("core/components/siteAspects/actionsAspect",["lodash","core/core/siteAspectsRegistry","core/components/actionsAspectActions/bgScrubAction","core/components/actionsAspectActions/scrollScrubAction","core/components/actionsAspectActions/loadAction","core/components/actionsAspectActions/screenInAction","core/components/actionsAspectActions/modeChangeAction","core/components/actionsAspectActions/pageTransitionAction","core/components/actionsAspectActions/exitAction","core/components/actionsAspectActions/viewportEventAction","utils"],function(e,t,i,s,n,o,r,a,c,p,l){"use strict";function d(t){this._aspectSiteAPI=t,this._siteData=t.getSiteData(),this._behaviors=[],this._pageTransitionComplete=[],this._pageNavigationCanceled=[],this._isDuringPageTransition=!1,this._navigationComplete=[],this._actions={},this._previouslyRegisteredPages=[],this._didFirstLayout=!1,this._didPageChange=!1,this._noopFirstLayout=this._siteData.isClientAfterSSR(),this.registerAction(i),this.registerAction(s),this.registerAction(n),this.registerAction(o),this.registerAction(a),this.registerAction(c),this.registerAction(p),this.registerAction(r),this.enableAction("pageTransition");"preview"===(this._aspectSiteAPI.getRenderFlag("componentViewMode")||"preview")&&(this.enableAction("bgScrub"),this.enableAction("screenIn"),this.enableAction("scrollScrub"),this.enableAction("exit"),this.enableAction("load"),this.enableAction("modeChange")),this._registerTriggers(),t.registerToAddedRenderedRootsDidLayout(function(t){e.some(t,this._siteData.isPopupPage.bind(this._siteData))&&this.handleNavigationComplete()}.bind(this))}var u=l.triggerTypesConsts;d.prototype.previewAnimation=function(e,t,i,s){var n=this._aspectSiteAPI.getPageById(t).sequence();return n.add(e,i.name,i.duration,i.delay,i.params),n.add(e,"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),s&&n.onCompleteAll(s),n.execute()},d.prototype.previewTransition=function(e,t,i,s,n){var o=void 0;if(o="masterPage"===i?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var r=o.sequence();return r.add({sourceRefs:e,destRefs:t},s.name,s.duration,s.delay,s.params),r.add(e.concat(t),"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),n&&r.onCompleteAll(n),r.execute()}},d.prototype.stopPreviewAnimation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this._aspectSiteAPI.getMasterPage();(this._aspectSiteAPI.getCurrentPopup()||this._aspectSiteAPI.getCurrentPage()).stopSequence(e,t),i.stopSequence(e,t)},d.prototype.enableAction=function(e){this._actions[e]&&this._actions[e].shouldEnable()&&this._actions[e].enableAction()},d.prototype.isActionDisabled=function(e){return this._actions[e]&&!this._actions[e].isEnabled()},d.prototype.needToRunPreConditions=function(e){var t=e.name;return!this._actions[t]||!this._actions[t].needToRunPreConditions||this._actions[t].needToRunPreConditions(e)},d.prototype.disableAction=function(e){this._actions[e]&&this._actions[e].disableAction()},d.prototype.executeAction=function(t,i){var s=e.drop(arguments,2);if(this._actions[t]){var n=this._actions[t];n.executeAction.apply(n,[i].concat(s))}},d.prototype.registerBehaviors=function(t,i,s){s=e.isString(s)?JSON.parse(s):s,s=e.map(s,function(s){return e.assign({},s,{pageId:i,sourceId:t,targetId:s&&s.targetId||t})}),this.unRegisterBehaviors(t,s,!1),this._behaviors=this._behaviors.concat(s),this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.unRegisterBehaviors=function(t,i,s){s=!1!==s,this._behaviors=e.reject(this._behaviors,{sourceId:t}),s&&this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[],this._behaviors=[],this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.registerNextPageTransition=function(e,t,i,s,n,o,r,a){this._isDuringPageTransition=!0,this._actions.pageTransition.registerNextPageTransition(e,t,i,s,n,o,r,a),this._actions.screenIn.registerPageTransitionDuration(n)},d.prototype.registerPageTransitionComplete=function(t){e.isFunction(t)&&this._pageTransitionComplete.push(t)},d.prototype.registerToPageNavigationCanceled=function(t){e.isFunction(t)&&this._pageNavigationCanceled.push(t)},d.prototype.handlePagePageNavigationCanceled=function(){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageNavigationCanceled,function(e){e()}),this._pageNavigationCanceled=[],this.handleNavigationComplete()},d.prototype.handlePageTransitionComplete=function(t,i){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageTransitionComplete,function(e){e(t,i)}),this._pageTransitionComplete=[],this.handleNavigationComplete()},d.prototype.registerNavigationComplete=function(t){e.isFunction(t)&&this._navigationComplete.push(t)},d.prototype.handleNavigationComplete=function(){this._isDuringPageTransition||(this._aspectSiteAPI.endingPageTransition(),e.forEach(this._navigationComplete,function(e){e()}),this._navigationComplete=[],this._pageNavigationCanceled=[])},d.prototype.registerNextBGPageTransition=function(e,t,i,s){this._actions.pageTransition.registerNextBGPageTransition(e,t,i,s)},d.prototype.registerNextAnchorScroll=function(e){this._actions.pageTransition.registerNextAnchorScroll(e)},d.prototype.registerComponentsExit=function(e,t){this._actions.exit.registerComponentsExit(e,t)},d.prototype.registerAction=function(t){var i=new t(this._aspectSiteAPI),s=[].concat(i.ACTIONS_SUPPORTED||i.ACTION_NAME);e.forEach(s,function(e){if(this._actions[e])throw new Error("Action "+e+" already registered");if(!e)throw new Error("Action missing it's ACTION_NAME parameter, cannot register it");this._actions[e]=i}.bind(this))},d.prototype._propagateTrigger=function(t){var i=arguments;e.forEach(this._actions,function(s){e.includes(s.ACTION_TRIGGERS,t)&&s.handleTrigger.apply(s,i)})},d.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._didPageChange||!this._noopFirstLayout&&!this._didFirstLayout){this._noopFirstLayout=!1;var e=this._aspectSiteAPI.getSiteData(),t=e.getExistingRootNavigationInfo(e.getPrimaryPageId());this._aspectSiteAPI.isPageAllowedAndLoaded(t)&&this._propagateTrigger(u.PAGE_CHANGED)}this._didPageChange=!1,this._propagateTrigger(u.DID_LAYOUT)},d.prototype._enablePageChangeTransitionsAfterLayout=function(){this._didFirstLayout?this._didPageChange=!0:this._didFirstLayout=!0},d.prototype.reloadPageAnimations=function(){this._propagateTrigger(u.PAGE_RELOADED)},d.prototype._propagateBehaviorsUpdate=function(t){e.forEach(this._actions,function(i){i.handleBehaviorsUpdate(e.clone(t))})},d.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,u.SITE_READY)),this.registerPageTransitionComplete(this._propagateTrigger.bind(this,u.TRANSITION_ENDED)),this._aspectSiteAPI.registerToUrlPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this)),this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,u.SCROLL)),this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,u.RESIZE)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,u.MODE_CHANGED_INIT)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,u.MODE_CHANGED_EXECUTE))},d.prototype.actionsRemoved=function(e){this._propagateTrigger(u.ACTIONS_REMOVED,e)},d.prototype.actionsAddedLayouted=function(e){this._propagateTrigger(u.ACTIONS_ADDED_LAYOUTED,e)},t.registerSiteAspect("actionsAspect",d)}),define("core/components/siteAspects/DynamicClientSpecMapAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(e,t,i){"use strict";function s(t,s,o){var r="error",a={url:function(t,s){var n=t.replace(/\/$/,"")+"/_api/dynamicmodel",o=e.isEmpty(s)?"":"?"+i.urlUtils.toQueryString(s);return"undefined"!=typeof window&&(n=n.replace(/^[^:]+:/,window.location.protocol)),n+o}(t.getExternalBaseUrl(),o.urlParams),destination:["dynamicClientSpecMapLoaded"],force:!0,cache:n,syncCache:!0,transformFunc:function(){return!0},callback:function(i,n){r="success",e.invokeMap(this.reloadSpecMapPlugin,"callback"),n.clientSpecMap&&this._aspectSiteAPI.setClientSpecMap(n.clientSpecMap),n.svSession&&(t.pubSvSession(n.svSession),this._aspectSiteAPI._site.notifyAspects(this._aspectSiteAPI._site.supportedEvents.svSessionChange,n.svSession)),n.hs&&t.setHubSecurityToken(n.hs),n.ctToken&&t.setCTToken(n.ctToken),s&&s(n)}.bind(this)};t.store.loadBatch([a],function(){"error"===r&&s({status:r})}),n=!1}var n=!0;t.registerSiteAspect("dynamicClientSpecMap",function(t){this.reloadSpecMapPlugin=[],this._aspectSiteAPI=t;var i=t.getSiteData();this.reloadClientSpecMap=function(t,n){i&&i.isViewerMode()&&s.call(this,i,t,e.isObject(n)?n:{})},this.registerReloadSpecMapPlugin=function(e,t){var i=function(){this._aspectSiteAPI.getSiteData().getCurrentUrlPageId()===e&&t()}.bind(this);this.reloadSpecMapPlugin.push({compPageId:e,callback:i})}})}),define("core/components/siteAspects/VerticalAnchorsMenuAspect",["core/core/siteAspectsRegistry","lodash","coreUtilsLib","utils"],function(e,t,i,s){"use strict";function n(e){t.forEach(e,function(e){e()})}function o(e,i){return e?{top:e.absoluteTop[i],left:t.get(e,"custom["+i+"].backgroundLeft",0)+e.absoluteLeft[i],height:e.height[i],width:t.get(e,"custom["+i+"].backgroundWidth",e.width[i])}:{}}function r(e,t){i.imageUtils.getImageMeanBrightness(t.thumbnailImageUrl,{width:1,height:1},function(i,s){e.updateInformation(t.compId,t.rootId,{brightness:i,alpha:s})},function(){return null})}function a(e){this.activeAnchorObservers.length>0&&this.aspectSiteAPI.updateAspectGlobalData(c,{anchorsData:s.scrollAnchors.getAnchorsDataSortedByY(this.aspectSiteAPI.getSiteData(),e)})}var c="VerticalAnchorsMenuAspect",p=function(e){this.aspectSiteAPI=e,this.autoColorObservers=[],this.activeAnchorObservers=[],this.imagesToCheckColorOf={},t.bindAll(this,t.functionsIn(this)),e.registerToDidLayout(function(){var e=this.aspectSiteAPI.getAspectGlobalData(c)||{},i=this.aspectSiteAPI.getSiteData().measureMap;!e.anchorsData&&this.activeAnchorObservers.length>0&&(a.call(this,0),e=this.aspectSiteAPI.getAspectGlobalData(c)||{});var s=e;s.colorInfo=t.mapValues(e.colorInfo,function(e){return t.mapValues(e,function(e,s){return t.assign(e,{layout:o(i,s)})})}),this.aspectSiteAPI.setAspectGlobalData(c,s),n(this.autoColorObservers)}.bind(this)),e.registerToScroll(function(e){a.call(this,e.y),n(this.autoColorObservers)}.bind(this)),e.registerToRenderedRootsChange(function(e,i){var s=this.aspectSiteAPI.getAspectGlobalData(c)||{},n=s;n.colorInfo=t.omit(s.colorInfo,i),this.aspectSiteAPI.setAspectGlobalData(c,n)}.bind(this))};return p.prototype={updateInformation:function(e,i,s){var r=this.aspectSiteAPI.getSiteData().measureMap;r&&t.assign(s,{layout:o(r,e)});var a=this.aspectSiteAPI.getAspectGlobalData(c)||{};t.set(a,["colorInfo",i,e],s),this.aspectSiteAPI.setAspectGlobalData(c,a),n(this.autoColorObservers)},updateImageInfo:function(e,i,s){var n={thumbnailImageUrl:s,compId:e,rootId:i};if(this.autoColorObservers.length)r(this,n);else{var o=i.toString()+"-"+e.toString();this.imagesToCheckColorOf[o]?t.assign(this.imagesToCheckColorOf[o],n):this.imagesToCheckColorOf[o]=n}},registerToMeanColor:function(e){this.autoColorObservers.push(e),function(e){var i=r.bind(null,e);t.forOwn(e.imagesToCheckColorOf,i),e.imagesToCheckColorOf=[]}(this)},unregisterToMeanColor:function(e){t.pull(this.autoColorObservers,e)},registerToActiveAnchor:function(e){this.activeAnchorObservers.push(e)},unregisterToActiveAnchor:function(e){t.pull(this.activeAnchorObservers,e)}},e.registerSiteAspect("VerticalAnchorsMenuAspect",p),p}),define("core/components/siteAspects/SiteVisibilityAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToSiteReady(function(){this._aspectSiteAPI.registerToVisibilityChange(this.propagateEvent.bind(this))}.bind(this)),this.registeredCallbacks={}}return i.prototype={propagateEvent:function(){var t=this.get();e.forEach(this.registeredCallbacks,function(e){e(t)})},register:function(e,t,i){this.registeredCallbacks[e]=t,i&&t(this.get())},unregister:function(t){this.registeredCallbacks=e.omit(this.registeredCallbacks,t)},get:function(){return this._aspectSiteAPI.getVisibilityState()}},t.registerSiteAspect("siteVisibilityChange",i),i}),define("core/components/siteAspects/ViewportAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(t,i,s,n,o){if(!e.isUndefined(t)&&!e.isUndefined(i)){var r=t+i,a=n+s,c=r<n,p=r>a,l=t<n,d=t>a,u=!(l||d),h=!(c||p),g=l&&p,f=u||h||g,m=h&&!u,y=u&&!h,v=h&&u,A=0;g?A=s:m?A=r-n:y?A=a-t:v&&(A=i);return{in:f,inPartialAbove:m,inPartialBelow:y,inCover:g,inContained:v,out:!f,outAbove:c,outBelow:d,percentVisible:A/i,percentOfViewport:A/s,isFixed:!!o}}}function s(t,i){return{windowHeight:t.getScreenHeight(),compAbsTop:e.get(t,["measureMap","absoluteTop",i]),compHeight:e.get(t,["measureMap","height",i]),isFixed:e.get(t,["measureMap","shownInFixed",i])}}function n(e){return e.isPopupOpened()?e.getCurrentPopupScroll():e.getAspectGlobalData("windowScrollEvent")||{x:0,y:0}}function o(t,o){var r=n(t),a=t.getSiteData();e.forEach(o,function(t,n){var o=s(a,n),c=i(o.compAbsTop,o.compHeight,o.windowHeight,r.y,o.isFixed);if(c){var p=function(e,t){return{in:e.in&&t.out,out:e.out&&t.in,while_in:e.in&&t.in}}(c,t.previousState),l=e.some(t.eventTypes,function(e){return p[e]});t.previousState=c,l&&t.callback(c)}})}function r(t){this._aspectSiteAPI=t,this.registeredListeners={};var i=e.partial(o,t,this.registeredListeners);t.registerToSiteReady(function(){t.registerToScroll(i),t.registerToResize(i),t.registerToOrientationChange(i),t.registerToDidLayout(i),i()})}var a=["in","out","while_in"];return r.prototype={eventTypes:a,register:function(e,t,i){this.registeredListeners[e]={callback:t,eventTypes:i||a,previousState:{out:!0,in:!1}}},unregister:function(e){delete this.registeredListeners[e]},get:function(e){var t=n(this._aspectSiteAPI),o=s(this._aspectSiteAPI.getSiteData(),e);return i(o.compAbsTop,o.compHeight,o.windowHeight,t.y,o.isFixed)}},t.registerSiteAspect("viewportChange",r),r}),define("core/components/siteAspects/videoFileAvailability",["lodash","utils"],function(e,t){"use strict";function i(t,i){return e.includes(i.readyQualities,i.qualities[t].quality)}function s(e){this.config=e,this.videoAvailabilityCollection={},this.componentsCallbackCollection={}}var n="mp4",o=t.mediaConsts;return s.prototype={register:function(t,i,s,n,o){var r=function(t,i){var s=void 0;switch(i){case"video":s=e.reject(t.qualities,{quality:"storyboard"});break;case"storyboard":s=e.filter(t.qualities,{quality:"storyboard"})}return s}(i,n);if(!e.isEmpty(r)){this.componentsCallbackCollection[n+t]={type:n,playerId:t,videoId:i.videoId,onSuccessCallback:o,targetQuality:s};var a=this.videoAvailabilityCollection[n+i.videoId];if(a)e.isEmpty(a.readyQualities)||this.notifySingleReadyState(this.componentsCallbackCollection[n+t],a,a.key);else{a={type:n,videoId:i.videoId,key:n+i.videoId,readyQualities:[],testingQuality:s,qualities:r,timeStamp:(new Date).getTime(),duration:1e3*i.duration,timerInterval:0},this.videoAvailabilityCollection[a.key]=a;var c=e.find(a.qualities,{quality:a.testingQuality});this.loadDummyVideo(a.key,a.videoId,c)}}},unregister:function(t){this.componentsCallbackCollection=e.omit(this.componentsCallbackCollection,t)},loadDummyVideo:function(e,i,s){t.ajaxLibrary.ajax({url:function(e,i,s){return i.url?t.urlUtils.joinURL(s,i.url):t.urlUtils.joinURL(s,e,i.quality,n,"file."+n)}(i,s,this.config.headRequestStaticUrl),type:"HEAD",success:function(){this.canPlay(e)}.bind(this),error:function(){this.onError(e)}.bind(this)})},onError:function(e){var t=this.videoAvailabilityCollection[e];if(t){var s=this.getNextIndexToCheck(t);"undefined"!=typeof window&&s>=0&&!i(s,t)?(t.testingQuality=t.qualities[s].quality,setTimeout(function(){this.loadDummyVideo(e,t.videoId,t.qualities[s])}.bind(this),100)):this.resetQualityTest(t),this.notifyReadyState(t.key)}},getNextIndexToCheck:function(t){return e.findIndex(t.qualities,{quality:t.testingQuality})-1},canPlay:function(t){var s=this.videoAvailabilityCollection[t];if(s){if(e.includes(s.readyQualities,s.testingQuality)||s.readyQualities.push(s.testingQuality),!this.isAllQualitiesAvailable(s)){var n=this.getNextIndexToCheck(s);"undefined"!=typeof window&&n>=0&&!i(n,s)?(s.testingQuality=s.qualities[n].quality,setTimeout(function(){this.loadDummyVideo(t,s.videoId,s.qualities[n])}.bind(this),100)):this.resetQualityTest(s)}this.notifyReadyState(t)}},resetQualityTest:function(t){if(t){t.testingQuality=e.last(t.qualities).quality;var i=function(t,i){var s=e.now()-t.timeStamp;if(s>4*t.duration)return 0;var n=s>t.duration&&s<=2*t.duration?4:8;return Math.max(i,t.duration/n)}(t,this.config.videoQualityCheckInterval);"undefined"!=typeof window&&i>0&&(clearTimeout(t.timerInterval),t.timerInterval=setTimeout(function(){var i=e.find(t.qualities,{quality:t.testingQuality});this.loadDummyVideo(t.key,t.videoId,i)}.bind(this),i))}},notifyReadyState:function(t){var i=this.videoAvailabilityCollection[t];i&&e.forEach(e.filter(this.componentsCallbackCollection,{videoId:i.videoId}),e.bind(function(e){this.notifySingleReadyState(e)},this))},notifySingleReadyState:function(t){var i=t.type+t.videoId,s=this.videoAvailabilityCollection[i];t.onSuccessCallback({videoId:s.videoId,readyQualities:s.readyQualities,availabilityState:function(t,i){return e.isEmpty(t)?o.availabilityReadyStates.IN_PROCESS:e.includes(t,i)?o.availabilityReadyStates.IDLE:o.availabilityReadyStates.PLAYING_PREVIEW}(s.readyQualities,t.targetQuality),type:s.type}),this.isAllQualitiesAvailable(s)&&this.unregister(t.type+t.playerId)},isAllQualitiesAvailable:function(e){return e.readyQualities.length===e.qualities.length}},s}),define("core/components/siteAspects/MediaAspect",["lodash","core/core/siteAspectsRegistry","core/components/siteAspects/videoFileAvailability"],function(e,t,i){"use strict";function s(e){"undefined"==typeof window||window.Hls||requirejs(["hls-light"],function(){this.updateQualityState("adaptiveVideo",{hlsLoaded:!0})}.bind(this)),this.aspectSiteAPI=e,this.siteData=e.getSiteData(),this.isEnabled=!0,this.playerStateChangeListeners={};var t={videoQualityCheckInterval:5e3,headRequestStaticUrl:this.siteData.getStaticVideoHeadRequestUrl()};this.fileAvailabilityUtil=new i(t)}return s.prototype={getData:function(t){var i=this.aspectSiteAPI.getPointers().general.getMediaPlaybackItemPointer(t),s=this.aspectSiteAPI.getDisplayedDAL();return e.clone(s.get(i))||{}},getQualityData:function(e){var t=this.aspectSiteAPI.getPointers().general.getMediaQualityItemPointer(e);return this.aspectSiteAPI.getDisplayedDAL().get(t)},updatePlayerState:function(t,i){var s=e.assign({},this.getData(t),i),n=this.aspectSiteAPI.getPointers().general.getMediaPlaybackItemPointer(t);this.aspectSiteAPI.getDisplayedDAL().set(n,s),this.notifyStateChange(t)},updateQualityState:function(t,i){var s=e.assign({},this.getQualityData(t),i),n=this.aspectSiteAPI.getPointers().general.getMediaQualityItemPointer(t);this.aspectSiteAPI.getDisplayedDAL().set(n,s)},removePlayerState:function(e){var t=this.aspectSiteAPI.getPointers().general.getMediaPlaybackItemPointer(e),i=this.aspectSiteAPI.getDisplayedDAL();i.isExist(t)&&(i.remove(t),this.notifyStateChange(e))},registerPlayer:function(t,i){i=i||{};var s=e.get(i,"mediaData"),n=e.get(s,"videoId");this.updatePlayerState(t,{playerType:i.playerType||"none",videoId:n,duration:e.get(s,"duration",0)}),this.registerPlayerServices(t,i.mediaData,i.services)},unregisterPlayer:function(e){this.removePlayerState(e),this.unregisterPlayerServices(e)},registerPlayerServices:function(t,i,s){(s=s||{}).viewport&&this.aspectSiteAPI.getSiteAspect("viewportChange").register(t,s.viewport.callback,s.viewport.eventTypes),s.visibility&&this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").register(t,s.visibility.callback),s.fileAvailability&&e.forEach(s.fileAvailability.videoParts,function(e){this.fileAvailabilityUtil.register(t,i,e.quality,e.name,s.fileAvailability.callback)}.bind(this))},unregisterPlayerServices:function(e){this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").unregister(e),this.aspectSiteAPI.getSiteAspect("viewportChange").unregister(e),this.fileAvailabilityUtil.unregister(e)},registerStateChange:function(t,i,s){e.set(this.playerStateChangeListeners,[i,t],s);var n=this.getData(i);n&&s(n)},unregisterStateChange:function(t,i){this.playerStateChangeListeners[i]=e.omit(this.playerStateChangeListeners[i],t),e.isEmpty(this.playerStateChangeListeners[i])&&(this.playerStateChangeListeners=e.omit(this.playerStateChangeListeners,i))},notifyStateChange:function(t){e.forEach(this.playerStateChangeListeners[t],e.bind(function(e){e(this.getData(t))},this))},getControlsData:function(t){var i=void 0,s=this.aspectSiteAPI.getSiteData(),n=s.getFocusedRootId();if(n){var o=this.aspectSiteAPI.getDisplayedDAL(),r=this.aspectSiteAPI.getPointers(),a=s.getViewMode(),c=r.components.getPage(n,a),p=r.components.getComponent(t,c),l=r.getInnerPointer(p,"designQuery"),d=r.getInnerPointer(p,"propertyQuery"),u=o.get(l),h=o.get(d),g=s.getDataByQuery(u,n,s.dataTypes.DESIGN),f=s.getDataByQuery(h,n,s.dataTypes.PROPERTIES),m=e.get(g,["background","mediaRef"]);i={disableAudio:e.get(f,"disableAudio",!1),hasAudio:e.get(m,"hasAudio",!0)};var y=e.get(m,"qualities"),v=e.find(y,{quality:"storyboard"});v&&(i=e.assign(i,{storyboardUrl:e.get(v,"url"),videoAspectRatio:v&&v.width/v.height}))}return i},shouldPlay:function(e){var t=this.aspectSiteAPI.getSiteAspect("viewportChange").get(e),i=this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").get();return t.in&&!i.hidden}},t.registerSiteAspect("mediaAspect",s),s}),define("core/components/siteAspects/touchEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(e,t,i){"use strict";function s(t){r.forEach(function(e){o[e]={}},this),t.getSiteData().isInSSR()||(this.siteAspectAPI=t,function(){r.forEach(function(t){this.siteAspectAPI.registerToWindowTouchEvent(t,function(t){var i=t.type.slice("touch".length),s="WindowTouch"+n.capitalize(i),r=o[t.type],a="on"+s,c=void 0;e.forEach(r,function(e){(c=this.siteAspectAPI.getComponentById(e))?c[a]&&c[a](t):delete r[e]}.bind(this))}.bind(this))}.bind(this))}.call(this))}var n=i.stringUtils,o={},r=["touchstart","touchmove","touchend","touchcancel"];s.prototype={registerToWindowTouchEvent:function(e,t){o[e.toLowerCase()][t.props.id]=t.props.id},unregisterFromWindowTouchEvent:function(e,t){delete o[e.toLowerCase()][t.props.id]}},t.registerSiteAspect("windowTouchEvents",s)}),define("core/components/siteAspects/anchorLinkChangeEventAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(e,t,i){"use strict";function s(e){this._aspectSiteAPI=e,this._registeredCompCallbacks={},e.registerToScroll(this.onScroll.bind(this)),e.registerToRenderedRootsChange(this.onRenderedRootsChange.bind(this))}function n(t){var i=this._aspectSiteAPI.getAspectGlobalData("anchorChangeEvent"),s=e.get(i,"activeAnchorComp.id"),n=e.get(t,"activeAnchorComp.id");n&&n!==s&&(this._aspectSiteAPI.updateAspectGlobalData("anchorChangeEvent",t),this.propagateAnchorChangeEvent(t))}function o(i,s,o){var r=s?function(i,s,n){n=n||i.getPrimaryPageId();var o=t.scrollAnchors.getPageAnchors(i,n),r=t.scrollAnchors.getSortedAnchorsByY(i,o);return e.find(r,{id:s.replace("#","")})}(i,s,o):s;if(r){n.call(this,{activeAnchorComp:r})}}function r(i){var s=this._aspectSiteAPI.getSiteData(),o=s.isPopupOpened();if(i&&!o&&!e.isUndefined(i.y)){var r=t.scrollAnchors.getActiveAnchor(s,i.y);n.call(this,r)}}return s.prototype={registerToAnchorChange:function(e){e.onAnchorChange&&(this._registeredCompCallbacks[e.props.id]=e.onAnchorChange)},unregisterToAnchorChange:function(e){delete this._registeredCompCallbacks[e.props.id]},onScroll:function(t){e.isEmpty(this._registeredCompCallbacks)||r.call(this,t)},onRenderedRootsChange:function(i){if(e.isEmpty(i)){var s=this._aspectSiteAPI.getSiteAspect("windowScrollEvent").getScrollPosition();r.call(this,s)}else{var o=this._aspectSiteAPI.getSiteData().getPrimaryPageId(),a={activeAnchorComp:t.scrollAnchors.getPageTopAnchor(o)};n.call(this,a)}},setSelectedAnchorAsync:function(e,t,i,s){t&&(t=t.replace("#",""),setTimeout(o.bind(this,e,t,i),s))},propagateAnchorChangeEvent:function(t){e.forEach(this._registeredCompCallbacks,function(e){e(t)})}},i.registerSiteAspect("anchorChangeEvent",s),s}),define("core/components/siteAspects/siteScrollingBlockerAspect",["core/core/siteAspectsRegistry","lodash","zepto"],function(e,t,i){"use strict";function s(e){var t=e.getSiteAPI().getSiteData();this.fixOverflowScrollEdges=t.browserFlags().fixOverflowScrollEdges,this._blockersList=[],this._scrollCorrection=void 0,this.blockListeners=[]}function n(e){(function(){this._scrollCorrection=window.scrollY}).call(this),i("html").css({marginTop:-Math.max(.5,window.scrollY)+"px"}).addClass("blockSiteScrolling"),this.blockListeners.forEach(function(t){t.handleBlockedBy(e)})}function o(e){i("html").removeClass("blockSiteScrolling").css({marginTop:""}),function(){window.scrollTo(0,this._scrollCorrection)}.call(this),this.blockListeners.forEach(function(t){t.handleUnblockedBy(e)})}s.prototype={setSiteScrollingBlocked:function(e,i){var s=t.head(this._blockersList);this._blockersList=i?t(this._blockersList).concat(e).uniq().value():t.without(this._blockersList,e);var r=t.head(this._blockersList);s!==r&&(r?n:o).call(this,e)},isSiteScrollingBlocked:function(){return!!t.size(this._blockersList)},registerScrollingLayer:function(e){this.fixOverflowScrollEdges&&e.addEventListener("scroll",function(){e.scrollTop=t.clamp(e.scrollTop,1,e.scrollHeight-e.clientHeight-1)})},registerScrollBlockedListener:function(e){this.blockListeners.push(e)}},e.registerSiteAspect("siteScrollingBlocker",s)}),define("core/components/siteAspects/mouseWheelOverrideAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._isOverride=!1}function s(e){"undefined"!=typeof window&&(e.preventDefault(),window.scrollBy(0,-e.wheelDelta/2))}i.prototype={overrideMouseWheel:function(){var e=window.document.body;if(!this._isOverride){if(void 0!==e.onwheel)e.addEventListener("wheel",s);else{if(void 0===e.onmousewheel)return;e.addEventListener("mousewheel",s)}this._isOverride=!0}},releaseMouseWheel:function(){var e=window.document.body;e.removeEventListener("wheel",s),e.removeEventListener("mousewheel",s),this._isOverride=!1},isOverride:function(){return this._isOverride}},t.registerSiteAspect("mouseWheelOverride",i)}),define("core/components/siteAspects/svSessionChangeEventAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSvSessionChange(this.notifySessionChanged.bind(this))}i.prototype={registerToSessionChanged:function(e){this._registeredComps[e.props.id]=e},unRegisterToSessionChanged:function(e){delete this._registeredComps[e.props.id]},notifySessionChanged:function(t){e.forEach(this._registeredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SESSION_CHANGED",params:{userSession:t}})})}},t.registerSiteAspect("svSessionChangeEvent",i)}),define("core/components/siteAspects/htmlPostMessageAspect",["lodash","core/core/siteAspectsRegistry","core/components/siteAspects/behaviorsService"],function(e,t,i){"use strict";var s=function(t){t.registerToMessage(this.handleMessage.bind(this)),this.siteAPI=t,this.callbacks={},this.components={},this.queue={},e.bindAll(this,["handleMessage","registerComponent","unRegisterComponent","postMessage"])};return s.prototype={handleMessage:function(t){e.forEach(this.components,function(s,n){if(t.source===s){var o=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(n);0===e.size(o)?this.queue[n]=t:(function(){e.size(this.queue)>0&&e.forEach(this.queue,function(t,s){var n=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(s);i.handleBehaviors(this.siteAPI,e.map(n,"behavior"),t,"widget"),delete this.queue[s]}.bind(this))}.call(this),i.handleBehaviors(this.siteAPI,e.map(o,"behavior"),t,"widget"))}}.bind(this))},registerComponent:function(e,t){this.components[e]=t},unRegisterComponent:function(e){delete this.components[e]},postMessage:function(e,t){var i=this.components[e];i&&i.postMessage(t,"*")}},t.registerSiteAspect("HtmlPostMessageAspect",s),s}),define("core/components/siteAspects/siteMetadataChangeAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSiteMetadataChange(this.notifySiteMetadataChanged.bind(this))}i.prototype={registerToSiteMetadataChange:function(e){this._registeredComps[e.props.id]=e},unRegisterToSiteMetadataChange:function(e){delete this._registeredComps[e.props.id]},notifySiteMetadataChanged:function(t){e.forEach(this._registeredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SITE_METADATA_CHANGED",params:t})})}},t.registerSiteAspect("siteMetadataChangeAspect",i)}),define("core/components/siteAspects/popupPageAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,this._registeredCloseHandlers={},e.bindAll(this,["registerCloseHandler","unregisterCloseHandler","closePopupPage","openPopupPage"])}return i.prototype={registerCloseHandler:function(e,t){this._registeredCloseHandlers[e]=t},unregisterCloseHandler:function(t){this._registeredCloseHandlers=e.omit(this._registeredCloseHandlers,t)},closePopupPage:function(){var t=this._aspectSiteAPI.getCurrentPopupId();t&&(this._aspectSiteAPI.closePopupPage(),e.isFunction(this._registeredCloseHandlers[t])&&(this._registeredCloseHandlers[t].apply(this,arguments),this.unregisterCloseHandler(t)))},openPopupPage:function(e){this._aspectSiteAPI.openPopupPage(e)}},t.registerSiteAspect("PopupPageAspect",i),i}),define("core/components/siteAspects/visualFocusAspect",["zepto","lodash","core/core/siteAspectsRegistry","mobx"],function(e,t,i,s){"use strict";function n(t){e(t).addClass(r)}function o(e){e.registerToComponentDidMount(function(){this.disposeReaction=s.reaction(e.getSiteData().isVisualFocusEnabled,this.addOrRemoveListeners.bind(this),{fireImmediately:!0})}.bind(this)),e.registerToWillUnmount(function(){this.disposeReaction(),this.unregisterListeners()}.bind(this))}var r="focus-ring";o.prototype={addOrRemoveListeners:function(e){e?this.registerListeners():this.unregisterListeners()},registerListeners:function(){this.unregisterListeners(),this.keyUpEventListener=this.onKeyUp.bind(this),this.elementBlurEventListener=this.onBlur.bind(this),this.windowFocusEventListener=this.onWindowFocus.bind(this),this.windowBlurEventListener=this.onWindowBlur.bind(this),window.document.addEventListener("keyup",this.keyUpEventListener,!0),window.document.addEventListener("blur",this.elementBlurEventListener,!0),window.addEventListener("focus",this.windowFocusEventListener,!0),window.addEventListener("blur",this.windowBlurEventListener,!0)},unregisterListeners:function(){window.document.removeEventListener("keyup",this.keyUpEventListener,!0),window.document.removeEventListener("blur",this.elementBlurEventListener,!0),window.removeEventListener("focus",this.windowFocusEventListener,!0),window.removeEventListener("blur",this.windowBlurEventListener,!0)},onWindowFocus:function(){window.document.activeElement===this.elementWithFocusRing&&n(this.elementWithFocusRing)},onWindowBlur:function(){e(window.document.activeElement).hasClass(r)&&(this.elementWithFocusRing=window.document.activeElement)},onKeyUp:function(e){e.altKey||e.ctrlKey||e.metaKey||t.includes([9,38,40],e.keyCode)&&n(e.target)},onBlur:function(t){!function(t){e(t).removeClass(r)}(t.target)}},i.registerSiteAspect("visualFocusAspect",o)}),define("core/components/siteAspects/codeEmbedsAspect",["lodash","core/core/siteAspectsRegistry"],function(e,t){"use strict";function i(e){switch(e){case p:return window.document.head;case l:case d:return window.document.body;default:return null}}function s(t,i,s){var n=t.getCodeEmbeds();return e(n).filter({position:i}).filter(function(e){return"custom"===e.embedType||"verificationCode"===e.embedType}).filter(function(t){return!t.pages||e.some(t.pages,function(e){return e===s})||f(t)}).value()}function n(t,i){e.forEach(t.childNodes,function(t){var s=null;t.nodeType===window.Node.ELEMENT_NODE?(s=window.document.createElement(t.tagName),e.forEach(t.attributes,function(e){s.setAttribute(e.name,e.value)}),n(t,s)):t.nodeType===window.Node.TEXT_NODE?s=window.document.createTextNode(t.textContent):t.nodeType===window.Node.COMMENT_NODE&&(s=window.document.createComment(t.textContent)),s&&i.appendChild(s)})}function o(e,t){for(var i=0;i<t.length;++i)e.removeChild(t[i])}function r(e){var t=this;this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this._aspectSiteAPI.registerToUrlPageChange(this.onUrlPageChanged.bind(this)),this._aspectSiteAPI.registerToComponentDidMount(function(){t.previousPageId=t._siteData.getCurrentUrlPageId()})}var a,c,p="head",l="bodyStart",d="bodyEnd",u=[p,l,d],h=(a={},_defineProperty(a,p,"head html embeds start"),_defineProperty(a,l,"body start html embeds start"),_defineProperty(a,d,"body end html embeds start"),a),g=(c={},_defineProperty(c,p,"head html embeds end"),_defineProperty(c,l,"body start html embeds end"),_defineProperty(c,d,"body end html embeds end"),c),f=function(e){return e.loadOnce},m=function(e){return!f(e)};r.prototype.onUrlPageChanged=function(){var t=this,r=this.previousPageId;this.previousPageId=this._siteData.getCurrentUrlPageId();var a=e.map(u,function(e){return function(e){for(var t=h[e],s=g[e],n=i(e),o=null,r=0;r<n.childNodes.length;r++){var a=n.childNodes[r];if(a.nodeType===window.Node.COMMENT_NODE)if(a.textContent===t)o=r;else if(a.textContent===s)return{location:e,index:{start:o,end:r},nodes:{start:n.childNodes[o],end:a}}}return null}(e)});if(!e.some(a,function(e){return!e})){var c={},p={},l={};e.forEach(a,function(n){var o=n.location,a=function(t,i,s){return e(t).slice(i+1,s).filter({nodeType:window.Node.ELEMENT_NODE}).value()}(i(o).childNodes,n.index.start,n.index.end),d=s(t._siteData,o,r);c[o]=[],p[o]=[],l[o]=[];for(var u=0;u<d.length;++u)m(d[u])?c[o].push(a[u]):(p[o].push(d[u].id),l[o].push(a[u]))});for(var d=0;d<u.length;++d){var f=u[d];o(i(f),c[f])}e.forEach(a,function(o){!function(t,o,r,a,c){var p=r,l=i(o),d=0;e.forEach(s(t,o,t.getCurrentUrlPageId()),function(e){var t=window.document.createElement("div");if(a.length>0&&a[d]===e.id)p=c[d],d++;else{var i=window.document.createElement("div");for(i.innerHTML=e.content.html,n(i,t);t.children.length;)l.insertBefore(t.children[0],p.nextSibling);p=p.nextSibling}})}(t._siteData,o.location,o.nodes.start,p[o.location],l[o.location])})}},t.registerSiteAspect("codeEmbedsAspect",r)}),define("core/components/siteAspects/aspectsCollector",["core/core/siteAspectsRegistry","core/components/siteAspects/BehaviorsAspect","core/components/siteAspects/animationsAspect","core/components/siteAspects/DesignDataChangeAspect","core/components/siteAspects/parentFrameAspect","core/core/pageItemAspect","core/core/nonPageItemZoomAspect","core/components/siteAspects/externalScriptLoaderAspect","core/siteRender/SiteMembersAspect","core/components/siteAspects/windowFocusEventsAspect","core/components/siteAspects/windowScrollEventAspect","core/components/siteAspects/windowResizeEventAspect","core/components/siteAspects/windowClickEventAspect","core/components/siteAspects/windowKeyboardEventAspect","core/components/siteAspects/addComponentAspect","core/components/siteAspects/AudioAspect","core/components/siteAspects/quickActionBarAspect","core/components/siteAspects/actionsAspect","core/components/siteAspects/DynamicClientSpecMapAspect","core/components/siteAspects/VerticalAnchorsMenuAspect","core/components/siteAspects/SiteVisibilityAspect","core/components/siteAspects/ViewportAspect","core/components/siteAspects/MediaAspect","core/components/siteAspects/touchEventsAspect","core/components/siteAspects/anchorLinkChangeEventAspect","core/components/siteAspects/siteScrollingBlockerAspect","core/components/siteAspects/mouseWheelOverrideAspect","core/components/siteAspects/svSessionChangeEventAspect","core/components/siteAspects/htmlPostMessageAspect","core/components/siteAspects/siteMetadataChangeAspect","core/components/siteAspects/popupPageAspect","core/components/siteAspects/visualFocusAspect","core/components/siteAspects/codeEmbedsAspect"],function(e,t,i,s){"use strict";e.registerSiteAspect("behaviorsAspect",t),e.registerSiteAspect("animationsAspect",i),e.registerSiteAspect("designDataChangeAspect",s)}),define("core/components/behaviorHandlers/prefetchPagesBehaviorHandler",["lodash"],function(e){"use strict";return{prefetchPages:function(t,i){var s=i.getSiteData().getPagesDataItems(),n=t.params.prefetchFilters,o=e(s).filter(function(t){return e.every(n,function(i,s){return e.includes(i,t[s])})}).map("id").value();if(!e.isEmpty(o)){var r=i.getSiteDataAPI(),a=0;e.forEach(o,function(e){var t={pageId:e};r.loadPage(t,function(){++a===o.length&&i.addPrefetchPages(o)})})}},isEnabled:function(){return!0}}}),define("core/components/behaviorHandlers/siteBehaviorHandler",["lodash","utils","core/components/behaviorHandlers/prefetchPagesBehaviorHandler"],function(e,t,i){"use strict";function s(){return!0}function n(){return{default:function(e){t.log.error("Invalid behavior",e)},openPopup:function(){function e(e,t,i){var s=i.targetId;return!e.isZoomOpened()&&!function(e){return"editor"===e.getRenderFlag("componentViewMode")}(e)&&!function(e,t){return e.getRuntimeDal().hasBeenPopupOpened(t)}(e,s)&&!e.isPopupOpened()&&(t.isMobileView()?Boolean(i.params.openInMobile):Boolean(i.params.openInDesktop))}var t=void 0;return function(i,s){clearTimeout(t);var n=s.getSiteData();e(s,n,i)&&(t=setTimeout(function(t){n.getPrimaryPageId()!==t||e(s,n,i)&&s.getSiteAspect("PopupPageAspect").openPopupPage(i.targetId)},function(e){return 1e3*(e.params.delay||0)}(i),n.getPrimaryPageId()))}}(),prefetchPages:i.prefetchPages}}function o(){return{default:function(e){t.log.error("Invalid behavior",e)},openPopup:s,prefetchPages:i.isEnabled}}var r=void 0,a=void 0;return{handle:function(t,i){r=r||n(),e.forEach(t,function(e){(r[e.name]||r.default)(e,i)})},isEnabled:function(e,t){return((a=a||o())[e.name]||a.default)(t)}}}),define("core/siteRender/siteBehaviorsRegistrar",["core/components/behaviorHandlers/behaviorHandlersFactory","core/components/behaviorHandlers/siteBehaviorHandler"],function(e,t){"use strict";e.registerHandler("site",t)}),define("core/core/siteHooks/pageLoadHooks",["core/core/site","coreUtils"],function(e,t){"use strict";e.hooks.registerHook(e.hooks.types.PAGE_LOADED_FIRST_RENDER,function(t,i){t.rendererModel.previewMode||e.isProtectedPage(t)||i.preInitWidgets(t,t.currentUrl.full)}),e.hooks.registerHook(e.hooks.types.PAGE_LOADED,function(e,i){!function(e,i){if(i.pageId!==t.siteConstants.MASTER_PAGE_ID){var s=e.getSiteDataAPI(),n=e.getSiteData(),o=i.pageId;n.isPopupPage(o)&&(o=n.getPrimaryPageId()),s.updateActiveSOSPModes(o)}}(e,i);var s=e.getSiteData(),n=!i.routerDefinition,o=s.getFocusedRootId()===e.getCurrentPopupId(),r=o&&i.pageId===s.getPrimaryPageId(),a=s.getFocusedRootId()!==i.pageId;if(n&&a&&!r)e.getSiteAspect("WidgetAspect").initApps([i.pageId]);else if(i.routerDefinition){var c=!a,p=i.innerRoute!==s.getRootNavigationInfo().innerRoute;if(c&&p)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(a&&!o)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(o){var l=i.pageId===s.getPrimaryPageId();(!l||l&&p)&&e.getSiteAspect("WidgetAspect").initApps([i.pageId])}}})}),define("core",["lodash","utils","coreUtils","skins","santaComponents","core/util/santaVersion.json","core/core/site","core/siteRender/compRegistrar","core/siteRender/styleCollector","core/core/dataRequirementsChecker","core/core/siteAspectsRegistry","core/core/requireCompCode","core/components/createChildComponentMixin","core/components/createOldChildComponentMixin","core/components/popupPagesMixin","core/components/inputFocusMixin","core/components/validatableMixin","core/components/validatableWithSyncMixin","core/components/runTimeCompData","core/components/blockOuterScrollMixin","core/components/optionInput","core/components/skinInfo","core/core/SiteDataAPI","core/siteRender/SiteAPI","core/core/data/RuntimeDal","core/components/util/galleryPagingCalculations","core/components/util/boxSlideShowCommon","core/components/mediaZoomWrapperMixin","core/components/galleryImageExpandedActionMixin","core/components/util/matrixAnimationManipulation","core/components/uniquePageIdMixin","core/siteRender/WixSiteHeadRenderer","core/activities/activityTypes","core/activities/activityService","core/siteRender/SiteAspectsSiteAPI","core/bi/events","core/components/wixTransitionGroup","core/components/wixTransitionItem","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/siteAspects/behaviorsService","core/siteRender/WixSiteReact","core/components/fullScreenOverlay/fullScreenOverlay","core/bi/errors","core/components/compStateMixin","core/components/siteAspects/animationsService","core/core/data/structureInfoGetter","core/core/data/ViewerDisplayedJsonUpdater","core/components/siteAspects/aspectsCollector","core/components/siteAspects/AudioAspect","core/siteRender/siteBehaviorsRegistrar","core/core/siteHooks/pageLoadHooks"],function(e,t,i,s,n,o,r,a,c,p,l,d,u,h,g,f,m,y,v,A,S,P,I,D,_,C,b,E,T,w,R,M,k,O,x,L,N,B,U,F,V,q,W,G,H,K,z){"use strict";return{santaVersion:o.version,SiteDataAPI:I,SiteAPI:D,RuntimeDal:_,MobileDeviceAnalyzer:t.MobileDeviceAnalyzer,renderer:r,WixSiteHeadRenderer:M,compRegistrar:a,styleCollector:c,dataRequirementsChecker:p,siteAspectsRegistry:l,requireCompCode:d,compMixins:{intervalsMixin:t.timersMixins.intervalsMixin,timeoutsMixin:t.timersMixins.timeoutsMixin,skinBasedComp:n.mixins.skinBasedComp(s.skinsMap),createChildComponentMixin:u,createOldChildComponentMixin:h,popupPagesMixin:g,inputFocusMixin:f,validatableMixin:m,validatableWithSyncMixin:y,runTimeCompData:v,optionInput:S,skinInfo:P,mediaZoomWrapperMixin:E,galleryImageExpandedActionMixin:T,baseCompMixin:n.mixins.baseCompMixin,postMessageCompMixin:t.postMessageCompMixin,uniquePageIdMixin:R,blockOuterScrollMixin:A,compActionMixin:n.mixins.compActionMixin,compStateMixin:G},componentUtils:{fullScreenOverlay:q,galleryPagingCalculations:C,matrixAnimationManipulation:w,boxSlideShowCommon:b},createReactElement:n.utils.createReactElement,activityTypes:k,activityService:O,SiteAspectsSiteAPI:x,behaviorHandlersFactory:U,behaviorsService:F,wixTransitionGroup:N,wixTransitionItem:B,biEvents:L,DataAccessPointers:i.pointers.DataAccessPointers,PointersCache:i.pointers.PointersCache,pointerGeneratorsRegistry:i.pointers.pointerGeneratorsRegistry,SimpleDisplayedJsonUpdater:z,forTests:{WixSiteReact:V},errors:W,structureInfoGetter:K,animationsService:H}});
//# sourceMappingURL=core.min.js.map